<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Roody: Roody.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_b3aa452d070ecf22c1e5f73c22d8afce.html">src</a>
  </div>
</div>
<div class="contents">
<h1>Roody.cxx</h1><a href="Roody_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// Roody.cxx</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// $Id: Roody.cxx 245 2012-06-14 18:14:25Z olchansk $</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="RoodyXML_8h.html">RoodyXML.h</a>&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="Roody_8h.html">Roody.h</a>&quot;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;TAxisLimitsDialog.h&quot;</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;TROOT.h&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;TCutG.h&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;TNtuple.h&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;TGraph.h&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;TVirtualX.h&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;TGListTree.h&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;TGClient.h&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;TGLabel.h&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;TGButton.h&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;TGMsgBox.h&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;TGMenu.h&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;TGCanvas.h&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="TGTextDialog_8h.html">TGTextDialog.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;TCanvas.h&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;TFrame.h&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;TH1.h&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;TSystem.h&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;TFile.h&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;TKey.h&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;TGStatusBar.h&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;TExec.h&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;TStyle.h&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;TTimer.h&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;TContextMenu.h&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;TClassMenuItem.h&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;TSocket.h&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="MTGListTree_8h.html">MTGListTree.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="TPeakFindPanel_8h.html">TPeakFindPanel.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;TGFileDialog.h&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;TPaveLabel.h&quot;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="preprocessor">#ifdef HAVE_HBOOK</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">#include &quot;THbookKey.h&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;THbookFile.h&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;THbookTree.h&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;THbookBranch.h&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#endif</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="Roody_8cxx.html#a45fabe6b04ca0d46e19eafb959f7e224">00053</a> <span class="keywordtype">void</span> <a class="code" href="Roody_8cxx.html#a45fabe6b04ca0d46e19eafb959f7e224">breakhere</a>(<span class="keywordtype">void</span>)
<a name="l00054"></a>00054 {
<a name="l00055"></a>00055   <span class="comment">// nothing</span>
<a name="l00056"></a>00056 }
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classMemDebug.html">00058</a> <span class="keyword">class </span><a class="code" href="classMemDebug.html">MemDebug</a> : <span class="keyword">public</span> TObject
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060 <span class="keyword">public</span>:
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="classMemDebug.html#a3ae05e40241f29fafc75ecb666285cf7">00062</a>   <a class="code" href="classMemDebug.html#a3ae05e40241f29fafc75ecb666285cf7">MemDebug</a>() <span class="comment">// ctor</span>
<a name="l00063"></a>00063   {
<a name="l00064"></a>00064     printf(<span class="stringliteral">&quot;MemDebug %p created!\n&quot;</span>, <span class="keyword">this</span>);
<a name="l00065"></a>00065   }
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="classMemDebug.html#a1d31b9a076202000b27e2b4f7641fef5">00067</a>   <a class="code" href="classMemDebug.html#a1d31b9a076202000b27e2b4f7641fef5">~MemDebug</a>() <span class="comment">// dtor</span>
<a name="l00068"></a>00068   {
<a name="l00069"></a>00069     printf(<span class="stringliteral">&quot;MemDebug %p destroyed!\n&quot;</span>, <span class="keyword">this</span>);
<a name="l00070"></a>00070     <a class="code" href="Roody_8cxx.html#a45fabe6b04ca0d46e19eafb959f7e224">breakhere</a>();
<a name="l00071"></a>00071   }
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="classMemDebug.html#a393888af02ddd6f540992ea8f1bc9c00">00073</a>   TObject* <a class="code" href="classMemDebug.html#a393888af02ddd6f540992ea8f1bc9c00">Clone</a>()
<a name="l00074"></a>00074   {
<a name="l00075"></a>00075     TObject* obj = <span class="keyword">new</span> <a class="code" href="classMemDebug.html#a3ae05e40241f29fafc75ecb666285cf7">MemDebug</a>();
<a name="l00076"></a>00076     printf(<span class="stringliteral">&quot;MemDebug %p cloned into %p!\n&quot;</span>, <span class="keyword">this</span>, obj);
<a name="l00077"></a>00077     <span class="keywordflow">return</span> obj;
<a name="l00078"></a>00078   }
<a name="l00079"></a>00079 };
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;DataSourceBase.h&quot;</span>
<a name="l00082"></a>00082 <span class="preprocessor">#include &quot;DataSourceTDirectory.h&quot;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &quot;DataSourceTNetFolder.h&quot;</span>
<a name="l00084"></a>00084 <span class="preprocessor">#include &quot;DataSourceTFile.h&quot;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &quot;DataSourceXmlServer.h&quot;</span>
<a name="l00086"></a>00086 <span class="preprocessor">#ifdef HAVE_NETDIRECTORY</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span><span class="preprocessor">#include &quot;DataSourceNetDirectory.h&quot;</span>
<a name="l00088"></a>00088 <span class="preprocessor">#endif</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span>
<a name="l00090"></a><a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498">00090</a> <span class="keyword">enum</span> <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498">Action</a>
<a name="l00091"></a>00091   {
<a name="l00092"></a><a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">00092</a>     <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>   = 1,
<a name="l00093"></a><a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a506cbac1e552dac39438f1257f0a48db">00093</a>     <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a506cbac1e552dac39438f1257f0a48db">A_FOLDER</a> = 2,
<a name="l00094"></a><a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a2c9efb4d17b30eba2326dab6d8763d1a">00094</a>     <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a2c9efb4d17b30eba2326dab6d8763d1a">A_SOURCE</a> = 3,
<a name="l00095"></a><a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a6d4bfa6b698453562f3ea0888b3362ad">00095</a>     <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a6d4bfa6b698453562f3ea0888b3362ad">A_GROUP</a>  = 4,
<a name="l00096"></a>00096   };
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">00098</a> TList* <a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a> = NULL;
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">00100</a> std::map&lt;TGListTreeItem*, Action&gt; <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">00102</a> std::map&lt;ObjectPath,TObject*&gt; <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>;
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="Roody_8cxx.html#a983be03604153205d83c4c28d8b2891e">00104</a> <span class="keyword">typedef</span> std::map&lt;std::string,DataSourceBase*&gt; <a class="code" href="Roody_8cxx.html#a983be03604153205d83c4c28d8b2891e">DataSourcesMap</a>;
<a name="l00105"></a><a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">00105</a> <a class="code" href="Roody_8cxx.html#a983be03604153205d83c4c28d8b2891e">DataSourcesMap</a> <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>;
<a name="l00106"></a>00106 
<a name="l00107"></a><a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">00107</a> std::map&lt;TGListTreeItem*,ObjectPath&gt;   <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>;
<a name="l00108"></a><a class="code" href="Roody_8cxx.html#ab15243e54e971d543df4cc286b5733d0">00108</a> std::map&lt;ObjectPath,std::string&gt;       <a class="code" href="Roody_8cxx.html#ab15243e54e971d543df4cc286b5733d0">gObjectClasses</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="Roody_8cxx.html#a84676ea47b401c2f644bcef0359b27d7">00110</a> std::map&lt;std::string,std::vector&lt;TGListTreeItem*&gt; &gt; <a class="code" href="Roody_8cxx.html#a84676ea47b401c2f644bcef0359b27d7">gGroupContents</a>;
<a name="l00111"></a>00111 
<a name="l00112"></a><a class="code" href="Roody_8cxx.html#aa45a52d0850f8e533dde19ee80e62194">00112</a> <span class="keyword">static</span> TGListTreeItem* <a class="code" href="Roody_8cxx.html#aa45a52d0850f8e533dde19ee80e62194">FindItem</a>(ObjectPath src)
<a name="l00113"></a>00113 {
<a name="l00114"></a>00114   std::map&lt;TGListTreeItem*,ObjectPath&gt;::iterator curr = <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>.begin();
<a name="l00115"></a>00115   std::map&lt;TGListTreeItem*,ObjectPath&gt;::iterator end  = <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>.end();
<a name="l00116"></a>00116   <span class="keywordflow">for</span> (; curr != end; curr++)
<a name="l00117"></a>00117     {
<a name="l00118"></a>00118       TGListTreeItem* p = (*curr).first;
<a name="l00119"></a>00119       ObjectPath s = (*curr).second;
<a name="l00120"></a>00120       <span class="keywordflow">if</span> (s == src)
<a name="l00121"></a>00121         <span class="keywordflow">return</span> p;
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123   <span class="keywordflow">return</span> NULL;
<a name="l00124"></a>00124 }
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">00126</a> TObject* <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">Roody::GetObject</a>(<span class="keyword">const</span> ObjectPath&amp; src)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <span class="keywordflow">if</span> (src.size() &lt; 1)
<a name="l00129"></a>00129     {
<a name="l00130"></a>00130       <span class="comment">//printf(&quot;GetObject %s return NULL\n&quot;, src.toString().c_str());</span>
<a name="l00131"></a>00131       <span class="keywordflow">return</span> NULL;
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   TObject *obj = <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>[src];
<a name="l00135"></a>00135   <span class="keywordflow">if</span> (obj)
<a name="l00136"></a>00136     {
<a name="l00137"></a>00137       <span class="comment">//printf(&quot;GetObject %s return %p (cached)\n&quot;, src.toString().c_str(), obj);</span>
<a name="l00138"></a>00138       <span class="keywordflow">return</span> obj;
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   DataSourceBase* d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[src.front()];
<a name="l00142"></a>00142   <span class="keywordflow">if</span> (d)
<a name="l00143"></a>00143     {
<a name="l00144"></a>00144       obj = d-&gt;GetObject(src);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146       <span class="keywordflow">if</span> (obj == NULL)
<a name="l00147"></a>00147         {
<a name="l00148"></a>00148           std::string s;
<a name="l00149"></a>00149           s += <span class="stringliteral">&quot;Cannot access &quot;</span>;
<a name="l00150"></a>00150           s += src.toString();
<a name="l00151"></a>00151           <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(s.c_str());
<a name="l00152"></a>00152 <span class="preprocessor">#if 0</span>
<a name="l00153"></a>00153 <span class="preprocessor"></span>          obj = <span class="keyword">new</span> TPaveLabel(0.1,0.1,0.9,0.9,s.c_str());
<a name="l00154"></a>00154 <span class="preprocessor">#endif</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>        }
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157   <span class="keywordflow">else</span>
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159       std::string s;
<a name="l00160"></a>00160       s += <span class="stringliteral">&quot;No source for &quot;</span>;
<a name="l00161"></a>00161       s += src.toString();
<a name="l00162"></a>00162       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(s.c_str());
<a name="l00163"></a>00163 <span class="preprocessor">#if 0</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>      obj = <span class="keyword">new</span> TPaveLabel(0.1,0.1,0.9,0.9,s.c_str());
<a name="l00165"></a>00165 <span class="preprocessor">#endif</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>    }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>[src] = obj;
<a name="l00170"></a>00170   
<a name="l00171"></a>00171   <span class="comment">//printf(&quot;GetObject %s return %p\n&quot;, src.toString().c_str(), obj);</span>
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keywordflow">return</span> obj;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="classRoody.html#abf1e1efd5a3be11f61588b64728cb562">00176</a> TObject* <a class="code" href="classRoody.html#abf1e1efd5a3be11f61588b64728cb562">Roody::RereadObject</a>(<span class="keyword">const</span> ObjectPath&amp; src)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178   TObject *obj = <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>[src];
<a name="l00179"></a>00179   <span class="keywordflow">if</span> (obj)
<a name="l00180"></a>00180     {
<a name="l00181"></a>00181       <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>.erase(src);
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   TObject *xobj = <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(src);
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordflow">if</span> (xobj == NULL)
<a name="l00187"></a>00187     {
<a name="l00188"></a>00188       xobj = obj;
<a name="l00189"></a>00189       <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>[src] = obj;
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="comment">// if new object is same as the old one, do not delete it!</span>
<a name="l00193"></a>00193   <span class="keywordflow">if</span> (obj != xobj)
<a name="l00194"></a>00194     {
<a name="l00195"></a>00195       <span class="comment">//printf(&quot;delete %p\n&quot;, obj);</span>
<a name="l00196"></a>00196       <span class="keyword">delete</span> obj;
<a name="l00197"></a>00197     }
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="keywordflow">return</span> xobj;
<a name="l00200"></a>00200 }
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">00202</a> std::map&lt;TVirtualPad*,PadObjectVec&gt; <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <a class="code" href="MTGListTree_8cxx.html#a8b5b9bd5c977cb9d68cc18f9cbc82327">ClassImp</a>(<a class="code" href="classRoody.html">Roody</a>);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <a class="code" href="classTPeakFindPanel.html">TPeakFindPanel</a> *<a class="code" href="classRoody.html#a77bfde3c103b507e1692f9587b93ff47">Roody::fgPeakFindPanel</a> = 0;
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="classRoody.html#ad83246f782ed3b8fc2a0170abceb1814">00208</a> <a class="code" href="classRoody.html#ad83246f782ed3b8fc2a0170abceb1814">Roody::Roody</a>(<span class="keyword">const</span> TGWindow *p, UInt_t w, UInt_t h) <span class="comment">// ctor</span>
<a name="l00209"></a>00209   : TGMainFrame(p?p:gClient-&gt;GetRoot(), w, h)
<a name="l00210"></a>00210 {
<a name="l00211"></a>00211   <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a> == NULL)
<a name="l00212"></a>00212     {
<a name="l00213"></a>00213       <a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a> = <span class="keyword">new</span> TList();
<a name="l00214"></a>00214       gROOT-&gt;GetListOfCleanups()-&gt;Add(<a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a>);
<a name="l00215"></a>00215     }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">//</span>
<a name="l00218"></a>00218   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = 0;
<a name="l00219"></a>00219   <a class="code" href="classRoody.html#a5033f3b11fe12cdb925bba00e4a9ea60">fAddToGroupPopup</a> = 0;
<a name="l00220"></a>00220   <span class="comment">//</span>
<a name="l00221"></a>00221   <a class="code" href="classRoody.html#a655286d7d4ad8c859e130c58372ded4f">fCanvasCount</a> = 0;
<a name="l00222"></a>00222   <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a> = 0;
<a name="l00223"></a>00223   <span class="comment">//</span>
<a name="l00224"></a>00224   SetWindowName(<span class="stringliteral">&quot;Roody&quot;</span>);
<a name="l00225"></a>00225   <span class="comment">//</span>
<a name="l00226"></a>00226 <span class="preprocessor">#if 0</span>
<a name="l00227"></a>00227 <span class="preprocessor"></span>  gStyle-&gt;SetPalette( 1 );
<a name="l00228"></a>00228   <span class="comment">//</span>
<a name="l00229"></a>00229   gStyle-&gt;SetTitleTextColor( kBlue );
<a name="l00230"></a>00230   gStyle-&gt;SetStatTextColor( kBlue );
<a name="l00231"></a>00231   gStyle-&gt;SetTitleBorderSize( 0 );
<a name="l00232"></a>00232   gStyle-&gt;SetStatBorderSize( 0 );
<a name="l00233"></a>00233   <span class="comment">//</span>
<a name="l00234"></a>00234   gStyle-&gt;SetFuncColor( kBlue );
<a name="l00235"></a>00235   gStyle-&gt;SetOptFit( 1111 );
<a name="l00236"></a>00236 <span class="preprocessor">#endif</span>
<a name="l00237"></a>00237 <span class="preprocessor"></span>  gStyle-&gt;SetOptStat( 1001111 );
<a name="l00238"></a>00238   <span class="comment">//</span>
<a name="l00239"></a>00239   <a class="code" href="classRoody.html#acf0200144698e6d240142c0048cf2fae">LayoutGUI</a>();
<a name="l00240"></a>00240   <a class="code" href="classRoody.html#a679469f7ed5d3209518a73d375615ed6">AddPeakFind</a>();
<a name="l00241"></a>00241   <a class="code" href="classRoody.html#afa5dec915081c254b4cde9afa392c925">AddAxisLimits</a>();
<a name="l00242"></a>00242   <a class="code" href="classRoody.html#af4abbad068f9a6e6779bd9147c9cf4d6">AddSetCut</a>();
<a name="l00243"></a>00243   <a class="code" href="classRoody.html#a170d1ee73a2f6dc6ff608e0ad6dbdbb8">AddZoomOption</a>();
<a name="l00244"></a>00244   <span class="comment">//</span>
<a name="l00245"></a>00245   Resize( GetDefaultSize() );
<a name="l00246"></a>00246   MapSubwindows();
<a name="l00247"></a>00247   Layout(); <span class="comment">// member function of TGCompositeFrame</span>
<a name="l00248"></a>00248   MapWindow();
<a name="l00249"></a>00249   <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot;Welcome to Roody&quot;</span>);
<a name="l00250"></a>00250   <span class="comment">//</span>
<a name="l00251"></a>00251   <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> = 1;  <span class="comment">// default zone row setting</span>
<a name="l00252"></a>00252   <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a> = 1;  <span class="comment">// default zone column setting</span>
<a name="l00253"></a>00253   <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> = 0;  <span class="comment">//default refresh time</span>
<a name="l00254"></a>00254   <a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a> = <span class="keyword">false</span>;
<a name="l00255"></a>00255   <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a> = <span class="keyword">new</span> TTimer(0,kTRUE);
<a name="l00256"></a>00256   <span class="comment">//</span>
<a name="l00257"></a>00257   TQObject::Connect( <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>,<span class="stringliteral">&quot;Timeout()&quot;</span>,<span class="stringliteral">&quot;Roody&quot;</span>,<span class="keyword">this</span>,<span class="stringliteral">&quot;RefreshAll()&quot;</span> );
<a name="l00258"></a>00258   <a class="code" href="classRoody.html#a07166d648c44522d6f3a393a1247fadb">StartUpdateTimer</a>(); <span class="comment">// Refresh off by default</span>
<a name="l00259"></a>00259   <span class="comment">//</span>
<a name="l00260"></a>00260 }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="Roody_8cxx.html#afcdd7d98940322cf5d3bee7f259e4628">00262</a> <span class="keyword">static</span> std::string <a class="code" href="Roody_8cxx.html#afcdd7d98940322cf5d3bee7f259e4628">PathToString</a>(<span class="keyword">const</span> ObjectPath&amp; src)
<a name="l00263"></a>00263 {
<a name="l00264"></a>00264   std::string s = src.front();
<a name="l00265"></a>00265   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=1; j&lt;src.size(); j++)
<a name="l00266"></a>00266     {
<a name="l00267"></a>00267       s += <span class="stringliteral">&quot;|&quot;</span>;
<a name="l00268"></a>00268       s += src[j];
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270   <span class="keywordflow">return</span> s;
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">00273</a> <span class="keyword">static</span> std::vector&lt;std::string&gt; <a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="keywordtype">char</span> sep, <span class="keyword">const</span> std::string&amp; str)
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275   std::vector&lt;std::string&gt; vec;
<a name="l00276"></a>00276   
<a name="l00277"></a>00277   <span class="keywordtype">char</span> buf[1024];
<a name="l00278"></a>00278   strncpy(buf, str.c_str(), <span class="keyword">sizeof</span>(buf));
<a name="l00279"></a>00279   buf[<span class="keyword">sizeof</span>(buf)-1] = 0;
<a name="l00280"></a>00280   
<a name="l00281"></a>00281   <span class="keywordtype">char</span>* s = buf;
<a name="l00282"></a>00282   <span class="keywordtype">char</span>* p = buf;
<a name="l00283"></a>00283   
<a name="l00284"></a>00284   <span class="keywordflow">while</span> (s[0] != 0)
<a name="l00285"></a>00285     {
<a name="l00286"></a>00286       <span class="keywordflow">while</span> (*p != 0)
<a name="l00287"></a>00287         {
<a name="l00288"></a>00288           <span class="keywordflow">if</span> (*p == sep)
<a name="l00289"></a>00289             {
<a name="l00290"></a>00290               *p = 0;
<a name="l00291"></a>00291               p++;
<a name="l00292"></a>00292               <span class="keywordflow">break</span>;
<a name="l00293"></a>00293             }
<a name="l00294"></a>00294           p++;
<a name="l00295"></a>00295         }
<a name="l00296"></a>00296       
<a name="l00297"></a>00297       vec.push_back(s);
<a name="l00298"></a>00298       s = p;
<a name="l00299"></a>00299     }
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="keywordflow">return</span> vec;
<a name="l00302"></a>00302 }
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">00304</a> <span class="keyword">static</span> std::vector&lt;int&gt; <a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">toInt</a>(<span class="keyword">const</span> std::vector&lt;std::string&gt;&amp; vec)
<a name="l00305"></a>00305 {
<a name="l00306"></a>00306   std::vector&lt;int&gt; ivec;
<a name="l00307"></a>00307   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;vec.size(); i++)
<a name="l00308"></a>00308     ivec.push_back(atoi(vec[i].c_str()));
<a name="l00309"></a>00309   <span class="keywordflow">return</span> ivec;
<a name="l00310"></a>00310 }
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="Roody_8cxx.html#a3488eb532681756764342f2b647dfd35">00312</a> <span class="keyword">static</span> ObjectPath <a class="code" href="Roody_8cxx.html#a3488eb532681756764342f2b647dfd35">StringToPath</a>(<span class="keyword">const</span> std::string&amp; source)
<a name="l00313"></a>00313 {
<a name="l00314"></a>00314   ObjectPath path;
<a name="l00315"></a>00315   std::vector&lt;std::string&gt; s = <a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos;|&apos;</span>, source);
<a name="l00316"></a>00316   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;s.size(); i++)
<a name="l00317"></a>00317     path.push_back(s[i]);
<a name="l00318"></a>00318   <span class="keywordflow">return</span> path;
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="preprocessor">#if 0</span>
<a name="l00322"></a>00322 <span class="preprocessor"></span><span class="keyword">static</span> ObjectPath <a class="code" href="Roody_8cxx.html#a3488eb532681756764342f2b647dfd35">StringToPath</a>(<span class="keyword">const</span> std::string&amp; source)
<a name="l00323"></a>00323 {
<a name="l00324"></a>00324   ObjectPath path;
<a name="l00325"></a>00325   
<a name="l00326"></a>00326   <span class="keywordtype">char</span> buf[1024];
<a name="l00327"></a>00327   strncpy(buf, source.c_str(), <span class="keyword">sizeof</span>(buf));
<a name="l00328"></a>00328   buf[<span class="keyword">sizeof</span>(buf)-1] = 0;
<a name="l00329"></a>00329   
<a name="l00330"></a>00330   <span class="keywordtype">char</span>* s = buf;
<a name="l00331"></a>00331   <span class="keywordtype">char</span>* p = buf;
<a name="l00332"></a>00332   
<a name="l00333"></a>00333   <span class="keywordflow">while</span> (s[0] != 0)
<a name="l00334"></a>00334     {
<a name="l00335"></a>00335       <span class="keywordflow">while</span> (*p != 0)
<a name="l00336"></a>00336         {
<a name="l00337"></a>00337           <span class="keywordflow">if</span> (*p == <span class="charliteral">&apos;|&apos;</span>)
<a name="l00338"></a>00338             {
<a name="l00339"></a>00339               *p = 0;
<a name="l00340"></a>00340               p++;
<a name="l00341"></a>00341               <span class="keywordflow">break</span>;
<a name="l00342"></a>00342             }
<a name="l00343"></a>00343           p++;
<a name="l00344"></a>00344         }
<a name="l00345"></a>00345       
<a name="l00346"></a>00346       path.push_back(s);
<a name="l00347"></a>00347       s = p;
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350   <span class="keywordflow">return</span> path;
<a name="l00351"></a>00351 }
<a name="l00352"></a>00352 <span class="preprocessor">#endif</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span>
<a name="l00354"></a><a class="code" href="classRoody.html#ae503ce0b33c7a802c25ffc1cd6acc4c3">00354</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ae503ce0b33c7a802c25ffc1cd6acc4c3">Roody::RestoreObjects</a>(<a class="code" href="classRoodyXML.html">RoodyXML</a>*xml, TVirtualPad *pad, <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> parent)
<a name="l00355"></a>00355 {
<a name="l00356"></a>00356   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; ; j++)
<a name="l00357"></a>00357     {
<a name="l00358"></a>00358       j = xml-&gt;<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(parent, j, <span class="stringliteral">&quot;object&quot;</span>);
<a name="l00359"></a>00359       <span class="keywordflow">if</span> (j&lt;0)
<a name="l00360"></a>00360         <span class="keywordflow">break</span>;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362       <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xobject = xml-&gt;<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(parent, j);
<a name="l00363"></a>00363       
<a name="l00364"></a>00364       std::string xclass     = xml-&gt;<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml-&gt;<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;class&quot;</span>));
<a name="l00365"></a>00365       std::string name       = xml-&gt;<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml-&gt;<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;name&quot;</span>));
<a name="l00366"></a>00366       std::string source     = xml-&gt;<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml-&gt;<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;source&quot;</span>));
<a name="l00367"></a>00367       std::string drawOption = xml-&gt;<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml-&gt;<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;drawOption&quot;</span>));
<a name="l00368"></a>00368       
<a name="l00369"></a>00369       <span class="keywordflow">if</span> (source.length() &lt; 1)
<a name="l00370"></a>00370         <span class="keywordflow">continue</span>;
<a name="l00371"></a>00371       
<a name="l00372"></a>00372       ObjectPath path = <a class="code" href="Roody_8cxx.html#a3488eb532681756764342f2b647dfd35">StringToPath</a>(source);
<a name="l00373"></a>00373       TGListTreeItem* item = <a class="code" href="Roody_8cxx.html#aa45a52d0850f8e533dde19ee80e62194">FindItem</a>(path);
<a name="l00374"></a>00374       
<a name="l00375"></a>00375       <span class="keywordflow">if</span> (!item)
<a name="l00376"></a>00376         {
<a name="l00377"></a>00377           std::string s;
<a name="l00378"></a>00378           s += <span class="stringliteral">&quot;Cannot find object \&quot;&quot;</span>;
<a name="l00379"></a>00379           s += name;
<a name="l00380"></a>00380           s += <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00381"></a>00381           <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l00382"></a>00382           <span class="keywordflow">continue</span>;
<a name="l00383"></a>00383         }
<a name="l00384"></a>00384       
<a name="l00385"></a>00385       <a class="code" href="classRoody.html#aebafdb5e945ef9bad3e00bb8ddb95d94">DrawItemOnPad</a>(item, pad, <span class="keyword">true</span>);
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="classRoody.html#a6a1265f21760af02be06eaa222c74d0a">00389</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a6a1265f21760af02be06eaa222c74d0a">Roody::RestoreFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* xmlFilename)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391   <span class="keywordtype">int</span> inode;
<a name="l00392"></a>00392   <a class="code" href="classRoodyXML.html">RoodyXML</a> xml;
<a name="l00393"></a>00393 
<a name="l00394"></a>00394   <span class="keywordflow">if</span> (!xmlFilename)
<a name="l00395"></a>00395     {
<a name="l00396"></a>00396       xmlFilename = <span class="stringliteral">&quot;default.xml&quot;</span>;
<a name="l00397"></a>00397       <span class="keywordflow">if</span> (!xml.<a class="code" href="classRoodyXML.html#ae2dc6ad08072443030eb6fca0f7c75b1">OpenFileForRead</a>(xmlFilename))
<a name="l00398"></a>00398         <span class="keywordflow">return</span>;
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400   <span class="keywordflow">else</span>
<a name="l00401"></a>00401     {
<a name="l00402"></a>00402       <span class="keywordflow">if</span> (!xml.<a class="code" href="classRoodyXML.html#ae2dc6ad08072443030eb6fca0f7c75b1">OpenFileForRead</a>(xmlFilename))
<a name="l00403"></a>00403         {
<a name="l00404"></a>00404           std::string s = <span class="stringliteral">&quot;Failed to open XML file: &quot;</span>;
<a name="l00405"></a>00405           s += xmlFilename;
<a name="l00406"></a>00406           <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(s.c_str());
<a name="l00407"></a>00407           <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l00408"></a>00408           <span class="keywordflow">return</span>;
<a name="l00409"></a>00409         }
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411 
<a name="l00412"></a>00412   <span class="comment">//xml.PrintTree( 0 );</span>
<a name="l00413"></a>00413 
<a name="l00414"></a>00414   <span class="keywordflow">for</span> (inode = 0; ; inode++)
<a name="l00415"></a>00415     {
<a name="l00416"></a>00416       inode = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, inode, <span class="stringliteral">&quot;online&quot;</span>);
<a name="l00417"></a>00417       <span class="keywordflow">if</span> (inode &lt; 0)
<a name="l00418"></a>00418         <span class="keywordflow">break</span>;
<a name="l00419"></a>00419   
<a name="l00420"></a>00420       std::string serverName = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, inode);
<a name="l00421"></a>00421 
<a name="l00422"></a>00422       <a class="code" href="classRoody.html#a535ef1e18afb6684d16ff1e216b2e981">ConnectServer</a>(serverName.c_str());
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424   
<a name="l00425"></a>00425   <span class="keywordflow">for</span> (inode = 0; ; inode++)
<a name="l00426"></a>00426     {
<a name="l00427"></a>00427       inode = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, inode, <span class="stringliteral">&quot;file&quot;</span>);
<a name="l00428"></a>00428       <span class="keywordflow">if</span> (inode &lt; 0)
<a name="l00429"></a>00429         <span class="keywordflow">break</span>;
<a name="l00430"></a>00430   
<a name="l00431"></a>00431       std::string fileName = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, inode);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433       TGListTreeItem *fileItem = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>,fileName.c_str()); 
<a name="l00434"></a>00434       <span class="keywordflow">if</span> (!fileItem)
<a name="l00435"></a>00435         {
<a name="l00436"></a>00436           <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#a779ae49b4fdeeb1a0ce60720fc641032">OpenFile</a>(fileName.c_str()))
<a name="l00437"></a>00437             { 
<a name="l00438"></a>00438               std::string s(<span class="stringliteral">&quot;Could not open data file \&quot;&quot;</span>);
<a name="l00439"></a>00439               s += fileName + <span class="stringliteral">&quot;\&quot;\nerror occurred while parsing xml file \&quot;&quot;</span> + xmlFilename; 
<a name="l00440"></a>00440               <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l00441"></a>00441               <span class="comment">//return;</span>
<a name="l00442"></a>00442             }
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445   
<a name="l00446"></a>00446   inode = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, 0, <span class="stringliteral">&quot;graphics&quot;</span>);
<a name="l00447"></a>00447   
<a name="l00448"></a>00448   <span class="keywordflow">if</span> (inode &gt;= 0)
<a name="l00449"></a>00449     {
<a name="l00450"></a>00450       <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xgraphics = xml.<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, inode);
<a name="l00451"></a>00451       
<a name="l00452"></a>00452       std::string zones = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xgraphics, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xgraphics, 0, <span class="stringliteral">&quot;zones&quot;</span>));
<a name="l00453"></a>00453       <span class="keywordtype">int</span> refresh = atoi(xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xgraphics, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xgraphics, 0, <span class="stringliteral">&quot;refresh&quot;</span>)).c_str());
<a name="l00454"></a>00454 
<a name="l00455"></a>00455       std::vector&lt;int&gt; izones = <a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">toInt</a>(<a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos;x&apos;</span>, zones));
<a name="l00456"></a>00456       
<a name="l00457"></a>00457       <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a> = izones[0];
<a name="l00458"></a>00458       <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>    = izones[1];
<a name="l00459"></a>00459       <a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">SetupZonesMenu</a>();
<a name="l00460"></a>00460 
<a name="l00461"></a>00461       <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(refresh);
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; ; i++)
<a name="l00465"></a>00465     {
<a name="l00466"></a>00466       i = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, i, <span class="stringliteral">&quot;canvas&quot;</span>);
<a name="l00467"></a>00467       <span class="keywordflow">if</span> (i&lt;0)
<a name="l00468"></a>00468         <span class="keywordflow">break</span>;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470       <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xcanvas = xml.<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, i);
<a name="l00471"></a>00471 
<a name="l00472"></a>00472       std::string name  = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xcanvas, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xcanvas, 0, <span class="stringliteral">&quot;name&quot;</span>));
<a name="l00473"></a>00473       std::string size  = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xcanvas, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xcanvas, 0, <span class="stringliteral">&quot;size&quot;</span>));
<a name="l00474"></a>00474       std::string zones = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xcanvas, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xcanvas, 0, <span class="stringliteral">&quot;zones&quot;</span>));
<a name="l00475"></a>00475       <span class="comment">//printf(&quot;canvas name: %s\n&quot;, name.c_str());</span>
<a name="l00476"></a>00476 
<a name="l00477"></a>00477       std::vector&lt;int&gt; izones = <a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">toInt</a>(<a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos;x&apos;</span>, zones));
<a name="l00478"></a>00478       std::vector&lt;int&gt; isize  = <a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">toInt</a>(<a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos; &apos;</span>, size));
<a name="l00479"></a>00479 
<a name="l00480"></a>00480       TCanvas* c = <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">MakeNewCanvas</a>(NULL, izones[0], izones[1], isize[0], isize[1], isize[2], isize[3]);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482       <a class="code" href="classRoody.html#ae503ce0b33c7a802c25ffc1cd6acc4c3">RestoreObjects</a>(&amp;xml, c, xcanvas);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; ; j++)
<a name="l00485"></a>00485         {
<a name="l00486"></a>00486           j = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xcanvas, j, <span class="stringliteral">&quot;pad&quot;</span>);
<a name="l00487"></a>00487           <span class="keywordflow">if</span> (j&lt;0)
<a name="l00488"></a>00488             <span class="keywordflow">break</span>;
<a name="l00489"></a>00489 
<a name="l00490"></a>00490           <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xpad = xml.<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(xcanvas, j);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492           <span class="keywordtype">int</span> number = atoi(xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xpad, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xpad, 0, <span class="stringliteral">&quot;number&quot;</span>)).c_str());
<a name="l00493"></a>00493           <a class="code" href="classRoody.html#ae503ce0b33c7a802c25ffc1cd6acc4c3">RestoreObjects</a>(&amp;xml, c-&gt;cd(number), xpad);
<a name="l00494"></a>00494         }
<a name="l00495"></a>00495     }
<a name="l00496"></a>00496 
<a name="l00497"></a>00497   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; ; i++)
<a name="l00498"></a>00498     {
<a name="l00499"></a>00499       i = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, i, <span class="stringliteral">&quot;group&quot;</span>);
<a name="l00500"></a>00500       <span class="keywordflow">if</span> (i&lt;0)
<a name="l00501"></a>00501         <span class="keywordflow">break</span>;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503       <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xgroup = xml.<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(xml.<a class="code" href="classRoodyXML.html#a797be69bcbaf3e591569afdb30aadf25">roodyNode_</a>, i);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505       std::string groupname  = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xgroup, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xgroup, 0, <span class="stringliteral">&quot;name&quot;</span>));
<a name="l00506"></a>00506       <span class="comment">//printf(&quot;group name: %s\n&quot;, groupname.c_str());</span>
<a name="l00507"></a>00507 
<a name="l00508"></a>00508       <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem(<a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a>);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510       TGListTreeItem *groupItem = <a class="code" href="classRoody.html#a8c63a0dfcd640bff1ce2a625f9a2fb0d">MakeNewGroup</a>(groupname.c_str());
<a name="l00511"></a>00511       assert(groupItem);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; ; j++)
<a name="l00514"></a>00514         {
<a name="l00515"></a>00515           j = xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xgroup, j, <span class="stringliteral">&quot;histogram&quot;</span>);
<a name="l00516"></a>00516           <span class="keywordflow">if</span> (j&lt;0)
<a name="l00517"></a>00517             <span class="keywordflow">break</span>;
<a name="l00518"></a>00518 
<a name="l00519"></a>00519           <a class="code" href="Roody_8h.html#ab6cc71ff10d6d49f8d93aee33c3c2810">PMXML_NODE</a> xobject = xml.<a class="code" href="classRoodyXML.html#abd52b4329c95d88afdfe945ae7477a4b">GetNode</a>(xgroup, j);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521           std::string name   = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;name&quot;</span>));
<a name="l00522"></a>00522           std::string source = xml.<a class="code" href="classRoodyXML.html#afa9560aa129f731d69bbb521eabbfcd3">GetNodeString</a>(xobject, xml.<a class="code" href="classRoodyXML.html#aa3cf4e18c5af01966be251c946f586ab">FindNode</a>(xobject, 0, <span class="stringliteral">&quot;source&quot;</span>));
<a name="l00523"></a>00523 
<a name="l00524"></a>00524           ObjectPath path = <a class="code" href="Roody_8cxx.html#a3488eb532681756764342f2b647dfd35">StringToPath</a>(source);
<a name="l00525"></a>00525           TGListTreeItem* item = <a class="code" href="Roody_8cxx.html#aa45a52d0850f8e533dde19ee80e62194">FindItem</a>(path);
<a name="l00526"></a>00526 
<a name="l00527"></a>00527           <a class="code" href="classRoody.html#aafdf330e50dd7a70980d320e18602103">AddHistogramToGroup</a>(groupItem, name.c_str(), item);
<a name="l00528"></a>00528         }
<a name="l00529"></a>00529     }
<a name="l00530"></a>00530 }
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">00532</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">Roody::SetupZonesMenu</a>()
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534   <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l00535"></a>00535   <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a> )
<a name="l00536"></a>00536   {
<a name="l00537"></a>00537     <span class="keywordflow">case</span> 1:
<a name="l00538"></a>00538     {
<a name="l00539"></a>00539       <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> )
<a name="l00540"></a>00540       {
<a name="l00541"></a>00541         <span class="keywordflow">case</span> 1:
<a name="l00542"></a>00542           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a> );
<a name="l00543"></a>00543           <span class="keywordflow">break</span>;
<a name="l00544"></a>00544         <span class="keywordflow">case</span> 2:
<a name="l00545"></a>00545           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6235c29b5cb7c22336dd92637a3c094c">M_ZONES_12</a> );
<a name="l00546"></a>00546           <span class="keywordflow">break</span>;
<a name="l00547"></a>00547         <span class="keywordflow">case</span> 3:
<a name="l00548"></a>00548           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad62884d1c6ec8a172baf944fa9e1bc56">M_ZONES_13</a> );
<a name="l00549"></a>00549           <span class="keywordflow">break</span>;
<a name="l00550"></a>00550         <span class="keywordflow">default</span>:
<a name="l00551"></a>00551           <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">SetZonesUser</a>();
<a name="l00552"></a>00552       }
<a name="l00553"></a>00553       <span class="keywordflow">break</span>;
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555     <span class="keywordflow">case</span> 2:
<a name="l00556"></a>00556     {
<a name="l00557"></a>00557       <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> )
<a name="l00558"></a>00558       {
<a name="l00559"></a>00559         <span class="keywordflow">case</span> 1:
<a name="l00560"></a>00560           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a99b919488f38494e4d467ef10279cb52">M_ZONES_21</a> );
<a name="l00561"></a>00561           <span class="keywordflow">break</span>;
<a name="l00562"></a>00562         <span class="keywordflow">case</span> 2:
<a name="l00563"></a>00563           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a46fbfd4a6562b6cfd66f40fdb1df283a">M_ZONES_22</a> );
<a name="l00564"></a>00564           <span class="keywordflow">break</span>;
<a name="l00565"></a>00565         <span class="keywordflow">default</span>:
<a name="l00566"></a>00566           <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">SetZonesUser</a>();
<a name="l00567"></a>00567       }
<a name="l00568"></a>00568       <span class="keywordflow">break</span>;
<a name="l00569"></a>00569     }
<a name="l00570"></a>00570     <span class="keywordflow">case</span> 3:
<a name="l00571"></a>00571     {
<a name="l00572"></a>00572       <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> )
<a name="l00573"></a>00573       {
<a name="l00574"></a>00574         <span class="keywordflow">case</span> 3:
<a name="l00575"></a>00575           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a422c2afa5ff6921fec895849db0b2850">M_ZONES_33</a> );
<a name="l00576"></a>00576           <span class="keywordflow">break</span>;
<a name="l00577"></a>00577         <span class="keywordflow">default</span>:
<a name="l00578"></a>00578           <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">SetZonesUser</a>();
<a name="l00579"></a>00579       }
<a name="l00580"></a>00580       <span class="keywordflow">break</span>;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582     <span class="keywordflow">case</span> 4:
<a name="l00583"></a>00583     {
<a name="l00584"></a>00584       <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> )
<a name="l00585"></a>00585       {
<a name="l00586"></a>00586         <span class="keywordflow">case</span> 3:
<a name="l00587"></a>00587           <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a76338c9f6b0065665769cc30674f68f4">M_ZONES_44</a> );
<a name="l00588"></a>00588           <span class="keywordflow">break</span>;
<a name="l00589"></a>00589         <span class="keywordflow">default</span>:
<a name="l00590"></a>00590           <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">SetZonesUser</a>();
<a name="l00591"></a>00591       }
<a name="l00592"></a>00592       <span class="keywordflow">break</span>;
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594     <span class="keywordflow">default</span>:
<a name="l00595"></a>00595       <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">SetZonesUser</a>();
<a name="l00596"></a>00596   }
<a name="l00597"></a>00597 }
<a name="l00598"></a>00598 
<a name="l00599"></a><a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">00599</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a50d150457e9811d87a7493b8557dc06a">Roody::SetZonesUser</a>()
<a name="l00600"></a>00600 {
<a name="l00601"></a>00601   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;DeleteEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a> );
<a name="l00602"></a>00602   std::stringstream ss;
<a name="l00603"></a>00603   ss &lt;&lt; <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a> &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>;
<a name="l00604"></a>00604   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( ss.str().c_str(), <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a>,
<a name="l00605"></a>00605                         0, 0, <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;GetEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad9914a541f08fb5cf8d99a10e3f4d84c">M_ZONES_DIALOG</a>) );
<a name="l00606"></a>00606   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a> );
<a name="l00607"></a>00607 }
<a name="l00608"></a>00608 
<a name="l00609"></a><a class="code" href="classRoody.html#afdada92b8e8c1e5cedc13fe25c34d258">00609</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#afdada92b8e8c1e5cedc13fe25c34d258">Roody::SaveFilePadContents</a>(<a class="code" href="classRoodyXML.html">RoodyXML</a>&amp; xml, std::ofstream&amp; output, std::string space, <span class="keyword">const</span> <a class="code" href="structPadObjectVec.html">PadObjectVec</a>&amp; contents)
<a name="l00610"></a>00610 {
<a name="l00611"></a>00611   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;contents.size(); i++)
<a name="l00612"></a>00612     {
<a name="l00613"></a>00613       output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;&lt;object&gt;\n&quot;</span>;
<a name="l00614"></a>00614       ObjectPath src = contents[i].fSource;
<a name="l00615"></a>00615       TObject *obj = <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(src);
<a name="l00616"></a>00616       <span class="comment">//printf(&quot;lookup object %p\n&quot;, obj);</span>
<a name="l00617"></a>00617       assert(obj);
<a name="l00618"></a>00618       output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;  &lt;class&gt;&quot;</span> &lt;&lt; obj-&gt;ClassName() &lt;&lt; <span class="stringliteral">&quot;&lt;/class&gt;\n&quot;</span>;
<a name="l00619"></a>00619       output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;  &lt;name&gt;&quot;</span>  &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(obj-&gt;GetName()) &lt;&lt; <span class="stringliteral">&quot;&lt;/name&gt;\n&quot;</span>;
<a name="l00620"></a>00620       <span class="keywordflow">if</span> (src.front() != <span class="stringliteral">&quot;&quot;</span>)
<a name="l00621"></a>00621         {
<a name="l00622"></a>00622           output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;  &lt;source&gt;&quot;</span>;
<a name="l00623"></a>00623           output &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(<a class="code" href="Roody_8cxx.html#afcdd7d98940322cf5d3bee7f259e4628">PathToString</a>(src));
<a name="l00624"></a>00624           output &lt;&lt; <span class="stringliteral">&quot;&lt;/source&gt;\n&quot;</span>; 
<a name="l00625"></a>00625           output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;  &lt;drawOption&gt;&quot;</span>;
<a name="l00626"></a>00626           output &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(contents[i].fDrawOption);
<a name="l00627"></a>00627           output &lt;&lt; <span class="stringliteral">&quot;&lt;/drawOption&gt;\n&quot;</span>; 
<a name="l00628"></a>00628         }
<a name="l00629"></a>00629       output &lt;&lt; space &lt;&lt; <span class="stringliteral">&quot;&lt;/object&gt;\n&quot;</span>;
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a><a class="code" href="classRoody.html#aead15bc9d8344b174cfdb718c32b26b9">00633</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aead15bc9d8344b174cfdb718c32b26b9">Roody::SaveFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* xmlFilename)
<a name="l00634"></a>00634 {
<a name="l00635"></a>00635   <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText((std::string(<span class="stringliteral">&quot;Saving session into: &quot;</span>) + xmlFilename).c_str());
<a name="l00636"></a>00636 
<a name="l00637"></a>00637   <a class="code" href="classRoodyXML.html">RoodyXML</a> xml;
<a name="l00638"></a>00638   std::ofstream &amp;output( xml.<a class="code" href="classRoodyXML.html#a27c6ad820f177432af7361a7815ca34e">OpenFileForWrite</a>(xmlFilename) );
<a name="l00639"></a>00639   <span class="keywordflow">if</span>( output.rdstate() != std::ios::goodbit  )
<a name="l00640"></a>00640   {
<a name="l00641"></a>00641     std::string s(<span class="stringliteral">&quot;Failed to open XML file \&quot;&quot;</span>);
<a name="l00642"></a>00642     s += xmlFilename;
<a name="l00643"></a>00643     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l00644"></a>00644     <span class="keywordflow">return</span>;
<a name="l00645"></a>00645   }
<a name="l00646"></a>00646   output &lt;&lt; <span class="stringliteral">&quot;&lt;roody&gt;\n&quot;</span>;
<a name="l00647"></a>00647   <span class="comment">//</span>
<a name="l00648"></a>00648   <span class="comment">// write online section</span>
<a name="l00649"></a>00649   <span class="comment">//</span>
<a name="l00650"></a>00650   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>.size(); i++)
<a name="l00651"></a>00651     {
<a name="l00652"></a>00652       output &lt;&lt; <span class="stringliteral">&quot;  &lt;online&gt;&quot;</span>;
<a name="l00653"></a>00653       output &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(<a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>[i].c_str());
<a name="l00654"></a>00654       output &lt;&lt; <span class="stringliteral">&quot;&lt;/online&gt;\n&quot;</span>;
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656   <span class="comment">// </span>
<a name="l00657"></a>00657   <span class="comment">// write file section</span>
<a name="l00658"></a>00658   <span class="comment">// </span>
<a name="l00659"></a>00659   TGListTreeItem *temp = <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>-&gt;GetFirstChild();
<a name="l00660"></a>00660   <span class="keywordflow">if</span>( temp ) 
<a name="l00661"></a>00661   { 
<a name="l00662"></a>00662     output &lt;&lt; <span class="stringliteral">&quot;  &lt;file&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(temp-&gt;GetText()) &lt;&lt; <span class="stringliteral">&quot;&lt;/file&gt;\n&quot;</span>;
<a name="l00663"></a>00663     TGListTreeItem *temp2;
<a name="l00664"></a>00664     <span class="keywordflow">while</span>( (temp2=temp-&gt;GetNextSibling()) )
<a name="l00665"></a>00665     { 
<a name="l00666"></a>00666       output &lt;&lt; <span class="stringliteral">&quot;  &lt;file&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(temp2-&gt;GetText()) &lt;&lt; <span class="stringliteral">&quot;&lt;/file&gt;\n&quot;</span>;
<a name="l00667"></a>00667       temp = temp2;
<a name="l00668"></a>00668     } 
<a name="l00669"></a>00669   } 
<a name="l00670"></a>00670   <span class="comment">//</span>
<a name="l00671"></a>00671   <span class="comment">// write graphics section</span>
<a name="l00672"></a>00672   <span class="comment">//</span>
<a name="l00673"></a>00673   output &lt;&lt; <span class="stringliteral">&quot;  &lt;graphics&gt;\n&quot;</span>;
<a name="l00674"></a>00674   std::string zones = <a class="code" href="classRoody.html#a849b5dc2b285b413b22d078fd885e98c">GetZoneSetting</a>(<a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a>, <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>);
<a name="l00675"></a>00675   output &lt;&lt; <span class="stringliteral">&quot;    &lt;zones&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(zones) &lt;&lt; <span class="stringliteral">&quot;&lt;/zones&gt;\n&quot;</span>;
<a name="l00676"></a>00676   output &lt;&lt; <span class="stringliteral">&quot;    &lt;refresh&gt;&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/refresh&gt;\n&quot;</span>;
<a name="l00677"></a>00677   output &lt;&lt; <span class="stringliteral">&quot;  &lt;/graphics&gt;\n&quot;</span>;
<a name="l00678"></a>00678   <span class="comment">//</span>
<a name="l00679"></a>00679   <span class="comment">// write canvas section</span>
<a name="l00680"></a>00680   <span class="comment">//</span>
<a name="l00681"></a>00681   TIter next = gROOT-&gt;GetListOfCanvases();
<a name="l00682"></a>00682   <span class="keywordflow">while</span> (1)
<a name="l00683"></a>00683   {
<a name="l00684"></a>00684     TCanvas *canvas = (TCanvas*)next();
<a name="l00685"></a>00685     <span class="keywordflow">if</span> (!canvas)
<a name="l00686"></a>00686       <span class="keywordflow">break</span>;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     output &lt;&lt; <span class="stringliteral">&quot;  &lt;canvas&gt;\n&quot;</span>;
<a name="l00689"></a>00689     output &lt;&lt; <span class="stringliteral">&quot;    &lt;name&gt;&quot;</span> &lt;&lt; canvas-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot;&lt;/name&gt;\n&quot;</span>;
<a name="l00690"></a>00690     output &lt;&lt; <span class="stringliteral">&quot;    &lt;size&gt;&quot;</span> &lt;&lt; canvas-&gt;GetWindowTopX() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; canvas-&gt;GetWindowTopY() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; canvas-&gt;GetWindowWidth() &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; canvas-&gt;GetWindowHeight() &lt;&lt; <span class="stringliteral">&quot;&lt;/size&gt;\n&quot;</span>;
<a name="l00691"></a>00691     output &lt;&lt; <span class="stringliteral">&quot;    &lt;zones&gt;&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas] &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#a5a2e7e58f4e6c7365092297a15904c84">fCanvasRows</a>[canvas] &lt;&lt; <span class="stringliteral">&quot;&lt;/zones&gt;\n&quot;</span>;
<a name="l00692"></a>00692 
<a name="l00693"></a>00693     <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[canvas].size() &gt; 0)
<a name="l00694"></a>00694       {
<a name="l00695"></a>00695         <a class="code" href="classRoody.html#afdada92b8e8c1e5cedc13fe25c34d258">SaveFilePadContents</a>(xml, output, <span class="stringliteral">&quot;    &quot;</span>, <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[canvas]);
<a name="l00696"></a>00696       }
<a name="l00697"></a>00697     <span class="keywordflow">else</span>
<a name="l00698"></a>00698       {
<a name="l00699"></a>00699         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;1000; i++)
<a name="l00700"></a>00700           {
<a name="l00701"></a>00701             TVirtualPad *pad = canvas-&gt;cd(i);
<a name="l00702"></a>00702             <span class="comment">//printf(&quot;canvas %p subpad %d is %p\n&quot;, canvas, i, pad);</span>
<a name="l00703"></a>00703             <span class="keywordflow">if</span> (!pad || pad-&gt;GetNumber()!=i)
<a name="l00704"></a>00704               <span class="keywordflow">break</span>;
<a name="l00705"></a>00705             
<a name="l00706"></a>00706             output &lt;&lt; <span class="stringliteral">&quot;    &lt;pad&gt;\n&quot;</span>;
<a name="l00707"></a>00707             output &lt;&lt; <span class="stringliteral">&quot;      &lt;number&gt;&quot;</span> &lt;&lt; pad-&gt;GetNumber() &lt;&lt; <span class="stringliteral">&quot;&lt;/number&gt;\n&quot;</span>;
<a name="l00708"></a>00708             <a class="code" href="classRoody.html#afdada92b8e8c1e5cedc13fe25c34d258">SaveFilePadContents</a>(xml, output, <span class="stringliteral">&quot;      &quot;</span>, <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[pad]);
<a name="l00709"></a>00709             output &lt;&lt; <span class="stringliteral">&quot;    &lt;/pad&gt;\n&quot;</span>;
<a name="l00710"></a>00710           }
<a name="l00711"></a>00711       }
<a name="l00712"></a>00712 
<a name="l00713"></a>00713     output &lt;&lt; <span class="stringliteral">&quot;  &lt;/canvas&gt;\n&quot;</span>;
<a name="l00714"></a>00714   }
<a name="l00715"></a>00715   <span class="comment">//</span>
<a name="l00716"></a>00716   <span class="comment">// write group section</span>
<a name="l00717"></a>00717   <span class="comment">//</span>
<a name="l00718"></a>00718   std::size_t nGroups = <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.size();
<a name="l00719"></a>00719   <span class="keywordflow">for</span>( std::size_t i=0; i&lt;nGroups; ++i )
<a name="l00720"></a>00720   {
<a name="l00721"></a>00721     output &lt;&lt; <span class="stringliteral">&quot;  &lt;group&gt;\n&quot;</span>;
<a name="l00722"></a>00722     TGListTreeItem *groupFolder = <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>[i];
<a name="l00723"></a>00723     output &lt;&lt; <span class="stringliteral">&quot;    &lt;name&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(groupFolder-&gt;GetText()) &lt;&lt; <span class="stringliteral">&quot;&lt;/name&gt;\n&quot;</span>;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725     <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l00726"></a>00726     <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(&amp;items, groupFolder);
<a name="l00727"></a>00727 
<a name="l00728"></a>00728     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0; j&lt;items.size(); j++)
<a name="l00729"></a>00729       {
<a name="l00730"></a>00730         TGListTreeItem* item = items[j];
<a name="l00731"></a>00731         output &lt;&lt; <span class="stringliteral">&quot;    &lt;histogram&gt;\n&quot;</span>;
<a name="l00732"></a>00732         output &lt;&lt; <span class="stringliteral">&quot;      &lt;name&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(item-&gt;GetText()) &lt;&lt; <span class="stringliteral">&quot;&lt;/name&gt;\n&quot;</span>;
<a name="l00733"></a>00733         output &lt;&lt; <span class="stringliteral">&quot;      &lt;source&gt;&quot;</span> &lt;&lt; xml.<a class="code" href="classRoodyXML.html#a66543ef610fb926e36272cf8763bf0d5">Encode</a>(<a class="code" href="Roody_8cxx.html#afcdd7d98940322cf5d3bee7f259e4628">PathToString</a>(<a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[item])) &lt;&lt; <span class="stringliteral">&quot;&lt;/source&gt;\n&quot;</span>;
<a name="l00734"></a>00734         output &lt;&lt; <span class="stringliteral">&quot;    &lt;/histogram&gt;\n&quot;</span>;
<a name="l00735"></a>00735       }
<a name="l00736"></a>00736     output &lt;&lt; <span class="stringliteral">&quot;  &lt;/group&gt;\n&quot;</span>;
<a name="l00737"></a>00737   }
<a name="l00738"></a>00738   output &lt;&lt; <span class="stringliteral">&quot;&lt;/roody&gt;\n&quot;</span>;
<a name="l00739"></a>00739 }
<a name="l00740"></a>00740 
<a name="l00741"></a><a class="code" href="classRoody.html#a06c21e28587ea291680fe78894794265">00741</a> <a class="code" href="classRoody.html#a06c21e28587ea291680fe78894794265">Roody::~Roody</a>()
<a name="l00742"></a>00742 {
<a name="l00743"></a>00743   <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;Stop();
<a name="l00744"></a>00744   TQObject::Disconnect(<a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>);
<a name="l00745"></a>00745   TQObject::Disconnect(<span class="keyword">this</span>);
<a name="l00746"></a>00746   <span class="comment">//Timers</span>
<a name="l00747"></a>00747   <span class="comment">//delete fUpdateTimer;</span>
<a name="l00748"></a>00748   <span class="comment">//</span>
<a name="l00749"></a>00749   <span class="comment">//Cleanup();</span>
<a name="l00750"></a>00750   <span class="comment">//</span>
<a name="l00751"></a>00751 }
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="classRoody.html#acf0200144698e6d240142c0048cf2fae">00753</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#acf0200144698e6d240142c0048cf2fae">Roody::LayoutGUI</a>()
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755   <a class="code" href="classRoody.html#a37f71f0fb2fee25f022a4a2e19008ff6">LayoutMenuBar</a>(); <span class="comment">// Lay out the MenuBar</span>
<a name="l00756"></a>00756   <span class="comment">//</span>
<a name="l00757"></a>00757   <span class="comment">// Lay out the rest of the GUI</span>
<a name="l00758"></a>00758   <span class="comment">//</span>
<a name="l00759"></a>00759   <span class="comment">//TGLayoutHints* frameLayout1 = new TGLayoutHints( kLHintsTop|kLHintsLeft, 5, 5, 5, 5 );</span>
<a name="l00760"></a>00760   TGLayoutHints* frameLayout2 = <span class="keyword">new</span> TGLayoutHints( kLHintsTop|kLHintsExpandX|kLHintsExpandY, 5, 5, 5, 5 );
<a name="l00761"></a>00761   TGLayoutHints* frameLayout3 = <span class="keyword">new</span> TGLayoutHints( kLHintsTop|kLHintsExpandX, 0, 0, 0, 0 );
<a name="l00762"></a>00762   <span class="comment">//</span>
<a name="l00763"></a>00763   TGVerticalFrame* verticalFrame = <span class="keyword">new</span> TGVerticalFrame( <span class="keyword">this</span>, 10, 10 );
<a name="l00764"></a>00764   <span class="comment">//</span>
<a name="l00765"></a>00765   TGHorizontalFrame* horizontalFrame = <span class="keyword">new</span> TGHorizontalFrame( verticalFrame, 10, 10 );
<a name="l00766"></a>00766   <span class="comment">//</span>
<a name="l00767"></a>00767   <a class="code" href="classRoody.html#add443a1d9618e0e979bb549ecba9ad22">fReopenButton</a> = <span class="keyword">new</span> TGTextButton( horizontalFrame, <span class="stringliteral">&quot;Reopen&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9f2593f86b9fdc684dd06c62c3360ce1">M_REOPEN_BUTTON</a> );
<a name="l00768"></a>00768   <a class="code" href="classRoody.html#add443a1d9618e0e979bb549ecba9ad22">fReopenButton</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l00769"></a>00769   <a class="code" href="classRoody.html#add443a1d9618e0e979bb549ecba9ad22">fReopenButton</a>-&gt;SetToolTipText( <span class="stringliteral">&quot;click to reopen data sources&quot;</span>, 250 );
<a name="l00770"></a>00770   horizontalFrame-&gt;AddFrame( <a class="code" href="classRoody.html#add443a1d9618e0e979bb549ecba9ad22">fReopenButton</a>, <span class="keyword">new</span> TGLayoutHints(kLHintsCenterX,2,2,2,2) );
<a name="l00771"></a>00771   <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a> = <span class="keyword">new</span> TGTextButton( horizontalFrame, <span class="stringliteral">&quot;Refresh NOW&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a8c506e7753f96ae48681b43480ba6118">M_REFRESH_BUTTON</a> );
<a name="l00772"></a>00772   <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l00773"></a>00773   <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetToolTipText( <span class="stringliteral">&quot;click to refresh online histograms once right now&quot;</span>, 250 );
<a name="l00774"></a>00774   horizontalFrame-&gt;AddFrame( <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>, <span class="keyword">new</span> TGLayoutHints(kLHintsCenterX,2,2,2,2) );
<a name="l00775"></a>00775   verticalFrame-&gt;AddFrame( horizontalFrame, frameLayout3 );
<a name="l00776"></a>00776   <span class="comment">//</span>
<a name="l00777"></a>00777   TGCanvas *canvas = <span class="keyword">new</span> TGCanvas( verticalFrame, 340, 300 );
<a name="l00778"></a>00778   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a> = <span class="keyword">new</span> <a class="code" href="classMTGListTree.html">MTGListTree</a>(canvas, kHorizontalFrame );
<a name="l00779"></a>00779   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( 0, <span class="stringliteral">&quot;/&quot;</span> );
<a name="l00780"></a>00780   TGListTreeItem* top = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetFirstItem();
<a name="l00781"></a>00781   <a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a> = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem(top, <span class="stringliteral">&quot;Groups&quot;</span> );
<a name="l00782"></a>00782   <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>  = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem(top, <span class="stringliteral">&quot;Offline&quot;</span> );
<a name="l00783"></a>00783   <a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a> = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem(top, <span class="stringliteral">&quot;Online&quot;</span> );
<a name="l00784"></a>00784   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem(top);
<a name="l00785"></a>00785   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l00786"></a>00786   verticalFrame-&gt;AddFrame(canvas, frameLayout2 );
<a name="l00787"></a>00787   <span class="comment">//</span>
<a name="l00788"></a>00788   AddFrame( verticalFrame, frameLayout2 );
<a name="l00789"></a>00789   <span class="comment">//</span>
<a name="l00790"></a>00790   TGLayoutHints* statusBarLayout = <span class="keyword">new</span> TGLayoutHints( kLHintsBottom|kLHintsLeft|kLHintsExpandX,0, 0, 2, 0 );
<a name="l00791"></a>00791   <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a> = <span class="keyword">new</span> TGStatusBar( <span class="keyword">this</span>, 50, 10, kHorizontalFrame );
<a name="l00792"></a>00792   AddFrame( <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>, statusBarLayout );
<a name="l00793"></a>00793 }
<a name="l00794"></a>00794 
<a name="l00795"></a><a class="code" href="classOptStatMenu.html">00795</a> <span class="keyword">class </span><a class="code" href="classOptStatMenu.html">OptStatMenu</a>: <span class="keyword">public</span> TGPopupMenu
<a name="l00796"></a>00796 {
<a name="l00797"></a>00797 <span class="keyword">public</span>:
<a name="l00798"></a><a class="code" href="classOptStatMenu.html#ada753399463dafcb4524be09fb54081f">00798</a>   <a class="code" href="classOptStatMenu.html#ada753399463dafcb4524be09fb54081f">OptStatMenu</a>(<span class="keyword">const</span> TGWindow* w)
<a name="l00799"></a>00799     : TGPopupMenu(w)
<a name="l00800"></a>00800   {
<a name="l00801"></a>00801     AddEntry(<span class="stringliteral">&quot;Name&quot;</span>,       <span class="charliteral">&apos;n&apos;</span>);
<a name="l00802"></a>00802     AddEntry(<span class="stringliteral">&quot;Entries&quot;</span>,    <span class="charliteral">&apos;e&apos;</span>);
<a name="l00803"></a>00803     AddEntry(<span class="stringliteral">&quot;Mean&quot;</span>, <span class="charliteral">&apos;m&apos;</span>);
<a name="l00804"></a>00804     AddEntry(<span class="stringliteral">&quot;Mean with error&quot;</span>, <span class="charliteral">&apos;M&apos;</span>);
<a name="l00805"></a>00805     AddEntry(<span class="stringliteral">&quot;RMS&quot;</span>,  <span class="charliteral">&apos;r&apos;</span>);
<a name="l00806"></a>00806     AddEntry(<span class="stringliteral">&quot;RMS with error&quot;</span>,  <span class="charliteral">&apos;R&apos;</span>);
<a name="l00807"></a>00807     AddEntry(<span class="stringliteral">&quot;Underflows&quot;</span>, <span class="charliteral">&apos;u&apos;</span>);
<a name="l00808"></a>00808     AddEntry(<span class="stringliteral">&quot;Overflows&quot;</span>,  <span class="charliteral">&apos;o&apos;</span>);
<a name="l00809"></a>00809     AddEntry(<span class="stringliteral">&quot;Integral&quot;</span>,   <span class="charliteral">&apos;i&apos;</span>);
<a name="l00810"></a>00810     AddEntry(<span class="stringliteral">&quot;Skew&quot;</span>,       <span class="charliteral">&apos;s&apos;</span>);
<a name="l00811"></a>00811     AddEntry(<span class="stringliteral">&quot;Skew with error&quot;</span>, <span class="charliteral">&apos;S&apos;</span>);
<a name="l00812"></a>00812     AddEntry(<span class="stringliteral">&quot;Kurtosis&quot;</span>,   <span class="charliteral">&apos;k&apos;</span>);
<a name="l00813"></a>00813     AddEntry(<span class="stringliteral">&quot;Kurtosis with error&quot;</span>, <span class="charliteral">&apos;K&apos;</span>);
<a name="l00814"></a>00814     <span class="comment">//AddEntry( &quot;user&quot;, M_ZONES_USER );</span>
<a name="l00815"></a>00815     <span class="comment">//AddEntry( &quot;&amp;Set zones...&quot;, M_ZONES_DIALOG );</span>
<a name="l00816"></a>00816     <span class="comment">//CheckEntry(M_ZONES_11); // place check mark on the default</span>
<a name="l00817"></a>00817     Associate(<span class="keyword">this</span>);
<a name="l00818"></a>00818     <a class="code" href="classOptStatMenu.html#afed75c8a0cf3fd15ee05089ec5d8e6ab">GetOptStat</a>();
<a name="l00819"></a>00819     <a class="code" href="classOptStatMenu.html#a7b24a69f8a79db451837e9a9e980be9d">SetOptStat</a>();
<a name="l00820"></a>00820   }
<a name="l00821"></a>00821 
<a name="l00822"></a><a class="code" href="classOptStatMenu.html#a1410a4fc1c23c448651a2460b6e9a8c0">00822</a>   Bool_t <a class="code" href="classOptStatMenu.html#a1410a4fc1c23c448651a2460b6e9a8c0">ProcessMessage</a>( Long_t msg, Long_t parm1, Long_t parm2 )
<a name="l00823"></a>00823   {
<a name="l00824"></a>00824     <span class="comment">//printf(&quot;OptStatMenu::ProcessMessage %d (%d, %d), parm1: %d, parm2: %d\n&quot;, msg, GET_MSG(msg), GET_SUBMSG(msg), parm1, parm2);</span>
<a name="l00825"></a>00825 
<a name="l00826"></a>00826     <span class="keywordflow">if</span> (GET_MSG(msg) == kC_COMMAND &amp;&amp; GET_SUBMSG(msg) == kCM_MENU)
<a name="l00827"></a>00827       {
<a name="l00828"></a>00828         <span class="comment">//printf(&quot;OptStatMenu::ProcessMessage menu message %d (%d, %d), parm1: %d \&apos;%c\&apos;, parm2: %d\n&quot;, msg, GET_MSG(msg), GET_SUBMSG(msg), parm1, parm1, parm2);</span>
<a name="l00829"></a>00829 
<a name="l00830"></a>00830         <span class="keywordflow">if</span> (IsEntryChecked(parm1))
<a name="l00831"></a>00831           UnCheckEntry(parm1);
<a name="l00832"></a>00832         <span class="keywordflow">else</span>
<a name="l00833"></a>00833           CheckEntry(parm1);
<a name="l00834"></a>00834 
<a name="l00835"></a>00835         <span class="comment">//Modified();</span>
<a name="l00836"></a>00836 
<a name="l00837"></a>00837         <a class="code" href="classOptStatMenu.html#a7b24a69f8a79db451837e9a9e980be9d">SetOptStat</a>();
<a name="l00838"></a>00838       }
<a name="l00839"></a>00839     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00840"></a>00840   }
<a name="l00841"></a>00841 
<a name="l00842"></a><a class="code" href="classOptStatMenu.html#afed75c8a0cf3fd15ee05089ec5d8e6ab">00842</a>   <span class="keywordtype">void</span> <a class="code" href="classOptStatMenu.html#afed75c8a0cf3fd15ee05089ec5d8e6ab">GetOptStat</a>()
<a name="l00843"></a>00843   {
<a name="l00844"></a>00844     Int_t s = gStyle-&gt;GetOptStat();
<a name="l00845"></a>00845     <span class="keywordtype">int</span> ss;
<a name="l00846"></a>00846 
<a name="l00847"></a>00847     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;n&apos;</span>);
<a name="l00848"></a>00848     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;e&apos;</span>);
<a name="l00849"></a>00849     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;m&apos;</span>); <span class="keywordflow">if</span> (ss&gt;1) CheckEntry(<span class="charliteral">&apos;M&apos;</span>);
<a name="l00850"></a>00850     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;r&apos;</span>); <span class="keywordflow">if</span> (ss&gt;1) CheckEntry(<span class="charliteral">&apos;R&apos;</span>);
<a name="l00851"></a>00851     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;u&apos;</span>);
<a name="l00852"></a>00852     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;o&apos;</span>);
<a name="l00853"></a>00853     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;i&apos;</span>);
<a name="l00854"></a>00854     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;s&apos;</span>); <span class="keywordflow">if</span> (ss&gt;1) CheckEntry(<span class="charliteral">&apos;S&apos;</span>);
<a name="l00855"></a>00855     ss = s%10; s/=10; <span class="keywordflow">if</span> (ss) CheckEntry(<span class="charliteral">&apos;k&apos;</span>); <span class="keywordflow">if</span> (ss&gt;1) CheckEntry(<span class="charliteral">&apos;K&apos;</span>);
<a name="l00856"></a>00856   }
<a name="l00857"></a>00857 
<a name="l00858"></a><a class="code" href="classOptStatMenu.html#a7b24a69f8a79db451837e9a9e980be9d">00858</a>   <span class="keywordtype">void</span> <a class="code" href="classOptStatMenu.html#a7b24a69f8a79db451837e9a9e980be9d">SetOptStat</a>()
<a name="l00859"></a>00859   {
<a name="l00860"></a>00860     <span class="keyword">const</span> TList* list = GetListOfEntries();
<a name="l00861"></a>00861     TIter next(list);
<a name="l00862"></a>00862     std::string s = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00863"></a>00863     <span class="keywordflow">while</span> (TGMenuEntry *entry = (TGMenuEntry*)next())                                
<a name="l00864"></a>00864       <span class="keywordflow">if</span> (IsEntryChecked(entry-&gt;GetEntryId()))
<a name="l00865"></a>00865         s += (char)entry-&gt;GetEntryId();
<a name="l00866"></a>00866     gStyle-&gt;SetOptStat(s.c_str());
<a name="l00867"></a>00867     printf(<span class="stringliteral">&quot;SetOptStat(\&quot;%s\&quot;) got %d\n&quot;</span>, s.c_str(), gStyle-&gt;GetOptStat());
<a name="l00868"></a>00868   }
<a name="l00869"></a>00869 };
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="classRoody.html#a37f71f0fb2fee25f022a4a2e19008ff6">00871</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a37f71f0fb2fee25f022a4a2e19008ff6">Roody::LayoutMenuBar</a>()
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873   TGPopupMenu* menuFile = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00874"></a>00874   <span class="comment">//</span>
<a name="l00875"></a>00875   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;&amp;New canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adc428c721e0af6cdd295ec6596bfde69">M_NEW_CANVAS</a>);
<a name="l00876"></a>00876   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Redraw current canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a41a44cfa75a105ca401cd4f8963ed8dd">M_REDRAW_CANVAS</a>);
<a name="l00877"></a>00877   menuFile-&gt;AddSeparator();
<a name="l00878"></a>00878   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Open data file...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab0713ff83d161ee1a6a47539afa7b248">M_FILE_OPEN</a> );
<a name="l00879"></a>00879   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Open MIDAS connection...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a44568ed6f2f6b8eeb4ab433d2de9bbd3">M_FILE_ONLINE</a> );
<a name="l00880"></a>00880   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Open ROOT connection...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcbd0542b2259ed2e1c777b95a8b877c">M_FILE_NetDirectory</a> );
<a name="l00881"></a>00881   menuFile-&gt;AddSeparator();
<a name="l00882"></a>00882   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Save session&quot;</span>,    <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9820fe7fe9fec2659ce984a61f2dcd5f">M_FILE_SAVE_DEFAULT</a> );
<a name="l00883"></a>00883   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Save session as...&quot;</span>,    <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab16be6b1d288cfc5d84cfe991bd92b9d">M_FILE_SAVE</a> );
<a name="l00884"></a>00884   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;Restore session...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab9736df35f4505167126da084ab53b5e">M_FILE_RESTORE</a> );
<a name="l00885"></a>00885   menuFile-&gt;AddSeparator();
<a name="l00886"></a>00886   menuFile-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Exit&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a885aff92e93c9a8525995a7e5ac56364">M_FILE_EXIT</a> );
<a name="l00887"></a>00887   <span class="comment">//</span>
<a name="l00888"></a>00888   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a> = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00889"></a>00889   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Off&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab7cebdd58038db8ed9232eed0885f35a">M_REFRESH_OFF</a> );
<a name="l00890"></a>00890   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Refresh now&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aeeabaac648a5dd3f4740e64fe7e910ca">M_REFRESH_NOW</a> );
<a name="l00891"></a>00891   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;1 second&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2a8e118c967eca9cb2852b16bd53f96d">M_REFRESH_1SEC</a> );
<a name="l00892"></a>00892   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;3 seconds&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a0d6e4fa4dc1c5915f2c28a3845d18fa8">M_REFRESH_3SEC</a> );
<a name="l00893"></a>00893   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;5 seconds&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2602291dae541544fe2bc90a6112e2f1">M_REFRESH_5SEC</a> );
<a name="l00894"></a>00894   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;10 seconds&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad4960ce1cf74729c4382dea2d62843e7">M_REFRESH_10SEC</a> );
<a name="l00895"></a>00895   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Set refresh period...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aa384c4087965f69fc1de1af868917e4e">M_REFRESH_DIALOG</a> );
<a name="l00896"></a>00896   <span class="comment">//</span>
<a name="l00897"></a>00897   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a> = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00898"></a>00898   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;1x1&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a> );  
<a name="l00899"></a>00899   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;1x2&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6235c29b5cb7c22336dd92637a3c094c">M_ZONES_12</a> );  
<a name="l00900"></a>00900   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;1x3&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad62884d1c6ec8a172baf944fa9e1bc56">M_ZONES_13</a> );  
<a name="l00901"></a>00901   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;2x1&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a99b919488f38494e4d467ef10279cb52">M_ZONES_21</a> );  
<a name="l00902"></a>00902   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;2x2&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a46fbfd4a6562b6cfd66f40fdb1df283a">M_ZONES_22</a> ); 
<a name="l00903"></a>00903   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;3x3&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a422c2afa5ff6921fec895849db0b2850">M_ZONES_33</a> );
<a name="l00904"></a>00904   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;4x4&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a76338c9f6b0065665769cc30674f68f4">M_ZONES_44</a> );
<a name="l00905"></a>00905   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;user&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a> );
<a name="l00906"></a>00906   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Set zones...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad9914a541f08fb5cf8d99a10e3f4d84c">M_ZONES_DIALOG</a> );
<a name="l00907"></a>00907   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a>); <span class="comment">// place check mark on the default</span>
<a name="l00908"></a>00908   <span class="comment">//</span>
<a name="l00909"></a>00909   <a class="code" href="classOptStatMenu.html">OptStatMenu</a>* optStatMenu = <span class="keyword">new</span> <a class="code" href="classOptStatMenu.html">OptStatMenu</a>(fClient-&gt;GetRoot());
<a name="l00910"></a>00910   <span class="comment">//</span>
<a name="l00911"></a>00911   <a class="code" href="classRoody.html#aeb8acfcf28d286fb41a24cdb7062f993">fMenuPlot</a> = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00912"></a>00912   fMenuPlot-&gt;AddEntry( <span class="stringliteral">&quot;New canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6d2be35c15eeba9aea775156e0b95d18">M_PLOT_NEW</a> );
<a name="l00913"></a>00913   fMenuPlot-&gt;AddEntry( <span class="stringliteral">&quot;Current pad&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adfe7c86a5b7687008f287e0c8132b4b3">M_PLOT_REPLACE</a> );
<a name="l00914"></a>00914   fMenuPlot-&gt;AddEntry( <span class="stringliteral">&quot;Overlay on Current pad&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aedfacbcd0261c41d2c5d6245c5eaddbc">M_PLOT_SAME</a> );
<a name="l00915"></a>00915   fMenuPlot-&gt;AddEntry( <span class="stringliteral">&quot;Next pad&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6e60455196df9ea3cf0ec06e89049ea1">M_PLOT_NEXT</a> );
<a name="l00916"></a>00916   <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>( <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a724c013a65921e1e083c3abc1f3b0cb9">D_PLOT_NEW</a> );
<a name="l00917"></a>00917   <span class="comment">//</span>
<a name="l00918"></a>00918   TGPopupMenu* menuClear = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00919"></a>00919   menuClear-&gt;AddEntry( <span class="stringliteral">&quot;&amp;Reset all&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a11a02455997ac3e87aef6640cfd2b641">M_RESET_ALL</a> );
<a name="l00920"></a>00920   <span class="comment">//</span>
<a name="l00921"></a>00921   TGPopupMenu* menuHelp = <span class="keyword">new</span> TGPopupMenu( fClient-&gt;GetRoot() );
<a name="l00922"></a>00922   <span class="comment">//menuHelp-&gt;AddEntry( &quot;Contents&quot;, M_HELP_CONTENTS );</span>
<a name="l00923"></a>00923   menuHelp-&gt;AddEntry( <span class="stringliteral">&quot;&amp;About&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a04ec14930df18cefe7966e65e9d093b3">M_HELP_ABOUT</a> );
<a name="l00924"></a>00924   <span class="comment">//</span>
<a name="l00925"></a>00925   menuFile-&gt;Associate( <span class="keyword">this</span> );
<a name="l00926"></a>00926   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l00927"></a>00927   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l00928"></a>00928   fMenuPlot-&gt;Associate( <span class="keyword">this</span> );
<a name="l00929"></a>00929   menuClear-&gt;Associate( <span class="keyword">this</span> );
<a name="l00930"></a>00930   menuHelp-&gt;Associate( <span class="keyword">this</span> );
<a name="l00931"></a>00931   <span class="comment">//</span>
<a name="l00932"></a>00932   TGLayoutHints* menuBarLayout1 = <span class="keyword">new</span> TGLayoutHints( kLHintsNormal|kLHintsExpandX, 0, 0, 0, 10 );
<a name="l00933"></a>00933   TGLayoutHints* menuBarLayout2 = <span class="keyword">new</span> TGLayoutHints( kLHintsTop|kLHintsLeft , 5, 0, 0, 0 );
<a name="l00934"></a>00934   TGLayoutHints* menuBarLayout3 = <span class="keyword">new</span> TGLayoutHints( kLHintsTop|kLHintsRight, 0, 5, 0, 0 );
<a name="l00935"></a>00935 
<a name="l00936"></a>00936   TGMenuBar *menuBar = <span class="keyword">new</span> TGMenuBar( <span class="keyword">this</span>, 1, 1, kRaisedFrame );
<a name="l00937"></a>00937   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;File&quot;</span>, menuFile, menuBarLayout2 );
<a name="l00938"></a>00938   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;Refresh&quot;</span>, <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>, menuBarLayout2 );
<a name="l00939"></a>00939   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;Zones&quot;</span>, <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>, menuBarLayout2 );
<a name="l00940"></a>00940   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;OptStat&quot;</span>,  optStatMenu, menuBarLayout2 );
<a name="l00941"></a>00941   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;Plot in&quot;</span>, fMenuPlot, menuBarLayout2 );
<a name="l00942"></a>00942   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;Reset&quot;</span>, menuClear, menuBarLayout2 );
<a name="l00943"></a>00943   menuBar-&gt;AddPopup( <span class="stringliteral">&quot;&amp;Help&quot;</span>, menuHelp, menuBarLayout3 );
<a name="l00944"></a>00944   <span class="comment">//</span>
<a name="l00945"></a>00945   AddFrame( menuBar, menuBarLayout1 );
<a name="l00946"></a>00946 }
<a name="l00947"></a>00947 
<a name="l00948"></a><a class="code" href="classRoody.html#af4abbad068f9a6e6779bd9147c9cf4d6">00948</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#af4abbad068f9a6e6779bd9147c9cf4d6">Roody::AddSetCut</a>()
<a name="l00949"></a>00949 {
<a name="l00950"></a>00950   TClassMenuItem *menuItem = <span class="keyword">new</span> TClassMenuItem( TClassMenuItem::kPopupUserFunction,
<a name="l00951"></a>00951                                                  Roody::Class(),
<a name="l00952"></a>00952                                                  <span class="stringliteral">&quot;Send to Analyzer&quot;</span>, <span class="stringliteral">&quot;SetCut&quot;</span>, <span class="keyword">this</span>,
<a name="l00953"></a>00953                                                  <span class="stringliteral">&quot;TObject*&quot;</span>, 0);
<a name="l00954"></a>00954   TCutG::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00955"></a>00955 }
<a name="l00956"></a>00956 
<a name="l00957"></a><a class="code" href="classRoody.html#a0129eed5885cc254ecf57a5fd4d6dde1">00957</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a0129eed5885cc254ecf57a5fd4d6dde1">Roody::SetCut</a>( TObject *o )
<a name="l00958"></a>00958 {
<a name="l00959"></a>00959   TCutG *cut = <span class="keyword">static_cast&lt;</span>TCutG*<span class="keyword">&gt;</span>(o);
<a name="l00960"></a>00960 
<a name="l00961"></a>00961   <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;Roody::SetCut() is not implemented, sorry.&quot;</span>, kMBIconExclamation, 0, NULL );
<a name="l00962"></a>00962 
<a name="l00963"></a>00963 <span class="preprocessor">#if 0  </span>
<a name="l00964"></a>00964 <span class="preprocessor"></span>  fSock-&gt;Send(<span class="stringliteral">&quot;SetCut&quot;</span>);
<a name="l00965"></a>00965   fSock-&gt;Send(cut-&gt;GetName());
<a name="l00966"></a>00966   TMessage m (kMESS_OBJECT);
<a name="l00967"></a>00967   m&lt;&lt;cut;
<a name="l00968"></a>00968   fSock-&gt;Send(m);
<a name="l00969"></a>00969 <span class="preprocessor">#endif</span>
<a name="l00970"></a>00970 <span class="preprocessor"></span>}
<a name="l00971"></a>00971 
<a name="l00972"></a><a class="code" href="classRoody.html#afa5dec915081c254b4cde9afa392c925">00972</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#afa5dec915081c254b4cde9afa392c925">Roody::AddAxisLimits</a>()
<a name="l00973"></a>00973 {
<a name="l00974"></a>00974   TClassMenuItem *menuItem = <span class="keyword">new</span> TClassMenuItem( TClassMenuItem::kPopupUserFunction,
<a name="l00975"></a>00975                                                  Roody::Class(),
<a name="l00976"></a>00976                                                  <span class="stringliteral">&quot;AxisLimits&quot;</span>, <span class="stringliteral">&quot;AxisLimits&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;&quot;</span> );
<a name="l00977"></a>00977   TH1C::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00978"></a>00978   TH1S::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00979"></a>00979   TH1I::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00980"></a>00980   TH1F::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00981"></a>00981   TH1D::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00982"></a>00982   TFrame::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l00983"></a>00983 }
<a name="l00984"></a>00984 
<a name="l00985"></a><a class="code" href="classRoody.html#a7810450b0a158b92099cfa84edf52dc5">00985</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a7810450b0a158b92099cfa84edf52dc5">Roody::AxisLimits</a>()
<a name="l00986"></a>00986 {
<a name="l00987"></a>00987   CanvasLimits *limits = <a class="code" href="classRoody.html#a6fd004943ff3d8ee9e081dbdc18c2238">fCanvasLimits</a>[gPad-&gt;GetCanvas()-&gt;GetCanvasID()];
<a name="l00988"></a>00988   <span class="keywordflow">if</span> (!limits)
<a name="l00989"></a>00989     {
<a name="l00990"></a>00990       limits = <span class="keyword">new</span> CanvasLimits();
<a name="l00991"></a>00991       <a class="code" href="classRoody.html#a6fd004943ff3d8ee9e081dbdc18c2238">fCanvasLimits</a>[gPad-&gt;GetCanvas()-&gt;GetCanvasID()] = limits;
<a name="l00992"></a>00992     }
<a name="l00993"></a>00993   <span class="keyword">new</span> TAxisLimitsDialog( gClient-&gt;GetRoot(), NULL, 250, 100, limits, <span class="keyword">this</span>);
<a name="l00994"></a>00994 }
<a name="l00995"></a>00995 
<a name="l00996"></a><a class="code" href="classRoody.html#a6e3d9ef23ad83cced4999f9437f0089a">00996</a> TObject* <a class="code" href="classRoody.html#a6e3d9ef23ad83cced4999f9437f0089a">Roody::ApplyCanvasLimits</a>(<span class="keyword">const</span> CanvasLimits* limits, <span class="keyword">const</span> ObjectPath* src, TObject *obj)
<a name="l00997"></a>00997 {
<a name="l00998"></a>00998   <span class="keywordflow">if</span> (!limits)
<a name="l00999"></a>00999     <span class="keywordflow">return</span> obj;
<a name="l01000"></a>01000 
<a name="l01001"></a>01001   <span class="keywordflow">if</span> (obj-&gt;InheritsFrom(TH1::Class()))
<a name="l01002"></a>01002     {
<a name="l01003"></a>01003       TH1* h = (TH1*)obj;
<a name="l01004"></a>01004 
<a name="l01005"></a>01005       <span class="keyword">const</span> <span class="keywordtype">char</span>* name = h-&gt;GetName();
<a name="l01006"></a>01006       
<a name="l01007"></a>01007       <span class="keywordflow">if</span> (limits-&gt;fRebin &gt; 1)
<a name="l01008"></a>01008         {
<a name="l01009"></a>01009           <span class="keywordtype">char</span> rebinx[256];
<a name="l01010"></a>01010           sprintf(rebinx,<span class="stringliteral">&quot;_rebin%d_&quot;</span>,limits-&gt;fRebin);
<a name="l01011"></a>01011           
<a name="l01012"></a>01012           <span class="keywordflow">if</span> (strstr(name,rebinx)!=NULL)
<a name="l01013"></a>01013             {
<a name="l01014"></a>01014               <span class="comment">//printf(&quot;histogram %s is already rebinned %s (%d)\n&quot;,name,rebinx,fRebin);</span>
<a name="l01015"></a>01015             }
<a name="l01016"></a>01016           <span class="keywordflow">else</span>
<a name="l01017"></a>01017             {
<a name="l01018"></a>01018               TH1* hh = (TH1*)<a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(*src);
<a name="l01019"></a>01019               assert(hh!=NULL);
<a name="l01020"></a>01020               
<a name="l01021"></a>01021               name = hh-&gt;GetName();
<a name="l01022"></a>01022               <span class="keywordtype">char</span> buf[256];
<a name="l01023"></a>01023               sprintf(buf, <span class="stringliteral">&quot;%s%s&quot;</span>, name, rebinx);
<a name="l01024"></a>01024               h = hh-&gt;Rebin(limits-&gt;fRebin, buf); <span class="comment">// object &quot;hh&quot; is cloned into &quot;h&quot;</span>
<a name="l01025"></a>01025 
<a name="l01026"></a>01026               <span class="keyword">delete</span> obj;
<a name="l01027"></a>01027             }
<a name="l01028"></a>01028         }
<a name="l01029"></a>01029       <span class="keywordflow">else</span>
<a name="l01030"></a>01030         {
<a name="l01031"></a>01031           <span class="keywordflow">if</span> (strstr(name,<span class="stringliteral">&quot;_rebin&quot;</span>)!=NULL)
<a name="l01032"></a>01032             {
<a name="l01033"></a>01033               h = (TH1*)<a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(*src);
<a name="l01034"></a>01034               assert(h != NULL);
<a name="l01035"></a>01035             }
<a name="l01036"></a>01036         }
<a name="l01037"></a>01037       
<a name="l01038"></a>01038       <span class="keywordflow">if</span> (limits-&gt;fDoZoomXaxis)
<a name="l01039"></a>01039         {
<a name="l01040"></a>01040           <span class="keywordtype">int</span> ufirst = h-&gt;GetXaxis()-&gt;FindBin(limits-&gt;fXmin);
<a name="l01041"></a>01041           <span class="keywordtype">int</span> ulast  = h-&gt;GetXaxis()-&gt;FindBin(limits-&gt;fXmax);
<a name="l01042"></a>01042           <span class="keywordtype">bool</span> rescaleY = (ufirst != h-&gt;GetXaxis()-&gt;GetFirst()) || (ulast != h-&gt;GetXaxis()-&gt;GetLast());
<a name="l01043"></a>01043           <span class="comment">//printf(&quot;set bins %d %d, rescaleY %d\n&quot;, ufirst, ulast, rescaleY);</span>
<a name="l01044"></a>01044           h-&gt;GetXaxis()-&gt;SetRange(ufirst, ulast);
<a name="l01045"></a>01045           <span class="comment">//h-&gt;GetXaxis()-&gt;SetRangeUser(limits-&gt;fXmin, limits-&gt;fXmax);</span>
<a name="l01046"></a>01046           <span class="keywordflow">if</span> (!limits-&gt;fDoZoomYaxis)
<a name="l01047"></a>01047             h-&gt;GetYaxis()-&gt;UnZoom();
<a name="l01048"></a>01048         }
<a name="l01049"></a>01049       
<a name="l01050"></a>01050       <span class="keywordflow">if</span> (limits-&gt;fDoZoomYaxis)
<a name="l01051"></a>01051         {
<a name="l01052"></a>01052           h-&gt;SetMinimum(limits-&gt;fYmin);
<a name="l01053"></a>01053           h-&gt;SetMaximum(limits-&gt;fYmax);
<a name="l01054"></a>01054         }
<a name="l01055"></a>01055       
<a name="l01056"></a>01056       <span class="keywordflow">if</span> (limits-&gt;fForceUnzoomX)
<a name="l01057"></a>01057         h-&gt;GetXaxis()-&gt;UnZoom();
<a name="l01058"></a>01058       
<a name="l01059"></a>01059       <span class="keywordflow">if</span> (limits-&gt;fForceUnzoomY)
<a name="l01060"></a>01060         h-&gt;GetYaxis()-&gt;UnZoom();
<a name="l01061"></a>01061 
<a name="l01062"></a>01062       <span class="keywordflow">return</span> h;
<a name="l01063"></a>01063     }
<a name="l01064"></a>01064   <span class="keywordflow">else</span>
<a name="l01065"></a>01065     {
<a name="l01066"></a>01066       <span class="keywordflow">return</span> obj;
<a name="l01067"></a>01067     }
<a name="l01068"></a>01068 }
<a name="l01069"></a>01069 
<a name="l01070"></a><a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">01070</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">DrawVec</a>(TVirtualPad *canvas, <span class="keyword">const</span> <a class="code" href="structPadObjectVec.html">PadObjectVec</a>* padvec)
<a name="l01071"></a>01071 {
<a name="l01072"></a>01072   <span class="comment">//printf(&quot;DrawVec canvas %p, columns %d, rows %d\n&quot;, canvas, fCanvasColumns[canvas], fCanvasRows[canvas]);</span>
<a name="l01073"></a>01073 
<a name="l01074"></a>01074   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;padvec-&gt;size(); i++)
<a name="l01075"></a>01075     {
<a name="l01076"></a>01076       TVirtualPad* pad = canvas-&gt;cd((*padvec)[i].fPadNumber);
<a name="l01077"></a>01077 
<a name="l01078"></a>01078       <span class="keywordflow">if</span> (!pad)
<a name="l01079"></a>01079         {
<a name="l01080"></a>01080           <span class="comment">//printf(&quot;canvas %p has no pad %d\n&quot;, canvas, (*padvec)[i].fPadNumber);</span>
<a name="l01081"></a>01081           pad = canvas;
<a name="l01082"></a>01082         }
<a name="l01083"></a>01083 
<a name="l01084"></a>01084       <span class="comment">//printf(&quot;pad %p index %d\n&quot;, pad, (*padvec)[i].fPadNumber);</span>
<a name="l01085"></a>01085 
<a name="l01086"></a>01086       TList* xcontents = pad-&gt;GetListOfPrimitives();
<a name="l01087"></a>01087       <span class="keywordtype">int</span> xcount = 0;
<a name="l01088"></a>01088       <span class="keywordflow">if</span> (xcontents)
<a name="l01089"></a>01089         xcount = xcontents-&gt;GetSize();
<a name="l01090"></a>01090 
<a name="l01091"></a>01091       <span class="comment">//printf(&quot;Draw %p into canvas %p pad %d %p[%d-%d], opt \&apos;%s\&apos;\n&quot;, (*padvec)[i].fObject, canvas, (*padvec)[i].fPadNumber, pad, xcount, gPadContents[pad].size(), (*padvec)[i].fDrawOption.c_str());</span>
<a name="l01092"></a>01092 
<a name="l01093"></a>01093       <span class="keywordflow">if</span> (xcount == 0)
<a name="l01094"></a>01094         <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(pad);
<a name="l01095"></a>01095 
<a name="l01096"></a>01096       (*padvec)[i].fObject-&gt;Draw((*padvec)[i].fDrawOption.c_str());
<a name="l01097"></a>01097 
<a name="l01098"></a>01098       <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[pad].push_back((*padvec)[i]);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100       pad-&gt;Modified();
<a name="l01101"></a>01101     }
<a name="l01102"></a>01102 
<a name="l01103"></a>01103   canvas-&gt;Modified();
<a name="l01104"></a>01104   canvas-&gt;Update();
<a name="l01105"></a>01105 }
<a name="l01106"></a>01106 
<a name="l01107"></a><a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">01107</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">Roody::AddObjectToVec</a>(<a class="code" href="structPadObjectVec.html">PadObjectVec</a>* padvec, TVirtualPad* pad, <span class="keyword">const</span> ObjectPath* src, TObject* obj, <span class="keyword">const</span> <span class="keywordtype">char</span>* drawOpt)
<a name="l01108"></a>01108 {
<a name="l01109"></a>01109   <span class="keywordflow">if</span> (!obj)
<a name="l01110"></a>01110     {
<a name="l01111"></a>01111       fprintf(stderr,<span class="stringliteral">&quot;Roody::AddObjectToVec: ERROR: attempt to draw a NULL object for %s!\n&quot;</span>, src-&gt;toString().c_str());
<a name="l01112"></a>01112       <span class="keywordflow">return</span>;
<a name="l01113"></a>01113     }
<a name="l01114"></a>01114 
<a name="l01115"></a>01115   pad-&gt;cd();
<a name="l01116"></a>01116 
<a name="l01117"></a>01117   TObject* xobj = <a class="code" href="classRoody.html#a6e3d9ef23ad83cced4999f9437f0089a">ApplyCanvasLimits</a>(<a class="code" href="classRoody.html#a6fd004943ff3d8ee9e081dbdc18c2238">fCanvasLimits</a>[pad-&gt;GetCanvas()-&gt;GetCanvasID()], src, obj);
<a name="l01118"></a>01118 
<a name="l01119"></a>01119   <span class="keywordflow">if</span> (xobj-&gt;InheritsFrom(TH1::Class()))
<a name="l01120"></a>01120     {
<a name="l01121"></a>01121       ((TH1*)xobj)-&gt;SetDirectory(0);
<a name="l01122"></a>01122     }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124   <span class="keywordflow">if</span> (!<a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a>-&gt;FindObject(xobj))
<a name="l01125"></a>01125     <a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a>-&gt;Add(xobj);
<a name="l01126"></a>01126 
<a name="l01127"></a>01127   xobj-&gt;SetBit(kCanDelete);
<a name="l01128"></a>01128   xobj-&gt;SetBit(kMustCleanup);
<a name="l01129"></a>01129 
<a name="l01130"></a>01130   <span class="keywordflow">if</span> (!drawOpt)
<a name="l01131"></a>01131     drawOpt = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01132"></a>01132 
<a name="l01133"></a>01133   <span class="keywordtype">int</span> padNum = pad-&gt;GetNumber();
<a name="l01134"></a>01134 
<a name="l01135"></a>01135   <span class="keywordflow">if</span> (padNum == 0)
<a name="l01136"></a>01136      padNum = 1;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138   <span class="comment">//printf(&quot;add object %p to pad %p number %d, draw opt \&apos;%s\&apos;\n&quot;, obj, pad, padNum, drawOpt);</span>
<a name="l01139"></a>01139 
<a name="l01140"></a>01140   padvec-&gt;push_back(<a class="code" href="structPadObject.html">PadObject</a>(padNum, xobj, src, drawOpt));
<a name="l01141"></a>01141 }
<a name="l01142"></a>01142 
<a name="l01143"></a><a class="code" href="Roody_8cxx.html#a35052114725da8bb9a9096092e87faf3">01143</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="Roody_8cxx.html#a35052114725da8bb9a9096092e87faf3">CopyAttrs</a>(TObject* dest, TObject* src)
<a name="l01144"></a>01144 {
<a name="l01145"></a>01145   <span class="comment">//printf(&quot;copy attributes from %p to %p\n&quot;, src, dest);</span>
<a name="l01146"></a>01146   
<a name="l01147"></a>01147   <span class="keywordflow">if</span> (src-&gt;InheritsFrom(TAttLine::Class()) &amp;&amp; dest-&gt;InheritsFrom(TAttLine::Class()))
<a name="l01148"></a>01148     {
<a name="l01149"></a>01149       TAttLine* hold = <span class="keyword">dynamic_cast&lt;</span>TAttLine*<span class="keyword">&gt;</span>(src);
<a name="l01150"></a>01150       TAttLine* hnew = <span class="keyword">dynamic_cast&lt;</span>TAttLine*<span class="keyword">&gt;</span>(dest);
<a name="l01151"></a>01151       hnew-&gt;SetLineColor(hold-&gt;GetLineColor());
<a name="l01152"></a>01152       hnew-&gt;SetLineStyle(hold-&gt;GetLineStyle());
<a name="l01153"></a>01153       hnew-&gt;SetLineWidth(hold-&gt;GetLineWidth());
<a name="l01154"></a>01154     }
<a name="l01155"></a>01155   
<a name="l01156"></a>01156   <span class="keywordflow">if</span> (src-&gt;InheritsFrom(TAttMarker::Class()) &amp;&amp; dest-&gt;InheritsFrom(TAttMarker::Class()))
<a name="l01157"></a>01157     {
<a name="l01158"></a>01158       TAttMarker* hold = <span class="keyword">dynamic_cast&lt;</span>TAttMarker*<span class="keyword">&gt;</span>(src);
<a name="l01159"></a>01159       TAttMarker* hnew = <span class="keyword">dynamic_cast&lt;</span>TAttMarker*<span class="keyword">&gt;</span>(dest);
<a name="l01160"></a>01160       hnew-&gt;SetMarkerColor(hold-&gt;GetMarkerColor());
<a name="l01161"></a>01161       hnew-&gt;SetMarkerSize(hold-&gt;GetMarkerSize());
<a name="l01162"></a>01162       hnew-&gt;SetMarkerStyle(hold-&gt;GetMarkerStyle());
<a name="l01163"></a>01163     }
<a name="l01164"></a>01164   
<a name="l01165"></a>01165   <span class="keywordflow">if</span> (src-&gt;InheritsFrom(TAttFill::Class()) &amp;&amp; dest-&gt;InheritsFrom(TAttFill::Class()))
<a name="l01166"></a>01166     {
<a name="l01167"></a>01167       TAttFill* hold = <span class="keyword">dynamic_cast&lt;</span>TAttFill*<span class="keyword">&gt;</span>(src);
<a name="l01168"></a>01168       TAttFill* hnew = <span class="keyword">dynamic_cast&lt;</span>TAttFill*<span class="keyword">&gt;</span>(dest);
<a name="l01169"></a>01169       hnew-&gt;SetFillColor(hold-&gt;GetFillColor());
<a name="l01170"></a>01170       hnew-&gt;SetFillStyle(hold-&gt;GetFillStyle());
<a name="l01171"></a>01171     }
<a name="l01172"></a>01172 
<a name="l01173"></a>01173   <span class="keywordflow">if</span> (src-&gt;InheritsFrom(TH1::Class()) &amp;&amp; dest-&gt;InheritsFrom(TH1::Class()))
<a name="l01174"></a>01174     {
<a name="l01175"></a>01175       TH1* hold = (TH1*)src;
<a name="l01176"></a>01176       TH1* hnew = (TH1*)dest;
<a name="l01177"></a>01177       hnew-&gt;GetXaxis()-&gt;SetRange(hold-&gt;GetXaxis()-&gt;GetFirst(),hold-&gt;GetXaxis()-&gt;GetLast());
<a name="l01178"></a>01178     }
<a name="l01179"></a>01179 }
<a name="l01180"></a>01180 
<a name="l01181"></a><a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">01181</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">Roody::AddPadToVec</a>(<a class="code" href="structPadObjectVec.html">PadObjectVec</a>* padvec, TVirtualPad *pad, <span class="keywordtype">bool</span> reread)
<a name="l01182"></a>01182 {
<a name="l01183"></a>01183   <a class="code" href="structPadObjectVec.html">PadObjectVec</a>* contents = &amp;<a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[pad];
<a name="l01184"></a>01184 
<a name="l01185"></a>01185   <span class="keywordflow">if</span> (!contents || contents-&gt;size() &lt;= 0)
<a name="l01186"></a>01186     <span class="keywordflow">return</span>;
<a name="l01187"></a>01187 
<a name="l01188"></a>01188   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;contents-&gt;size(); i++)
<a name="l01189"></a>01189     {
<a name="l01190"></a>01190       <span class="keyword">const</span> <a class="code" href="structPadObject.html">PadObject</a> *po = &amp;(*contents)[i];
<a name="l01191"></a>01191 
<a name="l01192"></a>01192       TObject* newobject = NULL;
<a name="l01193"></a>01193 
<a name="l01194"></a>01194       <span class="keywordflow">if</span> (reread)
<a name="l01195"></a>01195         newobject = <a class="code" href="classRoody.html#abf1e1efd5a3be11f61588b64728cb562">RereadObject</a>(po-&gt;<a class="code" href="structPadObject.html#ab27c0263b342ca18b2f7bc498d8b3f92">fSource</a>);
<a name="l01196"></a>01196       <span class="keywordflow">else</span>
<a name="l01197"></a>01197         newobject = <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(po-&gt;<a class="code" href="structPadObject.html#ab27c0263b342ca18b2f7bc498d8b3f92">fSource</a>);
<a name="l01198"></a>01198 
<a name="l01199"></a>01199       <span class="keywordflow">if</span> (!newobject)
<a name="l01200"></a>01200         <span class="keywordflow">continue</span>;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202       TObject* plotobject = newobject-&gt;Clone();
<a name="l01203"></a>01203 
<a name="l01204"></a>01204       TObject *oldobject  = po-&gt;<a class="code" href="structPadObject.html#a8032e91fa662ac8f50a13350083d401d">fObject</a>;
<a name="l01205"></a>01205       <span class="keywordflow">if</span> (oldobject)
<a name="l01206"></a>01206         {
<a name="l01207"></a>01207           <span class="comment">// force a crash if oldobject has somehow been deleted</span>
<a name="l01208"></a>01208           <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#a228bf9afef4c54d62ad5d408db7311d0">gAllObjects</a>-&gt;FindObject(oldobject))
<a name="l01209"></a>01209             {
<a name="l01210"></a>01210               <span class="comment">//printf(&quot;maybe crash on destroyed %p\n&quot;, oldobject);</span>
<a name="l01211"></a>01211               oldobject-&gt;GetName();
<a name="l01212"></a>01212             }
<a name="l01213"></a>01213           <span class="keywordflow">else</span>
<a name="l01214"></a>01214             {
<a name="l01215"></a>01215               <span class="comment">//printf(&quot;maybe crash on destroyed %p ---&gt; nope we know it is destroyed!\n&quot;, oldobject);</span>
<a name="l01216"></a>01216               oldobject = NULL;
<a name="l01217"></a>01217             }
<a name="l01218"></a>01218         }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220       <span class="keywordflow">if</span> (oldobject)
<a name="l01221"></a>01221         <a class="code" href="Roody_8cxx.html#a35052114725da8bb9a9096092e87faf3">CopyAttrs</a>(plotobject, oldobject);
<a name="l01222"></a>01222 
<a name="l01223"></a>01223       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(padvec, pad, &amp;po-&gt;<a class="code" href="structPadObject.html#ab27c0263b342ca18b2f7bc498d8b3f92">fSource</a>, plotobject, po-&gt;<a class="code" href="structPadObject.html#ab4a27ba00cd3669e80ab4b242c949db2">fDrawOption</a>.c_str());
<a name="l01224"></a>01224     }
<a name="l01225"></a>01225 
<a name="l01226"></a>01226   pad-&gt;Modified();
<a name="l01227"></a>01227 }
<a name="l01228"></a>01228 
<a name="l01229"></a><a class="code" href="classRoody.html#a8ad5069ca505521a9e0581e69e0f5b04">01229</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a8ad5069ca505521a9e0581e69e0f5b04">Roody::RedrawCanvas</a>(TVirtualPad *canvas, <span class="keywordtype">bool</span> reread)
<a name="l01230"></a>01230 {
<a name="l01231"></a>01231   <span class="keywordflow">if</span> (!canvas &amp;&amp; gPad)
<a name="l01232"></a>01232     canvas = gPad-&gt;GetCanvas();
<a name="l01233"></a>01233 
<a name="l01234"></a>01234   <span class="keywordflow">if</span> (!canvas)
<a name="l01235"></a>01235     <span class="keywordflow">return</span>;
<a name="l01236"></a>01236 
<a name="l01237"></a>01237   <span class="keywordtype">int</span> savedPad = gPad-&gt;GetNumber();
<a name="l01238"></a>01238 
<a name="l01239"></a>01239   <a class="code" href="structPadObjectVec.html">PadObjectVec</a> padvec;
<a name="l01240"></a>01240 
<a name="l01241"></a>01241   <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[canvas].size() &gt; 0)
<a name="l01242"></a>01242     {
<a name="l01243"></a>01243       <a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">AddPadToVec</a>(&amp;padvec, canvas, reread);
<a name="l01244"></a>01244     }
<a name="l01245"></a>01245   <span class="keywordflow">else</span>
<a name="l01246"></a>01246     {
<a name="l01247"></a>01247       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;1000; i++)
<a name="l01248"></a>01248         {
<a name="l01249"></a>01249           TVirtualPad *pad = canvas-&gt;cd(i);
<a name="l01250"></a>01250           <span class="comment">//printf(&quot;canvas %p subpad %d is %p\n&quot;, canvas, i, pad);</span>
<a name="l01251"></a>01251           <span class="keywordflow">if</span> (!pad || pad-&gt;GetNumber()!=i)
<a name="l01252"></a>01252             <span class="keywordflow">break</span>;
<a name="l01253"></a>01253 
<a name="l01254"></a>01254           <a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">AddPadToVec</a>(&amp;padvec, pad, reread);
<a name="l01255"></a>01255         }
<a name="l01256"></a>01256     }
<a name="l01257"></a>01257 
<a name="l01258"></a>01258   canvas-&gt;Clear();
<a name="l01259"></a>01259 
<a name="l01260"></a>01260   <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas);
<a name="l01261"></a>01261   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=<a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas]*<a class="code" href="classRoody.html#a5a2e7e58f4e6c7365092297a15904c84">fCanvasRows</a>[canvas]; i++)
<a name="l01262"></a>01262     <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas-&gt;cd(i));
<a name="l01263"></a>01263 
<a name="l01264"></a>01264   canvas-&gt;Divide(<a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas], fCanvasRows[canvas]);
<a name="l01265"></a>01265 
<a name="l01266"></a>01266   <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas);
<a name="l01267"></a>01267   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=<a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas]*fCanvasRows[canvas]; i++)
<a name="l01268"></a>01268     <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas-&gt;cd(i));
<a name="l01269"></a>01269 
<a name="l01270"></a>01270   <a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">DrawVec</a>(canvas, &amp;padvec);
<a name="l01271"></a>01271 
<a name="l01272"></a>01272   canvas-&gt;cd(savedPad);
<a name="l01273"></a>01273   canvas-&gt;Update();
<a name="l01274"></a>01274 }
<a name="l01275"></a>01275 
<a name="l01276"></a><a class="code" href="classRoody.html#a170d1ee73a2f6dc6ff608e0ad6dbdbb8">01276</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a170d1ee73a2f6dc6ff608e0ad6dbdbb8">Roody::AddZoomOption</a>()
<a name="l01277"></a>01277 {
<a name="l01278"></a>01278   TClassMenuItem *menuItem = <span class="keyword">new</span> TClassMenuItem( TClassMenuItem::kPopupUserFunction,
<a name="l01279"></a>01279                                                  Roody::Class(),
<a name="l01280"></a>01280                                                  <span class="stringliteral">&quot;ZoomOption&quot;</span>, <span class="stringliteral">&quot;ZoomOption&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;&quot;</span> );
<a name="l01281"></a>01281   TH1C::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01282"></a>01282   TH1S::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01283"></a>01283   TH1I::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01284"></a>01284   TH1F::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01285"></a>01285   TH1D::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01286"></a>01286   TFrame::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01287"></a>01287 }
<a name="l01288"></a>01288 
<a name="l01289"></a><a class="code" href="classRoody.html#a191221f28aa08363462ef3d7ee3b5a5e">01289</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a191221f28aa08363462ef3d7ee3b5a5e">Roody::ZoomOption</a>()
<a name="l01290"></a>01290 {
<a name="l01291"></a>01291   <span class="comment">// do not allow zoom on the zoom canvas</span>
<a name="l01292"></a>01292   <span class="comment">//</span>
<a name="l01293"></a>01293   <span class="keywordflow">if</span> (!gPad || !strcmp(gPad-&gt;GetCanvas()-&gt;GetName(),<span class="stringliteral">&quot;Zoom Canvas&quot;</span>))
<a name="l01294"></a>01294     <span class="keywordflow">return</span>;
<a name="l01295"></a>01295   <span class="comment">//</span>
<a name="l01296"></a>01296   <span class="comment">// find all histograms on the current pad, and store them in a vector</span>
<a name="l01297"></a>01297   <span class="comment">//</span>
<a name="l01298"></a>01298 
<a name="l01299"></a>01299   <a class="code" href="structPadObjectVec.html">PadObjectVec</a>* contents = &amp;<a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[gPad];
<a name="l01300"></a>01300 
<a name="l01301"></a>01301   <span class="comment">// make the zoom canvas (which is always 1x1),</span>
<a name="l01302"></a>01302   <span class="comment">// and then draw the stored histograms on the zoom canvas</span>
<a name="l01303"></a>01303 
<a name="l01304"></a>01304   TVirtualPad *padSave = gPad;
<a name="l01305"></a>01305 
<a name="l01306"></a>01306   <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>)
<a name="l01307"></a>01307     <span class="keyword">delete</span> <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>;
<a name="l01308"></a>01308   <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a> = <span class="keyword">new</span> TCanvas(<span class="stringliteral">&quot;Zoom Canvas&quot;</span>, <span class="stringliteral">&quot;Zoom Canvas&quot;</span>);
<a name="l01309"></a>01309   <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>-&gt;cd();  <span class="comment">// gPad should now be set to fZoomCanvas</span>
<a name="l01310"></a>01310 
<a name="l01311"></a>01311   <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>-&gt;Connect( <span class="stringliteral">&quot;ProcessedEvent(Int_t,Int_t,Int_t,TObject*)&quot;</span>, <span class="stringliteral">&quot;Roody&quot;</span>,
<a name="l01312"></a>01312                         <span class="keyword">this</span>, <span class="stringliteral">&quot;SelectPad(Int_t,Int_t,Int_t,TObject*)&quot;</span> );
<a name="l01313"></a>01313 
<a name="l01314"></a>01314   <a class="code" href="structPadObjectVec.html">PadObjectVec</a> padvec;
<a name="l01315"></a>01315 
<a name="l01316"></a>01316   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;contents-&gt;size(); i++)
<a name="l01317"></a>01317     {
<a name="l01318"></a>01318       ObjectPath *src = &amp;(*contents)[i].fSource;
<a name="l01319"></a>01319       TObject* obj = <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(*src);
<a name="l01320"></a>01320       <span class="keywordflow">if</span> (!obj)
<a name="l01321"></a>01321         <span class="keywordflow">continue</span>;
<a name="l01322"></a>01322       TObject *clone = obj-&gt;Clone();
<a name="l01323"></a>01323       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, <a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>, src, clone, (*contents)[i].fDrawOption.c_str());
<a name="l01324"></a>01324     }
<a name="l01325"></a>01325 
<a name="l01326"></a>01326   <a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">DrawVec</a>(<a class="code" href="classRoody.html#ad666d0f7042bcf625f8538546b2f4cb9">fZoomCanvas</a>, &amp;padvec);
<a name="l01327"></a>01327 
<a name="l01328"></a>01328   <span class="keywordflow">if</span> (padSave)
<a name="l01329"></a>01329     padSave-&gt;cd();
<a name="l01330"></a>01330 }
<a name="l01331"></a>01331 
<a name="l01332"></a><a class="code" href="classRoody.html#a679469f7ed5d3209518a73d375615ed6">01332</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a679469f7ed5d3209518a73d375615ed6">Roody::AddPeakFind</a>()
<a name="l01333"></a>01333 {
<a name="l01334"></a>01334   TClassMenuItem *menuItem = <span class="keyword">new</span> TClassMenuItem( TClassMenuItem::kPopupUserFunction,
<a name="l01335"></a>01335                                                  Roody::Class(),
<a name="l01336"></a>01336                                                  <span class="stringliteral">&quot;PeakFind&quot;</span>, <span class="stringliteral">&quot;PeakFind&quot;</span>, <span class="keyword">this</span>, <span class="stringliteral">&quot;&quot;</span> );
<a name="l01337"></a>01337   TH1C::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01338"></a>01338   TH1S::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01339"></a>01339   TH1I::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01340"></a>01340   TH1F::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01341"></a>01341   TH1D::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01342"></a>01342   TFrame::Class()-&gt;GetMenuList()-&gt;AddFirst(menuItem);
<a name="l01343"></a>01343 }
<a name="l01344"></a>01344 
<a name="l01345"></a><a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">01345</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">Roody::SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21">EDrawDestination</a> dest)
<a name="l01346"></a>01346 {
<a name="l01347"></a>01347   <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#a85f7442dcfb56450d8aa7eb6f21690e1">fDefaultDrawDestination</a>)
<a name="l01348"></a>01348     <a class="code" href="classRoody.html#aeb8acfcf28d286fb41a24cdb7062f993">fMenuPlot</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a85f7442dcfb56450d8aa7eb6f21690e1">fDefaultDrawDestination</a>);
<a name="l01349"></a>01349   
<a name="l01350"></a>01350   <a class="code" href="classRoody.html#a85f7442dcfb56450d8aa7eb6f21690e1">fDefaultDrawDestination</a> = dest;
<a name="l01351"></a>01351   <a class="code" href="classRoody.html#aeb8acfcf28d286fb41a24cdb7062f993">fMenuPlot</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a85f7442dcfb56450d8aa7eb6f21690e1">fDefaultDrawDestination</a>);
<a name="l01352"></a>01352 }
<a name="l01353"></a>01353 
<a name="l01354"></a><a class="code" href="classRoody.html#a849b5dc2b285b413b22d078fd885e98c">01354</a> std::string <a class="code" href="classRoody.html#a849b5dc2b285b413b22d078fd885e98c">Roody::GetZoneSetting</a>(<span class="keywordtype">int</span> columns,<span class="keywordtype">int</span> rows)
<a name="l01355"></a>01355 {
<a name="l01356"></a>01356   std::stringstream str;
<a name="l01357"></a>01357   str &lt;&lt; columns &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; rows;
<a name="l01358"></a>01358   <span class="keywordflow">return</span> str.str();
<a name="l01359"></a>01359 }
<a name="l01360"></a>01360 
<a name="l01361"></a><a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">01361</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">Roody::SetupZones</a>(<span class="keywordtype">int</span> columns,<span class="keywordtype">int</span> rows)
<a name="l01362"></a>01362 {
<a name="l01363"></a>01363   <span class="comment">// set up the pads on the canvas</span>
<a name="l01364"></a>01364   <span class="comment">// if the canvas already has things drawn on it,</span>
<a name="l01365"></a>01365   <span class="comment">// redraw them in the new pads</span>
<a name="l01366"></a>01366   <span class="comment">//</span>
<a name="l01367"></a>01367 
<a name="l01368"></a>01368   <span class="comment">//printf(&quot;SetupZones %d %d\n&quot;, columns, rows);</span>
<a name="l01369"></a>01369 
<a name="l01370"></a>01370   <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a> = columns;
<a name="l01371"></a>01371   <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a> = rows;
<a name="l01372"></a>01372 
<a name="l01373"></a>01373   <span class="keywordflow">if</span> (!gPad)
<a name="l01374"></a>01374   {
<a name="l01375"></a>01375     <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">MakeNewCanvas</a>(NULL, columns, rows);
<a name="l01376"></a>01376     <span class="keywordflow">return</span>;
<a name="l01377"></a>01377   }
<a name="l01378"></a>01378 
<a name="l01379"></a>01379   TVirtualPad *canvas = gPad-&gt;GetCanvas()-&gt;cd(); <span class="comment">// gPad should now be the parent canvas</span>
<a name="l01380"></a>01380 
<a name="l01381"></a>01381 <span class="preprocessor">#if 0</span>
<a name="l01382"></a>01382 <span class="preprocessor"></span> FIXME: why are we resetting the user choice?!?
<a name="l01383"></a>01383   <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a>*<a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>==1)
<a name="l01384"></a>01384     <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21acf7ad8739940023a3eb1d7adaf920d6b">D_PLOT_REPLACE</a>);
<a name="l01385"></a>01385   <span class="keywordflow">else</span>
<a name="l01386"></a>01386     <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21accc671086ee62332fd66579bab1babf6">D_PLOT_NEXT</a>);
<a name="l01387"></a>01387 <span class="preprocessor">#endif</span>
<a name="l01388"></a>01388 <span class="preprocessor"></span>
<a name="l01389"></a>01389   <a class="code" href="structPadObjectVec.html">PadObjectVec</a> padvec;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391   <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[canvas].size() &gt; 0)
<a name="l01392"></a>01392     {
<a name="l01393"></a>01393       <a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">AddPadToVec</a>(&amp;padvec, canvas);
<a name="l01394"></a>01394     }
<a name="l01395"></a>01395   <span class="keywordflow">else</span>
<a name="l01396"></a>01396     {
<a name="l01397"></a>01397       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;1000; i++)
<a name="l01398"></a>01398         {
<a name="l01399"></a>01399           TVirtualPad *pad = canvas-&gt;cd(i);
<a name="l01400"></a>01400           <span class="comment">//printf(&quot;canvas %p subpad %d is %p\n&quot;, canvas, i, pad);</span>
<a name="l01401"></a>01401           <span class="keywordflow">if</span> (!pad || pad-&gt;GetNumber()!=i)
<a name="l01402"></a>01402             <span class="keywordflow">break</span>;
<a name="l01403"></a>01403 
<a name="l01404"></a>01404           <span class="keywordflow">if</span> (i &gt; columns*rows)
<a name="l01405"></a>01405             <span class="keywordflow">break</span>;
<a name="l01406"></a>01406 
<a name="l01407"></a>01407           <a class="code" href="classRoody.html#a74dc53fce1c1a42d024b3a96321baaad">AddPadToVec</a>(&amp;padvec, pad);
<a name="l01408"></a>01408         }
<a name="l01409"></a>01409     }
<a name="l01410"></a>01410 
<a name="l01411"></a>01411   <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas);
<a name="l01412"></a>01412   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=<a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas]*<a class="code" href="classRoody.html#a5a2e7e58f4e6c7365092297a15904c84">fCanvasRows</a>[canvas]; i++)
<a name="l01413"></a>01413     <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas-&gt;cd(i));
<a name="l01414"></a>01414 
<a name="l01415"></a>01415   canvas-&gt;Clear();
<a name="l01416"></a>01416   canvas-&gt;Divide(columns, rows);
<a name="l01417"></a>01417 
<a name="l01418"></a>01418   <a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas] = columns;
<a name="l01419"></a>01419   fCanvasRows[canvas] = rows;
<a name="l01420"></a>01420 
<a name="l01421"></a>01421   <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas);
<a name="l01422"></a>01422   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i&lt;=<a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas]*fCanvasRows[canvas]; i++)
<a name="l01423"></a>01423     <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>.erase(canvas-&gt;cd(i));
<a name="l01424"></a>01424 
<a name="l01425"></a>01425   <a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">DrawVec</a>(canvas, &amp;padvec);
<a name="l01426"></a>01426 }
<a name="l01427"></a>01427 
<a name="l01428"></a><a class="code" href="classRoody.html#a70e41616c36d9ff38cf218190700f959">01428</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a70e41616c36d9ff38cf218190700f959">Roody::SelectPad</a>( Int_t ev, Int_t x, Int_t y, TObject* obj )
<a name="l01429"></a>01429 {
<a name="l01430"></a>01430   <span class="comment">// Makes the pad active for all mousebutton clicks</span>
<a name="l01431"></a>01431   <span class="keywordflow">if</span>( ev==kButton1Down || ev==kButton3Down )
<a name="l01432"></a>01432     gPad-&gt;GetCanvas()-&gt;HandleInput( kButton2Down, x, y );
<a name="l01433"></a>01433 }
<a name="l01434"></a>01434 
<a name="l01435"></a><a class="code" href="classRoody.html#ae5e9d0de70d56bc4fc2c3ee56ee4a2b7">01435</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ae5e9d0de70d56bc4fc2c3ee56ee4a2b7">Roody::DrawItem</a>(TGListTreeItem *item, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21">EDrawDestination</a> dest)
<a name="l01436"></a>01436 {
<a name="l01437"></a>01437   <span class="keywordflow">if</span> (dest == <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21aaab32d0ee521d1abd1ecc6aa907eece7">D_PLOT_DEFAULT</a>)
<a name="l01438"></a>01438     dest = <a class="code" href="classRoody.html#a85f7442dcfb56450d8aa7eb6f21690e1">fDefaultDrawDestination</a>;
<a name="l01439"></a>01439 
<a name="l01440"></a>01440   <span class="keywordflow">if</span>( !gPad || dest==<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a724c013a65921e1e083c3abc1f3b0cb9">D_PLOT_NEW</a>)
<a name="l01441"></a>01441     <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">MakeNewCanvas</a>(NULL, <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a>, <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>);
<a name="l01442"></a>01442 
<a name="l01443"></a>01443   <span class="keywordflow">if</span> (dest == <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21accc671086ee62332fd66579bab1babf6">D_PLOT_NEXT</a> )
<a name="l01444"></a>01444     {
<a name="l01445"></a>01445       <span class="keywordtype">int</span> currentNumber = gPad-&gt;GetNumber();
<a name="l01446"></a>01446       <span class="keywordflow">if</span> (currentNumber &gt; 0) <span class="comment">// select next pad</span>
<a name="l01447"></a>01447         {
<a name="l01448"></a>01448           gPad-&gt;GetCanvas()-&gt;cd(currentNumber+1);
<a name="l01449"></a>01449           <span class="keywordflow">if</span> (gPad-&gt;GetNumber() == currentNumber)
<a name="l01450"></a>01450             gPad-&gt;GetCanvas()-&gt;cd(1);
<a name="l01451"></a>01451         }
<a name="l01452"></a>01452     }
<a name="l01453"></a>01453 
<a name="l01454"></a>01454   <a class="code" href="classRoody.html#aebafdb5e945ef9bad3e00bb8ddb95d94">DrawItemOnPad</a>(item, gPad, dest != <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a432f1770f5630286dc842b6adcb36494">D_PLOT_SAME</a>);
<a name="l01455"></a>01455 }
<a name="l01456"></a>01456 
<a name="l01457"></a><a class="code" href="classRoody.html#aebafdb5e945ef9bad3e00bb8ddb95d94">01457</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aebafdb5e945ef9bad3e00bb8ddb95d94">Roody::DrawItemOnPad</a>(TGListTreeItem *item, TVirtualPad *dest, <span class="keywordtype">bool</span> replace)
<a name="l01458"></a>01458 {
<a name="l01459"></a>01459   <span class="keywordflow">if</span> (replace)
<a name="l01460"></a>01460     dest-&gt;Clear();
<a name="l01461"></a>01461 
<a name="l01462"></a>01462   ObjectPath src = <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[item];
<a name="l01463"></a>01463   TObject* obj = <a class="code" href="classRoody.html#a9f953fb62838af838861de46e2c3ec4d">GetObject</a>(src);
<a name="l01464"></a>01464   <span class="keywordflow">if</span> (!obj)
<a name="l01465"></a>01465     <span class="keywordflow">return</span>;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467   <span class="keywordflow">if</span> (strcmp(<a class="code" href="Roody_8cxx.html#ab15243e54e971d543df4cc286b5733d0">gObjectClasses</a>[src].c_str(), obj-&gt;ClassName()) != 0)
<a name="l01468"></a>01468     {
<a name="l01469"></a>01469       <span class="comment">//printf(&quot;update object class for %s: %s-&gt;%s!\n&quot;, obj-&gt;GetName(), gObjectClasses[src].c_str(), obj-&gt;ClassName());</span>
<a name="l01470"></a>01470       <a class="code" href="Roody_8cxx.html#ab15243e54e971d543df4cc286b5733d0">gObjectClasses</a>[src] = obj-&gt;ClassName();
<a name="l01471"></a>01471       <a class="code" href="classRoody.html#ab9d83ccd3387124292a7b16004738721">UpdateObjectClass</a>(item, obj);
<a name="l01472"></a>01472     }
<a name="l01473"></a>01473 
<a name="l01474"></a>01474   <a class="code" href="structPadObjectVec.html">PadObjectVec</a> padvec;
<a name="l01475"></a>01475 
<a name="l01476"></a>01476   <span class="keywordflow">if</span> (0)
<a name="l01477"></a>01477   {
<a name="l01478"></a>01478   }
<a name="l01479"></a>01479   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TTree::Class()) )
<a name="l01480"></a>01480   {
<a name="l01481"></a>01481     <span class="keyword">static_cast&lt;</span>TTree*<span class="keyword">&gt;</span>(obj)-&gt;StartViewer();
<a name="l01482"></a>01482   }
<a name="l01483"></a>01483   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TNtuple::Class()) )
<a name="l01484"></a>01484   {
<a name="l01485"></a>01485     <span class="keyword">static_cast&lt;</span>TNtuple*<span class="keyword">&gt;</span>(obj)-&gt;StartViewer();
<a name="l01486"></a>01486   }
<a name="l01487"></a>01487   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TPad::Class()) )
<a name="l01488"></a>01488   {
<a name="l01489"></a>01489     <span class="keyword">static_cast&lt;</span>TPad*<span class="keyword">&gt;</span>(obj)-&gt;Draw();
<a name="l01490"></a>01490   }
<a name="l01491"></a>01491   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TH1::Class()) )
<a name="l01492"></a>01492   {
<a name="l01493"></a>01493     TH1 *clone = (TH1*)obj-&gt;Clone();
<a name="l01494"></a>01494 
<a name="l01495"></a>01495     <span class="keywordflow">if</span> (replace)
<a name="l01496"></a>01496       {
<a name="l01497"></a>01497         <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, NULL);
<a name="l01498"></a>01498       }
<a name="l01499"></a>01499     <span class="keywordflow">else</span>
<a name="l01500"></a>01500       {
<a name="l01501"></a>01501         <span class="keywordtype">int</span> color = 1 + <a class="code" href="Roody_8cxx.html#aaa13e34ee096e30cf2cc881c4ef61afe">gPadContents</a>[dest].size();
<a name="l01502"></a>01502         clone-&gt;SetLineColor(color);
<a name="l01503"></a>01503         <span class="comment">//MemDebug *d = new MemDebug();</span>
<a name="l01504"></a>01504         <span class="comment">//AddObjectToPad(dest, &amp;src, d, &quot;SAME&quot;);</span>
<a name="l01505"></a>01505         <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, <span class="stringliteral">&quot;SAME&quot;</span>);
<a name="l01506"></a>01506       }
<a name="l01507"></a>01507   }
<a name="l01508"></a>01508   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TCutG::Class()) )
<a name="l01509"></a>01509   {
<a name="l01510"></a>01510     TCutG *c = <span class="keyword">static_cast&lt;</span>TCutG*<span class="keyword">&gt;</span>(obj);
<a name="l01511"></a>01511     c-&gt;Draw();
<a name="l01512"></a>01512   }
<a name="l01513"></a>01513   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( obj-&gt;InheritsFrom(TGraph::Class()) )
<a name="l01514"></a>01514   {
<a name="l01515"></a>01515     TGraph *clone = (TGraph*)obj-&gt;Clone();
<a name="l01516"></a>01516 
<a name="l01517"></a>01517     <span class="keywordflow">if</span> (replace)
<a name="l01518"></a>01518       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, <span class="stringliteral">&quot;AC*&quot;</span>);
<a name="l01519"></a>01519     <span class="keywordflow">else</span>
<a name="l01520"></a>01520       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, <span class="stringliteral">&quot;C*&quot;</span>);
<a name="l01521"></a>01521   }
<a name="l01522"></a>01522   <span class="keywordflow">else</span>
<a name="l01523"></a>01523   {
<a name="l01524"></a>01524     TObject *clone = obj-&gt;Clone();
<a name="l01525"></a>01525 
<a name="l01526"></a>01526     <span class="keywordflow">if</span> (replace)
<a name="l01527"></a>01527       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, NULL);
<a name="l01528"></a>01528     <span class="keywordflow">else</span>
<a name="l01529"></a>01529       <a class="code" href="classRoody.html#a723d5bd04d150be32d5fec888234dae3">AddObjectToVec</a>(&amp;padvec, dest, &amp;src, clone, NULL); <span class="comment">// do not know how to overplot unknown objects</span>
<a name="l01530"></a>01530   }
<a name="l01531"></a>01531 
<a name="l01532"></a>01532   <a class="code" href="Roody_8cxx.html#a476cf59022d4777bd4f30611b1060fe6">DrawVec</a>(dest-&gt;GetCanvas(), &amp;padvec);
<a name="l01533"></a>01533 }
<a name="l01534"></a>01534 
<a name="l01535"></a><a class="code" href="classRoody.html#a9300e3861f317aeb8aea621d0d3787f0">01535</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a9300e3861f317aeb8aea621d0d3787f0">Roody::PeakFind</a>()
<a name="l01536"></a>01536 {
<a name="l01537"></a>01537   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a77bfde3c103b507e1692f9587b93ff47">fgPeakFindPanel</a> )
<a name="l01538"></a>01538     <a class="code" href="classRoody.html#a77bfde3c103b507e1692f9587b93ff47">fgPeakFindPanel</a>-&gt;MapRaised();
<a name="l01539"></a>01539   <span class="keywordflow">else</span>
<a name="l01540"></a>01540     <a class="code" href="classRoody.html#a77bfde3c103b507e1692f9587b93ff47">fgPeakFindPanel</a> = <span class="keyword">new</span> <a class="code" href="classTPeakFindPanel.html">TPeakFindPanel</a>(gClient-&gt;GetRoot(),0,250,220);
<a name="l01541"></a>01541 }
<a name="l01542"></a>01542 
<a name="l01543"></a><a class="code" href="classRoody.html#ae0b44c0d728de875cb271e82e5ada792">01543</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ae0b44c0d728de875cb271e82e5ada792">Roody::PopupPlot</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01544"></a>01544 {
<a name="l01545"></a>01545   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> )<span class="keyword">delete</span> <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>;
<a name="l01546"></a>01546   <span class="comment">//</span>
<a name="l01547"></a>01547   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = <span class="keyword">new</span> TGPopupMenu( gClient-&gt;GetRoot() );
<a name="l01548"></a>01548   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Plot on new canvas&quot;</span>,     <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a4cf760dbda7cb5c08a60f0eeabf5826c">C_PLOT_NEW</a> );
<a name="l01549"></a>01549   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Plot on current pad&quot;</span>,    <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6d6b4aa7424a2f20a578dbce075f4ab9">C_PLOT_REPLACE</a> );
<a name="l01550"></a>01550   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Overlay on Current pad&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad0ff6fad5c3ecf5e1c4a4e53b0ff2634">C_PLOT_SAME</a> );
<a name="l01551"></a>01551   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Plot on next pad&quot;</span>,       <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a11b55cd308c7a775c0898b2fb1514904">C_PLOT_NEXT</a> );
<a name="l01552"></a>01552   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddSeparator();
<a name="l01553"></a>01553   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Add to new group...&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcecad145d037951e3e5d2e4290ab8b0">C_ADD_TO_GROUP</a> );
<a name="l01554"></a>01554   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.size(); i++)
<a name="l01555"></a>01555     {
<a name="l01556"></a>01556       std::string s;
<a name="l01557"></a>01557       s += <span class="stringliteral">&quot;Add to group &quot;</span>;
<a name="l01558"></a>01558       s += <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>[i]-&gt;GetText();
<a name="l01559"></a>01559       <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( s.c_str(), <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcecad145d037951e3e5d2e4290ab8b0">C_ADD_TO_GROUP</a> + 1000 * (i+1));
<a name="l01560"></a>01560     }
<a name="l01561"></a>01561   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddSeparator();
<a name="l01562"></a>01562   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Reset&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aa53741abb7faf5e8b285fdbb428202a3">C_RESET_OBJECT</a> );
<a name="l01563"></a>01563   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;PlaceMenu( x, y, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01564"></a>01564   <a class="code" href="classRoody.html#a73898787ac0e2fa150fcad2d32b1251c">fXSave</a> = x;
<a name="l01565"></a>01565   <a class="code" href="classRoody.html#a186ab72676dda716ee613e7b79041feb">fYSave</a> = y;
<a name="l01566"></a>01566   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l01567"></a>01567 }
<a name="l01568"></a>01568 
<a name="l01569"></a><a class="code" href="classRoody.html#a346a1a52e0a4568bffac68a200fdf2e8">01569</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a346a1a52e0a4568bffac68a200fdf2e8">Roody::PopupPlotFolder</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01570"></a>01570 {
<a name="l01571"></a>01571   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> )<span class="keyword">delete</span> <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>;
<a name="l01572"></a>01572   <span class="comment">//</span>
<a name="l01573"></a>01573   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = <span class="keyword">new</span> TGPopupMenu( gClient-&gt;GetRoot() );
<a name="l01574"></a>01574   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Plot on new canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9bcdf41d55ee59875aee788dd4991ac3">C_PLOT_FOLDER</a>);
<a name="l01575"></a>01575   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddSeparator();
<a name="l01576"></a>01576   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Reset&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a826180105b35c6f6fa90eab7ac97c0b7">C_RESET_FOLDER</a>);
<a name="l01577"></a>01577   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;PlaceMenu( x, y, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01578"></a>01578   <a class="code" href="classRoody.html#a73898787ac0e2fa150fcad2d32b1251c">fXSave</a> = x;
<a name="l01579"></a>01579   <a class="code" href="classRoody.html#a186ab72676dda716ee613e7b79041feb">fYSave</a> = y;
<a name="l01580"></a>01580   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l01581"></a>01581 }
<a name="l01582"></a>01582 
<a name="l01583"></a><a class="code" href="classRoody.html#a8bb015140d68040713d28168506b933d">01583</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a8bb015140d68040713d28168506b933d">Roody::PopupPlotSource</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01584"></a>01584 {
<a name="l01585"></a>01585   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> )<span class="keyword">delete</span> <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>;
<a name="l01586"></a>01586   <span class="comment">//</span>
<a name="l01587"></a>01587   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = <span class="keyword">new</span> TGPopupMenu( gClient-&gt;GetRoot() );
<a name="l01588"></a>01588   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Plot all on new canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9bcdf41d55ee59875aee788dd4991ac3">C_PLOT_FOLDER</a>);
<a name="l01589"></a>01589   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddSeparator();
<a name="l01590"></a>01590   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Reset all&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a826180105b35c6f6fa90eab7ac97c0b7">C_RESET_FOLDER</a>);
<a name="l01591"></a>01591   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddSeparator();
<a name="l01592"></a>01592   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Reopen&quot;</span>,    <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a37a8ad194602e270ed2cd5ed9cab0b59">C_REOPEN_SOURCE</a>);
<a name="l01593"></a>01593   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry(<span class="stringliteral">&quot;Close&quot;</span>,     <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6af54452d4eea7bedda490d0b9d52a1ddd">C_CLOSE_SOURCE</a>);
<a name="l01594"></a>01594   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;PlaceMenu( x, y, <span class="keyword">false</span>, <span class="keyword">true</span>);
<a name="l01595"></a>01595   <a class="code" href="classRoody.html#a73898787ac0e2fa150fcad2d32b1251c">fXSave</a> = x;
<a name="l01596"></a>01596   <a class="code" href="classRoody.html#a186ab72676dda716ee613e7b79041feb">fYSave</a> = y;
<a name="l01597"></a>01597   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;Associate(<span class="keyword">this</span>);
<a name="l01598"></a>01598 }
<a name="l01599"></a>01599 
<a name="l01600"></a><a class="code" href="classRoody.html#a244f1781a79de822f8b1826f2bd46903">01600</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a244f1781a79de822f8b1826f2bd46903">Roody::PopupTopGroup</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y )
<a name="l01601"></a>01601 {
<a name="l01602"></a>01602   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> )<span class="keyword">delete</span> <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>;
<a name="l01603"></a>01603   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = <span class="keyword">new</span> TGPopupMenu( gClient-&gt;GetRoot() );
<a name="l01604"></a>01604   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Make new group&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a3425563903b1ac5eae2cd74c0b071b65">C_NEW_GROUP</a> );
<a name="l01605"></a>01605   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;PlaceMenu( x, y, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01606"></a>01606   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l01607"></a>01607 }
<a name="l01608"></a>01608 
<a name="l01609"></a><a class="code" href="classRoody.html#a2982d01308bd9996cb468fec51137caa">01609</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a2982d01308bd9996cb468fec51137caa">Roody::PopupGroup</a>( <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y )
<a name="l01610"></a>01610 {
<a name="l01611"></a>01611   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> )<span class="keyword">delete</span> <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>;
<a name="l01612"></a>01612   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a> = <span class="keyword">new</span> TGPopupMenu( gClient-&gt;GetRoot() );
<a name="l01613"></a>01613   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Draw group on new canvas&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab1c05a0a01835d6adc70529d9d247012">C_DRAW_GROUP</a> );
<a name="l01614"></a>01614   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Reset group&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a1e4747a79faddbdc172e38d680c8fa1b">C_RESET_GROUP</a> );
<a name="l01615"></a>01615   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;AddEntry( <span class="stringliteral">&quot;Delete group&quot;</span>, <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ae0989aaea8a99b4a2f495960449f0624">C_DELETE_GROUP</a> );
<a name="l01616"></a>01616   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;PlaceMenu( x, y, <span class="keyword">false</span>, <span class="keyword">true</span> );
<a name="l01617"></a>01617   <a class="code" href="classRoody.html#a53aa4ef3d5ec121e9dd2b8b18f423860">fPopupMenu</a>-&gt;Associate( <span class="keyword">this</span> );
<a name="l01618"></a>01618 }
<a name="l01619"></a>01619 
<a name="l01620"></a><a class="code" href="classRoody.html#ae4d661108b7badd29d40649decb5ffdc">01620</a> TGListTreeItem* <a class="code" href="classRoody.html#ae4d661108b7badd29d40649decb5ffdc">Roody::PopupNewGroup</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l01621"></a>01621 {
<a name="l01622"></a>01622   TGListTreeItem* newgroup = NULL;
<a name="l01623"></a>01623   TObjString objString;
<a name="l01624"></a>01624   <span class="keyword">new</span> <a class="code" href="classTGTextDialog.html">TGTextDialog</a>(gClient-&gt;GetRoot(), <span class="keyword">this</span>, x, y, <span class="stringliteral">&quot;Create new group: &quot;</span>, <span class="stringliteral">&quot;&quot;</span>, &amp;objString);
<a name="l01625"></a>01625 
<a name="l01626"></a>01626   <span class="keyword">const</span> <span class="keywordtype">char</span>* name = objString.GetString();
<a name="l01627"></a>01627 
<a name="l01628"></a>01628   <span class="keywordflow">if</span> (name &amp;&amp; strlen(name) &gt; 0 &amp;&amp; strcmp(name,<span class="stringliteral">&quot;-1&quot;</span>) != 0)
<a name="l01629"></a>01629     newgroup = <a class="code" href="classRoody.html#a8c63a0dfcd640bff1ce2a625f9a2fb0d">MakeNewGroup</a>(name);
<a name="l01630"></a>01630 
<a name="l01631"></a>01631   <span class="keywordflow">return</span> newgroup;
<a name="l01632"></a>01632 }
<a name="l01633"></a>01633 
<a name="l01634"></a><a class="code" href="classRoody.html#a8c63a0dfcd640bff1ce2a625f9a2fb0d">01634</a> TGListTreeItem* <a class="code" href="classRoody.html#a8c63a0dfcd640bff1ce2a625f9a2fb0d">Roody::MakeNewGroup</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l01635"></a>01635 {
<a name="l01636"></a>01636   TGListTreeItem* item = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a>, name);
<a name="l01637"></a>01637   <span class="keywordflow">if</span> (!item)
<a name="l01638"></a>01638     {
<a name="l01639"></a>01639       item = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem(<a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a>, name);
<a name="l01640"></a>01640       <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[item] = <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a6d4bfa6b698453562f3ea0888b3362ad">A_GROUP</a>;
<a name="l01641"></a>01641       <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.push_back(item); <span class="comment">// fGroupFolders is a vector of TGListTreeItem*</span>
<a name="l01642"></a>01642       <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem(<a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a>);
<a name="l01643"></a>01643       <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l01644"></a>01644       Layout();
<a name="l01645"></a>01645     }
<a name="l01646"></a>01646   <span class="keywordflow">return</span> item;
<a name="l01647"></a>01647 }
<a name="l01648"></a>01648 
<a name="l01649"></a><a class="code" href="classRoody.html#acf5295deafb4aeae80baab8c08827d3c">01649</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#acf5295deafb4aeae80baab8c08827d3c">Roody::AddToGroup</a>(TGListTreeItem* group, ItemVec* items)
<a name="l01650"></a>01650 {
<a name="l01651"></a>01651   <span class="keywordflow">if</span> (group == NULL)
<a name="l01652"></a>01652     group = <a class="code" href="classRoody.html#ae4d661108b7badd29d40649decb5ffdc">PopupNewGroup</a>(100, 100);
<a name="l01653"></a>01653 
<a name="l01654"></a>01654   <span class="keywordflow">if</span> (group)
<a name="l01655"></a>01655     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;items-&gt;size(); i++)
<a name="l01656"></a>01656       <a class="code" href="classRoody.html#aafdf330e50dd7a70980d320e18602103">AddHistogramToGroup</a>(group, (*items)[i]-&gt;GetText(), (*items)[i]);
<a name="l01657"></a>01657 }
<a name="l01658"></a>01658 
<a name="l01659"></a><a class="code" href="classRoody.html#a3d0821224c56ba268e4893d21fb15593">01659</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a3d0821224c56ba268e4893d21fb15593">Roody::DeleteGroup</a>(TGListTreeItem* groupItem)
<a name="l01660"></a>01660 {
<a name="l01661"></a>01661   <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> old = <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>;
<a name="l01662"></a>01662   <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.clear(); <span class="comment">// std::vector does not have an &quot;erase&quot; method</span>
<a name="l01663"></a>01663   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;old.size(); i++)
<a name="l01664"></a>01664     {
<a name="l01665"></a>01665       <span class="keywordflow">if</span> (old[i] != groupItem)
<a name="l01666"></a>01666         <a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.push_back(old[i]);
<a name="l01667"></a>01667     }
<a name="l01668"></a>01668       
<a name="l01669"></a>01669   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a16442d4287e49070a09f9ba37b43d12c">MDeleteItem</a>(groupItem);
<a name="l01670"></a>01670   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l01671"></a>01671 }
<a name="l01672"></a>01672 
<a name="l01673"></a><a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">01673</a> TCanvas* <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">Roody::MakeNewCanvas</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title, <span class="keywordtype">int</span> columns, <span class="keywordtype">int</span> rows, <span class="keywordtype">int</span> topx, <span class="keywordtype">int</span> topy, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l01674"></a>01674 {
<a name="l01675"></a>01675   std::string name;
<a name="l01676"></a>01676 
<a name="l01677"></a>01677   <span class="comment">//printf(&quot;MakeNewCanvas divide %d %d\n&quot;, columns, rows);</span>
<a name="l01678"></a>01678 
<a name="l01679"></a>01679   <span class="keywordflow">if</span> (title == NULL)
<a name="l01680"></a>01680     {
<a name="l01681"></a>01681       std::stringstream ss;
<a name="l01682"></a>01682       ss &lt;&lt; <span class="stringliteral">&quot;canvas&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#a655286d7d4ad8c859e130c58372ded4f">fCanvasCount</a>++;
<a name="l01683"></a>01683       name = ss.str();
<a name="l01684"></a>01684     }
<a name="l01685"></a>01685   <span class="keywordflow">else</span>
<a name="l01686"></a>01686     {
<a name="l01687"></a>01687       name = title;
<a name="l01688"></a>01688     }
<a name="l01689"></a>01689 
<a name="l01690"></a>01690   TCanvas* canvas;
<a name="l01691"></a>01691   <span class="keywordflow">if</span> (width*height==0)
<a name="l01692"></a>01692     canvas = <span class="keyword">new</span> TCanvas(name.c_str(), name.c_str());
<a name="l01693"></a>01693   <span class="keywordflow">else</span>
<a name="l01694"></a>01694     canvas = <span class="keyword">new</span> TCanvas(name.c_str(), name.c_str(), topx, topy, width, height);
<a name="l01695"></a>01695 
<a name="l01696"></a>01696   canvas-&gt;cd();
<a name="l01697"></a>01697 
<a name="l01698"></a>01698   <span class="keywordflow">if</span> (columns*rows==1)
<a name="l01699"></a>01699     {
<a name="l01700"></a>01700       <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21acf7ad8739940023a3eb1d7adaf920d6b">D_PLOT_REPLACE</a>);
<a name="l01701"></a>01701     }
<a name="l01702"></a>01702   <span class="keywordflow">else</span>
<a name="l01703"></a>01703     {
<a name="l01704"></a>01704       <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21accc671086ee62332fd66579bab1babf6">D_PLOT_NEXT</a>);
<a name="l01705"></a>01705       canvas-&gt;Divide(columns, rows );
<a name="l01706"></a>01706       canvas-&gt;cd(columns*rows);
<a name="l01707"></a>01707     }
<a name="l01708"></a>01708 
<a name="l01709"></a>01709   <a class="code" href="classRoody.html#a20d9ee91e39c11deeec2f1cc86aa1518">fCanvasColumns</a>[canvas] = columns;
<a name="l01710"></a>01710   <a class="code" href="classRoody.html#a5a2e7e58f4e6c7365092297a15904c84">fCanvasRows</a>[canvas] = rows;
<a name="l01711"></a>01711 
<a name="l01712"></a>01712   canvas-&gt;Modified();
<a name="l01713"></a>01713   canvas-&gt;Update();
<a name="l01714"></a>01714 
<a name="l01715"></a>01715   canvas-&gt;Connect( <span class="stringliteral">&quot;ProcessedEvent(Int_t,Int_t,Int_t,TObject*)&quot;</span>, <span class="stringliteral">&quot;Roody&quot;</span>,
<a name="l01716"></a>01716                            <span class="keyword">this</span>, <span class="stringliteral">&quot;SelectPad(Int_t,Int_t,Int_t,TObject*)&quot;</span> );
<a name="l01717"></a>01717   <span class="keywordflow">return</span> canvas;
<a name="l01718"></a>01718 }
<a name="l01719"></a>01719 
<a name="l01720"></a><a class="code" href="classRoody.html#aa9e2fcdc014ff538adbd88a7c7b36aab">01720</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aa9e2fcdc014ff538adbd88a7c7b36aab">Roody::DrawItemsOnNewCanvas</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title, <span class="keyword">const</span> ItemVec* items)
<a name="l01721"></a>01721 {
<a name="l01722"></a>01722   <span class="keywordtype">int</span> nItems = items-&gt;size();
<a name="l01723"></a>01723   assert(nItems &gt; 0);
<a name="l01724"></a>01724 
<a name="l01725"></a>01725   <span class="keywordtype">int</span> columns = (int)sqrt(nItems);
<a name="l01726"></a>01726   <span class="keywordtype">int</span> rows = nItems/columns;
<a name="l01727"></a>01727 
<a name="l01728"></a>01728   <span class="keywordflow">while</span> (rows*columns &lt; nItems)
<a name="l01729"></a>01729     rows++;
<a name="l01730"></a>01730 
<a name="l01731"></a>01731   TCanvas *c = <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">MakeNewCanvas</a>(title, columns, rows);
<a name="l01732"></a>01732 
<a name="l01733"></a>01733   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nItems; i++)
<a name="l01734"></a>01734     <a class="code" href="classRoody.html#aebafdb5e945ef9bad3e00bb8ddb95d94">DrawItemOnPad</a>((*items)[i], c-&gt;cd(i+1), <span class="keyword">true</span>);
<a name="l01735"></a>01735 
<a name="l01736"></a>01736   c-&gt;Modified();
<a name="l01737"></a>01737   c-&gt;Update();
<a name="l01738"></a>01738 }
<a name="l01739"></a>01739 
<a name="l01740"></a><a class="code" href="classRoody.html#a545fad209cc208ef83b038cb2904e6e2">01740</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a545fad209cc208ef83b038cb2904e6e2">Roody::DrawGroup</a>(TGListTreeItem* groupItem)
<a name="l01741"></a>01741 {
<a name="l01742"></a>01742   <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l01743"></a>01743 
<a name="l01744"></a>01744   <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(&amp;items, groupItem);
<a name="l01745"></a>01745 
<a name="l01746"></a>01746   <span class="keywordflow">if</span> (items.size() &lt; 1)
<a name="l01747"></a>01747     {
<a name="l01748"></a>01748       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;group is empty&quot;</span>,
<a name="l01749"></a>01749                     kMBIconExclamation, 0, NULL );
<a name="l01750"></a>01750       <span class="keywordflow">return</span>;
<a name="l01751"></a>01751     }
<a name="l01752"></a>01752 
<a name="l01753"></a>01753   std::string title( <span class="stringliteral">&quot;Group canvas: &quot;</span> );
<a name="l01754"></a>01754   title += groupItem-&gt;GetText();
<a name="l01755"></a>01755 
<a name="l01756"></a>01756   <a class="code" href="classRoody.html#aa9e2fcdc014ff538adbd88a7c7b36aab">DrawItemsOnNewCanvas</a>(title.c_str(), &amp;items);
<a name="l01757"></a>01757 }
<a name="l01758"></a>01758 
<a name="l01759"></a><a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">01759</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">Roody::SetRefreshRate</a>(<span class="keywordtype">int</span> newrefresh)
<a name="l01760"></a>01760 {
<a name="l01761"></a>01761   <span class="comment">//printf(&quot;SetRefreshRate %d %d\n&quot;, newrefresh, fUpdatePause);</span>
<a name="l01762"></a>01762 
<a name="l01763"></a>01763   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab7cebdd58038db8ed9232eed0885f35a">M_REFRESH_OFF</a>);
<a name="l01764"></a>01764   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aeeabaac648a5dd3f4740e64fe7e910ca">M_REFRESH_NOW</a>);
<a name="l01765"></a>01765   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2a8e118c967eca9cb2852b16bd53f96d">M_REFRESH_1SEC</a>);
<a name="l01766"></a>01766   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a0d6e4fa4dc1c5915f2c28a3845d18fa8">M_REFRESH_3SEC</a>);
<a name="l01767"></a>01767   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2602291dae541544fe2bc90a6112e2f1">M_REFRESH_5SEC</a>);
<a name="l01768"></a>01768   <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad4960ce1cf74729c4382dea2d62843e7">M_REFRESH_10SEC</a>);
<a name="l01769"></a>01769 
<a name="l01770"></a>01770   <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> = newrefresh;
<a name="l01771"></a>01771 
<a name="l01772"></a>01772   <span class="keywordflow">switch</span>( <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> )
<a name="l01773"></a>01773     {
<a name="l01774"></a>01774     <span class="keywordflow">case</span> 0:  <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab7cebdd58038db8ed9232eed0885f35a">M_REFRESH_OFF</a> );  <span class="keywordflow">break</span>;
<a name="l01775"></a>01775     <span class="keywordflow">case</span> 1:  <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2a8e118c967eca9cb2852b16bd53f96d">M_REFRESH_1SEC</a> ); <span class="keywordflow">break</span>;
<a name="l01776"></a>01776     <span class="keywordflow">case</span> 3:  <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a0d6e4fa4dc1c5915f2c28a3845d18fa8">M_REFRESH_3SEC</a> ); <span class="keywordflow">break</span>;
<a name="l01777"></a>01777     <span class="keywordflow">case</span> 5:  <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2602291dae541544fe2bc90a6112e2f1">M_REFRESH_5SEC</a> ); <span class="keywordflow">break</span>;
<a name="l01778"></a>01778     <span class="keywordflow">case</span> 10: <a class="code" href="classRoody.html#a1d94b444813ea45ad4fc0eb2887c2372">fMenuRefresh</a>-&gt;CheckEntry( <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad4960ce1cf74729c4382dea2d62843e7">M_REFRESH_10SEC</a> ); <span class="keywordflow">break</span>;
<a name="l01779"></a>01779     }
<a name="l01780"></a>01780 
<a name="l01781"></a>01781   <span class="comment">//fRefreshButton-&gt;SetEnabled(kTRUE);</span>
<a name="l01782"></a>01782 
<a name="l01783"></a>01783   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> &gt; 0 )
<a name="l01784"></a>01784     {
<a name="l01785"></a>01785       <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a>)
<a name="l01786"></a>01786         {
<a name="l01787"></a>01787           std::stringstream str;
<a name="l01788"></a>01788           str &lt;&lt; <span class="stringliteral">&quot;  Resume Refresh (&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> &lt;&lt; <span class="stringliteral">&quot;)  &quot;</span>;
<a name="l01789"></a>01789           <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetText( str.str().c_str() );
<a name="l01790"></a>01790           <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetToolTipText( <span class="stringliteral">&quot;click to resume refresh of online histograms&quot;</span>, 250 );
<a name="l01791"></a>01791         }
<a name="l01792"></a>01792       <span class="keywordflow">else</span>
<a name="l01793"></a>01793         {
<a name="l01794"></a>01794           std::stringstream str;
<a name="l01795"></a>01795           str &lt;&lt; <span class="stringliteral">&quot;  Pause Refresh (&quot;</span> &lt;&lt; <a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> &lt;&lt; <span class="stringliteral">&quot;)  &quot;</span>;
<a name="l01796"></a>01796           <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetText( str.str().c_str() );
<a name="l01797"></a>01797           <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetToolTipText( <span class="stringliteral">&quot;click to pause refresh of online histograms&quot;</span>, 250 );
<a name="l01798"></a>01798         }
<a name="l01799"></a>01799     }
<a name="l01800"></a>01800   <span class="keywordflow">else</span>
<a name="l01801"></a>01801     {
<a name="l01802"></a>01802       <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetText( <span class="stringliteral">&quot;     Refresh NOW      &quot;</span> );
<a name="l01803"></a>01803       <a class="code" href="classRoody.html#a50ba72d5913e754d763db1450a61f8fb">fRefreshButton</a>-&gt;SetToolTipText( <span class="stringliteral">&quot;click to refresh online histograms once right now&quot;</span>, 250 );
<a name="l01804"></a>01804     }
<a name="l01805"></a>01805 
<a name="l01806"></a>01806   <a class="code" href="classRoody.html#a07166d648c44522d6f3a393a1247fadb">StartUpdateTimer</a>();
<a name="l01807"></a>01807 }
<a name="l01808"></a>01808 
<a name="l01809"></a><a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">01809</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">Roody::UncheckAllZones</a>()
<a name="l01810"></a>01810 {
<a name="l01811"></a>01811   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a>);
<a name="l01812"></a>01812   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6235c29b5cb7c22336dd92637a3c094c">M_ZONES_12</a>);
<a name="l01813"></a>01813   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad62884d1c6ec8a172baf944fa9e1bc56">M_ZONES_13</a>);
<a name="l01814"></a>01814   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a99b919488f38494e4d467ef10279cb52">M_ZONES_21</a>);
<a name="l01815"></a>01815   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a46fbfd4a6562b6cfd66f40fdb1df283a">M_ZONES_22</a>);
<a name="l01816"></a>01816   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a422c2afa5ff6921fec895849db0b2850">M_ZONES_33</a>);
<a name="l01817"></a>01817   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a76338c9f6b0065665769cc30674f68f4">M_ZONES_44</a>);
<a name="l01818"></a>01818   <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;UnCheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a>);
<a name="l01819"></a>01819 }
<a name="l01820"></a>01820 
<a name="l01821"></a><a class="code" href="classRoody.html#a0faf43417375032465952294f6d23f47">01821</a> Bool_t <a class="code" href="classRoody.html#a0faf43417375032465952294f6d23f47">Roody::ProcessMessage</a>( Long_t msg, Long_t parm1, Long_t parm2 )
<a name="l01822"></a>01822 {
<a name="l01823"></a>01823   <span class="comment">// ProcessMessage overrides the virtual function in TGCompositeFrame</span>
<a name="l01824"></a>01824   <span class="comment">// (which is the base class for TGMainFrame)</span>
<a name="l01825"></a>01825   <span class="comment">//</span>
<a name="l01826"></a>01826   <span class="comment">// to see the predefined message types look at </span>
<a name="l01827"></a>01827   <span class="comment">// $ROOTSYS/include/WidgetMessageTypes.h</span>
<a name="l01828"></a>01828   <span class="comment">//</span>
<a name="l01829"></a>01829 
<a name="l01830"></a>01830   <span class="comment">//printf(&quot;ProcessMessage %d (%d, %d), parm1: %d, parm2: %d\n&quot;, msg, GET_MSG(msg), GET_SUBMSG(msg), parm1, parm2);</span>
<a name="l01831"></a>01831 
<a name="l01832"></a>01832   <span class="keywordflow">switch</span> (GET_MSG(msg))
<a name="l01833"></a>01833   {
<a name="l01834"></a>01834     <span class="keywordflow">case</span> kC_LISTTREE: <span class="comment">// an event in TreeView</span>
<a name="l01835"></a>01835     {
<a name="l01836"></a>01836       <span class="keywordflow">switch</span> (GET_SUBMSG(msg))
<a name="l01837"></a>01837       {
<a name="l01838"></a>01838         <span class="keywordflow">default</span>:
<a name="l01839"></a>01839           <span class="keywordflow">break</span>;
<a name="l01840"></a>01840         <span class="keywordflow">case</span> kCT_ITEMCLICK:  <span class="comment">// single mouse click</span>
<a name="l01841"></a>01841         {
<a name="l01842"></a>01842           <span class="keywordflow">switch</span> (parm1)
<a name="l01843"></a>01843           {
<a name="l01844"></a>01844             <span class="keywordflow">default</span>:
<a name="l01845"></a>01845               <span class="keywordflow">break</span>;
<a name="l01846"></a>01846 
<a name="l01847"></a>01847             <span class="keywordflow">case</span> kButton1: <span class="comment">// left mouse button click</span>
<a name="l01848"></a>01848               <span class="keywordflow">break</span>;
<a name="l01849"></a>01849 
<a name="l01850"></a>01850             <span class="keywordflow">case</span> kButton2:
<a name="l01851"></a>01851               <span class="keywordflow">break</span>;
<a name="l01852"></a>01852 
<a name="l01853"></a>01853             <span class="keywordflow">case</span> kButton3: <span class="comment">// right mouse button click</span>
<a name="l01854"></a>01854             {
<a name="l01855"></a>01855               <span class="comment">// see http://root.cern.ch/root/htmldoc/TGListTree.html#TGListTree:description</span>
<a name="l01856"></a>01856               <span class="keywordtype">int</span> x = parm2&amp;0xFFFF;
<a name="l01857"></a>01857               <span class="keywordtype">int</span> y = (parm2&amp;0xFFFF0000)&gt;&gt;16;
<a name="l01858"></a>01858               <span class="comment">//</span>
<a name="l01859"></a>01859 
<a name="l01860"></a>01860               <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l01861"></a>01861               <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l01862"></a>01862 
<a name="l01863"></a>01863               <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;items.size(); i++)
<a name="l01864"></a>01864                 {
<a name="l01865"></a>01865                   <span class="keywordflow">if</span> (items[i] == <a class="code" href="classRoody.html#a992daab6fccc73ab000819a4486fe283">fTreeItemGroups</a>)
<a name="l01866"></a>01866                     {
<a name="l01867"></a>01867                       <a class="code" href="classRoody.html#a244f1781a79de822f8b1826f2bd46903">PopupTopGroup</a>( x, y );
<a name="l01868"></a>01868                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01869"></a>01869                     }
<a name="l01870"></a>01870 
<a name="l01871"></a>01871                   <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498">Action</a> act = <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[items[i]];
<a name="l01872"></a>01872                   <span class="comment">//printf(&quot;Clicked on selected %s, action %d, parm1: %d\n&quot;, items[i]-&gt;GetText(), act, parm1);</span>
<a name="l01873"></a>01873 
<a name="l01874"></a>01874                   <span class="keywordflow">switch</span> (act)
<a name="l01875"></a>01875                     {
<a name="l01876"></a>01876                     <span class="keywordflow">default</span>:
<a name="l01877"></a>01877                       <span class="keywordflow">break</span>;
<a name="l01878"></a>01878 
<a name="l01879"></a>01879                     <span class="keywordflow">case</span> <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>:
<a name="l01880"></a>01880                       <a class="code" href="classRoody.html#ae0b44c0d728de875cb271e82e5ada792">PopupPlot</a>(x, y);
<a name="l01881"></a>01881                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01882"></a>01882 
<a name="l01883"></a>01883                     <span class="keywordflow">case</span> <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a506cbac1e552dac39438f1257f0a48db">A_FOLDER</a>:
<a name="l01884"></a>01884                       <a class="code" href="classRoody.html#a346a1a52e0a4568bffac68a200fdf2e8">PopupPlotFolder</a>(x, y);
<a name="l01885"></a>01885                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01886"></a>01886 
<a name="l01887"></a>01887                     <span class="keywordflow">case</span> <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a2c9efb4d17b30eba2326dab6d8763d1a">A_SOURCE</a>:
<a name="l01888"></a>01888                       <a class="code" href="classRoody.html#a8bb015140d68040713d28168506b933d">PopupPlotSource</a>(x, y);
<a name="l01889"></a>01889                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01890"></a>01890 
<a name="l01891"></a>01891                     <span class="keywordflow">case</span> <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a6d4bfa6b698453562f3ea0888b3362ad">A_GROUP</a>:
<a name="l01892"></a>01892                       <a class="code" href="classRoody.html#a2982d01308bd9996cb468fec51137caa">PopupGroup</a>(x, y);
<a name="l01893"></a>01893                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01894"></a>01894                     }
<a name="l01895"></a>01895                 }
<a name="l01896"></a>01896               <span class="keywordflow">break</span>;
<a name="l01897"></a>01897             }
<a name="l01898"></a>01898           }
<a name="l01899"></a>01899           <span class="keywordflow">break</span>;
<a name="l01900"></a>01900         }
<a name="l01901"></a>01901         <span class="keywordflow">case</span> kCT_ITEMDBLCLICK:  <span class="comment">// double mouse click</span>
<a name="l01902"></a>01902         {
<a name="l01903"></a>01903           TGListTreeItem* selected = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected();
<a name="l01904"></a>01904           <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[selected] == <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>)
<a name="l01905"></a>01905             {
<a name="l01906"></a>01906               <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l01907"></a>01907               items.push_back(selected);
<a name="l01908"></a>01908               <a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">PlotItems</a>(&amp;items, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21aaab32d0ee521d1abd1ecc6aa907eece7">D_PLOT_DEFAULT</a>);
<a name="l01909"></a>01909               <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01910"></a>01910             }
<a name="l01911"></a>01911           <span class="keywordflow">break</span>;
<a name="l01912"></a>01912         }
<a name="l01913"></a>01913       }
<a name="l01914"></a>01914       <span class="keywordflow">break</span>;
<a name="l01915"></a>01915     }
<a name="l01916"></a>01916     <span class="keywordflow">case</span> kC_COMMAND:  <span class="comment">// </span>
<a name="l01917"></a>01917     {
<a name="l01918"></a>01918       <span class="keywordflow">switch</span> (GET_SUBMSG(msg))
<a name="l01919"></a>01919       {
<a name="l01920"></a>01920         <span class="keywordflow">case</span> kCM_BUTTON:  <span class="comment">// a button was pressed</span>
<a name="l01921"></a>01921         {
<a name="l01922"></a>01922           <span class="keywordflow">switch</span> (parm1)
<a name="l01923"></a>01923           {
<a name="l01924"></a>01924           <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9f2593f86b9fdc684dd06c62c3360ce1">M_REOPEN_BUTTON</a>:
<a name="l01925"></a>01925             printf(<span class="stringliteral">&quot;Reopen all data sources!\n&quot;</span>);
<a name="l01926"></a>01926             <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>.clear();
<a name="l01927"></a>01927             <span class="keywordflow">for</span> (DataSourcesMap::iterator it=<a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>.begin(); it!=<a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>.end(); it++) {
<a name="l01928"></a>01928               it-&gt;second-&gt;Reopen();
<a name="l01929"></a>01929             }
<a name="l01930"></a>01930             <span class="keywordflow">break</span>;
<a name="l01931"></a>01931           <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a8c506e7753f96ae48681b43480ba6118">M_REFRESH_BUTTON</a>:
<a name="l01932"></a>01932             <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> == 0)
<a name="l01933"></a>01933               {
<a name="l01934"></a>01934                 <a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a> = <span class="keyword">false</span>;
<a name="l01935"></a>01935                 <a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">RefreshAll</a>();
<a name="l01936"></a>01936               }
<a name="l01937"></a>01937             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a>)
<a name="l01938"></a>01938               {
<a name="l01939"></a>01939                 <a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a> = <span class="keyword">false</span>;
<a name="l01940"></a>01940                 <a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">RefreshAll</a>();
<a name="l01941"></a>01941                 <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(<a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a>);
<a name="l01942"></a>01942               }
<a name="l01943"></a>01943             <span class="keywordflow">else</span>
<a name="l01944"></a>01944               {
<a name="l01945"></a>01945                 <a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a> = <span class="keyword">true</span>;
<a name="l01946"></a>01946                 <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(<a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a>);
<a name="l01947"></a>01947                 <span class="comment">//StartUpdateTimer();</span>
<a name="l01948"></a>01948               }
<a name="l01949"></a>01949             <span class="keywordflow">break</span>;
<a name="l01950"></a>01950           <span class="keywordflow">default</span>:
<a name="l01951"></a>01951             <span class="keywordflow">break</span>;
<a name="l01952"></a>01952           }
<a name="l01953"></a>01953           <span class="keywordflow">break</span>;
<a name="l01954"></a>01954         }
<a name="l01955"></a>01955         <span class="keywordflow">case</span> kCM_MENUSELECT:
<a name="l01956"></a>01956         {
<a name="l01957"></a>01957           <span class="keywordflow">break</span>;
<a name="l01958"></a>01958         }
<a name="l01959"></a>01959         <span class="keywordflow">case</span> kCM_MENU: <span class="comment">// menu item event</span>
<a name="l01960"></a>01960         {
<a name="l01961"></a>01961           <span class="keywordflow">switch</span> (parm1)
<a name="l01962"></a>01962           {
<a name="l01963"></a>01963             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adc428c721e0af6cdd295ec6596bfde69">M_NEW_CANVAS</a>:
<a name="l01964"></a>01964               <a class="code" href="classRoody.html#af861c1507f04e150620b2fd6a4adb40d">MakeNewCanvas</a>(NULL, <a class="code" href="classRoody.html#aa62435ee7709fcb4d9954a5873c09915">fZoneColumns</a>, <a class="code" href="classRoody.html#a04bbe3023ac4bdaf56817e0d21a8db09">fZoneRows</a>);
<a name="l01965"></a>01965               <span class="keywordflow">break</span>;
<a name="l01966"></a>01966 
<a name="l01967"></a>01967             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a41a44cfa75a105ca401cd4f8963ed8dd">M_REDRAW_CANVAS</a>:
<a name="l01968"></a>01968               <a class="code" href="classRoody.html#a8ad5069ca505521a9e0581e69e0f5b04">RedrawCanvas</a>();
<a name="l01969"></a>01969               <span class="keywordflow">break</span>;
<a name="l01970"></a>01970 
<a name="l01971"></a>01971             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab0713ff83d161ee1a6a47539afa7b248">M_FILE_OPEN</a>:
<a name="l01972"></a>01972               <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot;Opening ...&quot;</span>);
<a name="l01973"></a>01973               <a class="code" href="classRoody.html#a87ebeb82cb802a897c66df3a8df49738">OpenFileDialog</a>();
<a name="l01974"></a>01974               <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot; &quot;</span>);
<a name="l01975"></a>01975               <span class="keywordflow">break</span>;
<a name="l01976"></a>01976 
<a name="l01977"></a>01977             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a44568ed6f2f6b8eeb4ab433d2de9bbd3">M_FILE_ONLINE</a>:
<a name="l01978"></a>01978               <a class="code" href="classRoody.html#a535ef1e18afb6684d16ff1e216b2e981">ConnectServer</a>(NULL);
<a name="l01979"></a>01979               <span class="keywordflow">break</span>;
<a name="l01980"></a>01980 
<a name="l01981"></a>01981             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcbd0542b2259ed2e1c777b95a8b877c">M_FILE_NetDirectory</a>:
<a name="l01982"></a>01982               <a class="code" href="classRoody.html#ae82d729c15fbfb89641e812fcc27d35f">ConnectNetDirectory</a>(NULL);
<a name="l01983"></a>01983               <span class="keywordflow">break</span>;
<a name="l01984"></a>01984 
<a name="l01985"></a>01985             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9820fe7fe9fec2659ce984a61f2dcd5f">M_FILE_SAVE_DEFAULT</a>:
<a name="l01986"></a>01986               <a class="code" href="classRoody.html#aead15bc9d8344b174cfdb718c32b26b9">SaveFile</a>(<span class="stringliteral">&quot;default.xml&quot;</span>);
<a name="l01987"></a>01987               <span class="keywordflow">break</span>;
<a name="l01988"></a>01988 
<a name="l01989"></a>01989             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab16be6b1d288cfc5d84cfe991bd92b9d">M_FILE_SAVE</a>:
<a name="l01990"></a>01990               <a class="code" href="classRoody.html#a3bdfaf4086fcb5b9f39dab207b63a6b7">OpenSaveDialog</a>();
<a name="l01991"></a>01991               <span class="keywordflow">break</span>;
<a name="l01992"></a>01992 
<a name="l01993"></a>01993             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab9736df35f4505167126da084ab53b5e">M_FILE_RESTORE</a>:
<a name="l01994"></a>01994               <a class="code" href="classRoody.html#afe70fea53eba9e5bc30f3b0daa164746">OpenRestoreDialog</a>();
<a name="l01995"></a>01995               <span class="keywordflow">break</span>;
<a name="l01996"></a>01996 
<a name="l01997"></a>01997             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a885aff92e93c9a8525995a7e5ac56364">M_FILE_EXIT</a>:
<a name="l01998"></a>01998               <a class="code" href="classRoody.html#ab51ab27b19c5e26e06197f55f8315459">CloseWindow</a>();
<a name="l01999"></a>01999               <span class="keywordflow">break</span>;
<a name="l02000"></a>02000 
<a name="l02001"></a>02001             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a04ec14930df18cefe7966e65e9d093b3">M_HELP_ABOUT</a>:
<a name="l02002"></a>02002               <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;About Roody&quot;</span>,
<a name="l02003"></a>02003               <span class="stringliteral">&quot;Roody is an application based solely on CERN-ROOT for histogram display.\nIt is meant for display of .root files and .hbook files.\nRunning this application in conjunction with either the Midas or ROME analyzer\nwill allow you to visualize online data retrieved through a socket port.\n\nThis is Roody svn revision $Id: Roody.cxx 245 2012-06-14 18:14:25Z olchansk $&quot;</span>, kMBIconQuestion, kMBOk, NULL );
<a name="l02004"></a>02004               <span class="keywordflow">break</span>;
<a name="l02005"></a>02005 
<a name="l02006"></a>02006             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a8b826ed5e043ba2ed70270f8edf96761">M_HELP_CONTENTS</a>:
<a name="l02007"></a>02007             {
<a name="l02008"></a>02008               <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot;HELP CONTENTS -- Not yet available&quot;</span>);
<a name="l02009"></a>02009               std::cout &lt;&lt; <span class="stringliteral">&quot;HELP CONTENTS -- Not yet available&quot;</span> &lt;&lt; std::endl;
<a name="l02010"></a>02010               <span class="keywordflow">break</span>;
<a name="l02011"></a>02011             }
<a name="l02012"></a>02012             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab7cebdd58038db8ed9232eed0885f35a">M_REFRESH_OFF</a>:
<a name="l02013"></a>02013             {
<a name="l02014"></a>02014               <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(0); 
<a name="l02015"></a>02015               <span class="keywordflow">break</span>;
<a name="l02016"></a>02016             }
<a name="l02017"></a>02017             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aeeabaac648a5dd3f4740e64fe7e910ca">M_REFRESH_NOW</a>:
<a name="l02018"></a>02018             {
<a name="l02019"></a>02019               <a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">RefreshAll</a>();
<a name="l02020"></a>02020               <span class="keywordflow">break</span>;
<a name="l02021"></a>02021             }
<a name="l02022"></a>02022             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2a8e118c967eca9cb2852b16bd53f96d">M_REFRESH_1SEC</a>:
<a name="l02023"></a>02023             {
<a name="l02024"></a>02024               <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(1); 
<a name="l02025"></a>02025               <span class="keywordflow">break</span>;
<a name="l02026"></a>02026             }
<a name="l02027"></a>02027             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a0d6e4fa4dc1c5915f2c28a3845d18fa8">M_REFRESH_3SEC</a>:
<a name="l02028"></a>02028             {
<a name="l02029"></a>02029               <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(3); 
<a name="l02030"></a>02030               <span class="keywordflow">break</span>;
<a name="l02031"></a>02031             }
<a name="l02032"></a>02032             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a2602291dae541544fe2bc90a6112e2f1">M_REFRESH_5SEC</a>:
<a name="l02033"></a>02033             {
<a name="l02034"></a>02034               <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(5); 
<a name="l02035"></a>02035               <span class="keywordflow">break</span>;
<a name="l02036"></a>02036             }
<a name="l02037"></a>02037             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad4960ce1cf74729c4382dea2d62843e7">M_REFRESH_10SEC</a>:
<a name="l02038"></a>02038             {
<a name="l02039"></a>02039               <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(10); 
<a name="l02040"></a>02040               <span class="keywordflow">break</span>;
<a name="l02041"></a>02041             }
<a name="l02042"></a>02042             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aa384c4087965f69fc1de1af868917e4e">M_REFRESH_DIALOG</a>:
<a name="l02043"></a>02043             {
<a name="l02044"></a>02044               <a class="code" href="classRoody.html#aa3421e10a9f4a8b7ad20bdda66964ae7">OpenRefreshDialog</a>();
<a name="l02045"></a>02045               <span class="keywordflow">break</span>;
<a name="l02046"></a>02046             }
<a name="l02047"></a>02047             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a>:
<a name="l02048"></a>02048             {
<a name="l02049"></a>02049               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02050"></a>02050               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6acab8976898d7e1380ad5e4971a1a1691">M_ZONES_11</a>);
<a name="l02051"></a>02051               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 1, 1 );
<a name="l02052"></a>02052               <span class="keywordflow">break</span>;
<a name="l02053"></a>02053             }
<a name="l02054"></a>02054             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6235c29b5cb7c22336dd92637a3c094c">M_ZONES_12</a>:
<a name="l02055"></a>02055             {
<a name="l02056"></a>02056               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02057"></a>02057               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6235c29b5cb7c22336dd92637a3c094c">M_ZONES_12</a>);
<a name="l02058"></a>02058               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 1, 2 );
<a name="l02059"></a>02059               <span class="keywordflow">break</span>;
<a name="l02060"></a>02060             }
<a name="l02061"></a>02061             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad62884d1c6ec8a172baf944fa9e1bc56">M_ZONES_13</a>:
<a name="l02062"></a>02062             {
<a name="l02063"></a>02063               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02064"></a>02064               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad62884d1c6ec8a172baf944fa9e1bc56">M_ZONES_13</a>);
<a name="l02065"></a>02065               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 1, 3 );
<a name="l02066"></a>02066               <span class="keywordflow">break</span>;
<a name="l02067"></a>02067             }
<a name="l02068"></a>02068             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a99b919488f38494e4d467ef10279cb52">M_ZONES_21</a>:
<a name="l02069"></a>02069             {
<a name="l02070"></a>02070               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02071"></a>02071               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a99b919488f38494e4d467ef10279cb52">M_ZONES_21</a>);
<a name="l02072"></a>02072               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 2, 1 );
<a name="l02073"></a>02073               <span class="keywordflow">break</span>;
<a name="l02074"></a>02074             }
<a name="l02075"></a>02075             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a46fbfd4a6562b6cfd66f40fdb1df283a">M_ZONES_22</a>:
<a name="l02076"></a>02076             {
<a name="l02077"></a>02077               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02078"></a>02078               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a46fbfd4a6562b6cfd66f40fdb1df283a">M_ZONES_22</a>);
<a name="l02079"></a>02079               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 2, 2 );
<a name="l02080"></a>02080               <span class="keywordflow">break</span>;
<a name="l02081"></a>02081             }
<a name="l02082"></a>02082             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a422c2afa5ff6921fec895849db0b2850">M_ZONES_33</a>:
<a name="l02083"></a>02083             {
<a name="l02084"></a>02084               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02085"></a>02085               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a422c2afa5ff6921fec895849db0b2850">M_ZONES_33</a>);
<a name="l02086"></a>02086               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 3, 3 );
<a name="l02087"></a>02087               <span class="keywordflow">break</span>;
<a name="l02088"></a>02088             }
<a name="l02089"></a>02089             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a76338c9f6b0065665769cc30674f68f4">M_ZONES_44</a>:
<a name="l02090"></a>02090             {
<a name="l02091"></a>02091               <a class="code" href="classRoody.html#ad0c58fa023ce6ac08530e7719782525b">UncheckAllZones</a>();
<a name="l02092"></a>02092               <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;CheckEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a76338c9f6b0065665769cc30674f68f4">M_ZONES_44</a>);
<a name="l02093"></a>02093               <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( 4, 4 );
<a name="l02094"></a>02094               <span class="keywordflow">break</span>;
<a name="l02095"></a>02095             }
<a name="l02096"></a>02096             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a>:
<a name="l02097"></a>02097             {
<a name="l02098"></a>02098               std::string name = <a class="code" href="classRoody.html#a937dc50c484d341aae57f37d35d9a599">fMenuZones</a>-&gt;GetEntry(<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a797758eeaa3aa3690d09ad0dc5afcfca">M_ZONES_USER</a>)-&gt;GetName();
<a name="l02099"></a>02099               <span class="keywordflow">if</span> (name.find(<span class="stringliteral">&quot;user&quot;</span>) == 0)
<a name="l02100"></a>02100                 <a class="code" href="classRoody.html#af44aa6b92487b4440d55ece092706fb5">OpenZoneDialog</a>();
<a name="l02101"></a>02101               <span class="keywordflow">else</span>
<a name="l02102"></a>02102                 {
<a name="l02103"></a>02103                   std::size_t x = name.find(<span class="stringliteral">&quot;x&quot;</span>);
<a name="l02104"></a>02104                   <span class="keywordtype">int</span> cols = atoi(name.substr(0,x).c_str());
<a name="l02105"></a>02105                   <span class="keywordtype">int</span> rows = atoi(name.substr(x+1,name.size()-x-1).c_str());
<a name="l02106"></a>02106                   <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( cols, rows );
<a name="l02107"></a>02107                 }
<a name="l02108"></a>02108               <a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">SetupZonesMenu</a>();
<a name="l02109"></a>02109               <span class="keywordflow">break</span>;
<a name="l02110"></a>02110             }
<a name="l02111"></a>02111             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad9914a541f08fb5cf8d99a10e3f4d84c">M_ZONES_DIALOG</a>:
<a name="l02112"></a>02112             {
<a name="l02113"></a>02113               <a class="code" href="classRoody.html#af44aa6b92487b4440d55ece092706fb5">OpenZoneDialog</a>();
<a name="l02114"></a>02114               <a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">SetupZonesMenu</a>();
<a name="l02115"></a>02115               <span class="keywordflow">break</span>;
<a name="l02116"></a>02116             }
<a name="l02117"></a>02117             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6d2be35c15eeba9aea775156e0b95d18">M_PLOT_NEW</a>:
<a name="l02118"></a>02118               <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a724c013a65921e1e083c3abc1f3b0cb9">D_PLOT_NEW</a>);
<a name="l02119"></a>02119               <span class="keywordflow">break</span>;
<a name="l02120"></a>02120             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aedfacbcd0261c41d2c5d6245c5eaddbc">M_PLOT_SAME</a>:
<a name="l02121"></a>02121               <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a432f1770f5630286dc842b6adcb36494">D_PLOT_SAME</a>);
<a name="l02122"></a>02122               <span class="keywordflow">break</span>;
<a name="l02123"></a>02123             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adfe7c86a5b7687008f287e0c8132b4b3">M_PLOT_REPLACE</a>:
<a name="l02124"></a>02124               <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21acf7ad8739940023a3eb1d7adaf920d6b">D_PLOT_REPLACE</a>);
<a name="l02125"></a>02125               <span class="keywordflow">break</span>;
<a name="l02126"></a>02126             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6e60455196df9ea3cf0ec06e89049ea1">M_PLOT_NEXT</a>:
<a name="l02127"></a>02127               <a class="code" href="classRoody.html#a94778428d8c13d8b7e9599e5aa8ffd2d">SetDestination</a>(<a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21accc671086ee62332fd66579bab1babf6">D_PLOT_NEXT</a>);
<a name="l02128"></a>02128               <span class="keywordflow">break</span>;
<a name="l02129"></a>02129 
<a name="l02130"></a>02130             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a9bcdf41d55ee59875aee788dd4991ac3">C_PLOT_FOLDER</a>:
<a name="l02131"></a>02131               {
<a name="l02132"></a>02132                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02133"></a>02133                 <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(&amp;items, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02134"></a>02134                 <a class="code" href="classRoody.html#aa9e2fcdc014ff538adbd88a7c7b36aab">DrawItemsOnNewCanvas</a>(NULL, &amp;items);
<a name="l02135"></a>02135                 <span class="keywordflow">break</span>;
<a name="l02136"></a>02136               }
<a name="l02137"></a>02137             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a4cf760dbda7cb5c08a60f0eeabf5826c">C_PLOT_NEW</a>:
<a name="l02138"></a>02138               {
<a name="l02139"></a>02139                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02140"></a>02140                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02141"></a>02141                 <a class="code" href="classRoody.html#aa9e2fcdc014ff538adbd88a7c7b36aab">DrawItemsOnNewCanvas</a>(NULL, &amp;items);
<a name="l02142"></a>02142                 <span class="keywordflow">break</span>;
<a name="l02143"></a>02143               }
<a name="l02144"></a>02144             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a6d6b4aa7424a2f20a578dbce075f4ab9">C_PLOT_REPLACE</a>:
<a name="l02145"></a>02145               {
<a name="l02146"></a>02146                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02147"></a>02147                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02148"></a>02148                 <a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">PlotItems</a>(&amp;items, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21acf7ad8739940023a3eb1d7adaf920d6b">D_PLOT_REPLACE</a>);
<a name="l02149"></a>02149                 <span class="keywordflow">break</span>;
<a name="l02150"></a>02150               }
<a name="l02151"></a>02151             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ad0ff6fad5c3ecf5e1c4a4e53b0ff2634">C_PLOT_SAME</a>:
<a name="l02152"></a>02152               {
<a name="l02153"></a>02153                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02154"></a>02154                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02155"></a>02155                 <a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">PlotItems</a>(&amp;items, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21a432f1770f5630286dc842b6adcb36494">D_PLOT_SAME</a>);
<a name="l02156"></a>02156                 <span class="keywordflow">break</span>;
<a name="l02157"></a>02157               }
<a name="l02158"></a>02158             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a11b55cd308c7a775c0898b2fb1514904">C_PLOT_NEXT</a>:
<a name="l02159"></a>02159               {
<a name="l02160"></a>02160                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02161"></a>02161                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02162"></a>02162                 <a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">PlotItems</a>(&amp;items, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21accc671086ee62332fd66579bab1babf6">D_PLOT_NEXT</a>);
<a name="l02163"></a>02163                 <span class="keywordflow">break</span>;
<a name="l02164"></a>02164               }
<a name="l02165"></a>02165             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6af54452d4eea7bedda490d0b9d52a1ddd">C_CLOSE_SOURCE</a>:
<a name="l02166"></a>02166               <a class="code" href="classRoody.html#ab239d4f1ca9f8bd28e8ddb0fcf6924c2">CloseSource</a>(<a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02167"></a>02167               <span class="keywordflow">break</span>;
<a name="l02168"></a>02168             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a37a8ad194602e270ed2cd5ed9cab0b59">C_REOPEN_SOURCE</a>:
<a name="l02169"></a>02169               <a class="code" href="classRoody.html#ae4c8d9e2ca4f792ac19674fc54da803e">ReopenSource</a>(<a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02170"></a>02170               <span class="keywordflow">break</span>;
<a name="l02171"></a>02171 
<a name="l02172"></a>02172             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a3425563903b1ac5eae2cd74c0b071b65">C_NEW_GROUP</a>:
<a name="l02173"></a>02173               <a class="code" href="classRoody.html#ae4d661108b7badd29d40649decb5ffdc">PopupNewGroup</a>(100, 100);
<a name="l02174"></a>02174               <span class="keywordflow">break</span>;
<a name="l02175"></a>02175             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ab1c05a0a01835d6adc70529d9d247012">C_DRAW_GROUP</a>:
<a name="l02176"></a>02176               <a class="code" href="classRoody.html#a545fad209cc208ef83b038cb2904e6e2">DrawGroup</a>(<a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02177"></a>02177               <span class="keywordflow">break</span>;
<a name="l02178"></a>02178             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6ae0989aaea8a99b4a2f495960449f0624">C_DELETE_GROUP</a>:
<a name="l02179"></a>02179               <a class="code" href="classRoody.html#a3d0821224c56ba268e4893d21fb15593">DeleteGroup</a>(<a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02180"></a>02180               <span class="keywordflow">break</span>;
<a name="l02181"></a>02181             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcecad145d037951e3e5d2e4290ab8b0">C_ADD_TO_GROUP</a>:
<a name="l02182"></a>02182               {
<a name="l02183"></a>02183                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02184"></a>02184                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02185"></a>02185                 <a class="code" href="classRoody.html#acf5295deafb4aeae80baab8c08827d3c">AddToGroup</a>(NULL, &amp;items);
<a name="l02186"></a>02186                 <span class="keywordflow">break</span>;
<a name="l02187"></a>02187               }
<a name="l02188"></a>02188             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a1e4747a79faddbdc172e38d680c8fa1b">C_RESET_GROUP</a>:
<a name="l02189"></a>02189               {
<a name="l02190"></a>02190                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02191"></a>02191                 <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(&amp;items, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02192"></a>02192                 <a class="code" href="classRoody.html#a7d179c67bbdfd0d6766765e2a246fa19">ResetMultiple</a>(&amp;items);
<a name="l02193"></a>02193                 <span class="keywordflow">break</span>;
<a name="l02194"></a>02194               }
<a name="l02195"></a>02195             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6aa53741abb7faf5e8b285fdbb428202a3">C_RESET_OBJECT</a>:
<a name="l02196"></a>02196               {
<a name="l02197"></a>02197                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02198"></a>02198                 <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02199"></a>02199                 <a class="code" href="classRoody.html#a7d179c67bbdfd0d6766765e2a246fa19">ResetMultiple</a>(&amp;items);
<a name="l02200"></a>02200                 <span class="keywordflow">break</span>;
<a name="l02201"></a>02201               }
<a name="l02202"></a>02202             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a826180105b35c6f6fa90eab7ac97c0b7">C_RESET_FOLDER</a>:
<a name="l02203"></a>02203               {
<a name="l02204"></a>02204                 <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02205"></a>02205                 <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(&amp;items, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;GetSelected());
<a name="l02206"></a>02206                 <a class="code" href="classRoody.html#a7d179c67bbdfd0d6766765e2a246fa19">ResetMultiple</a>(&amp;items);
<a name="l02207"></a>02207                 <span class="keywordflow">break</span>;
<a name="l02208"></a>02208               }
<a name="l02209"></a>02209             <span class="keywordflow">case</span> <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6a11a02455997ac3e87aef6640cfd2b641">M_RESET_ALL</a>:
<a name="l02210"></a>02210               <a class="code" href="classRoody.html#a91cd43c209dbe69016e8e2a5f261cf44">ResetAll</a>();
<a name="l02211"></a>02211               <span class="keywordflow">break</span>;
<a name="l02212"></a>02212 
<a name="l02213"></a>02213             <span class="keywordflow">default</span>:
<a name="l02214"></a>02214               <span class="keywordflow">if</span> (parm1%1000 == <a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcecad145d037951e3e5d2e4290ab8b0">C_ADD_TO_GROUP</a>)
<a name="l02215"></a>02215                 {
<a name="l02216"></a>02216                   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> igroup = (parm1-<a class="code" href="classRoody.html#a4b138d7c53dde09cfbe6e2436d0b3ad6adcecad145d037951e3e5d2e4290ab8b0">C_ADD_TO_GROUP</a>)/1000 - 1;
<a name="l02217"></a>02217 
<a name="l02218"></a>02218                   <span class="keywordflow">if</span> (igroup&gt;=0 &amp;&amp; igroup&lt;<a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>.size())
<a name="l02219"></a>02219                     {
<a name="l02220"></a>02220                       <a class="code" href="classRoody.html#a30e74959b7c8f262000dbdddb19a80bb">ItemVec</a> items;
<a name="l02221"></a>02221                       <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a959170a63b6fb0a2c17944f6316743ce">GetSelectedItems</a>(items);
<a name="l02222"></a>02222                       <a class="code" href="classRoody.html#acf5295deafb4aeae80baab8c08827d3c">AddToGroup</a>(<a class="code" href="classRoody.html#a61aeb013dc199a8ed4fd57e140adab6a">fGroupFolders</a>[igroup], &amp;items);
<a name="l02223"></a>02223                       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02224"></a>02224                     }
<a name="l02225"></a>02225                 }
<a name="l02226"></a>02226 
<a name="l02227"></a>02227               <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;Unimplemented menu command&quot;</span>, kMBIconExclamation, 0, NULL );
<a name="l02228"></a>02228               <span class="keywordflow">break</span>;
<a name="l02229"></a>02229           }
<a name="l02230"></a>02230           <span class="keywordflow">break</span>;
<a name="l02231"></a>02231         }
<a name="l02232"></a>02232         <span class="keywordflow">default</span>:
<a name="l02233"></a>02233           <span class="keywordflow">break</span>;
<a name="l02234"></a>02234       }
<a name="l02235"></a>02235       <span class="keywordflow">break</span>;
<a name="l02236"></a>02236     }
<a name="l02237"></a>02237   }
<a name="l02238"></a>02238   <span class="keywordflow">return</span> kTRUE;
<a name="l02239"></a>02239 }
<a name="l02240"></a>02240 
<a name="l02241"></a><a class="code" href="classRoody.html#aafdf330e50dd7a70980d320e18602103">02241</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aafdf330e50dd7a70980d320e18602103">Roody::AddHistogramToGroup</a>(TGListTreeItem *groupItem, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, TGListTreeItem *origItem )
<a name="l02242"></a>02242 {
<a name="l02243"></a>02243   TGListTreeItem *newitem = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem(groupItem, name);
<a name="l02244"></a>02244   <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[newitem] = <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>;
<a name="l02245"></a>02245   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem(groupItem);
<a name="l02246"></a>02246   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l02247"></a>02247   Layout();
<a name="l02248"></a>02248   <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[newitem] = <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[origItem];
<a name="l02249"></a>02249 }
<a name="l02250"></a>02250 
<a name="l02251"></a><a class="code" href="classRoody.html#ae4c8d9e2ca4f792ac19674fc54da803e">02251</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ae4c8d9e2ca4f792ac19674fc54da803e">Roody::ReopenSource</a>(TGListTreeItem* item)
<a name="l02252"></a>02252 {
<a name="l02253"></a>02253   <span class="keyword">const</span> <span class="keywordtype">char</span>* name = item-&gt;GetText();
<a name="l02254"></a>02254   DataSourceBase *d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[name];
<a name="l02255"></a>02255   <span class="keywordflow">if</span> (d)
<a name="l02256"></a>02256     {
<a name="l02257"></a>02257       std::string str;
<a name="l02258"></a>02258       str += <span class="stringliteral">&quot;Reopening &quot;</span>;
<a name="l02259"></a>02259       str += name;
<a name="l02260"></a>02260       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(str.c_str());
<a name="l02261"></a>02261       <a class="code" href="Roody_8cxx.html#a82dfd284f9a1cee6b3b751ed52c8fcc2">gObjectCache</a>.clear();
<a name="l02262"></a>02262       d-&gt;Reopen();
<a name="l02263"></a>02263       <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, item-&gt;GetParent(), <span class="keyword">true</span>);
<a name="l02264"></a>02264       str  = <span class="stringliteral">&quot;Connected to &quot;</span>;
<a name="l02265"></a>02265       str += name;
<a name="l02266"></a>02266       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(str.c_str());
<a name="l02267"></a>02267     }
<a name="l02268"></a>02268 }
<a name="l02269"></a>02269 
<a name="l02270"></a><a class="code" href="classRoody.html#ab239d4f1ca9f8bd28e8ddb0fcf6924c2">02270</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ab239d4f1ca9f8bd28e8ddb0fcf6924c2">Roody::CloseSource</a>(TGListTreeItem* item)
<a name="l02271"></a>02271 {
<a name="l02272"></a>02272   <span class="keyword">const</span> <span class="keywordtype">char</span>* name = item-&gt;GetText();
<a name="l02273"></a>02273   DataSourceBase *d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[name];
<a name="l02274"></a>02274   <span class="keywordflow">if</span> (d)
<a name="l02275"></a>02275     {
<a name="l02276"></a>02276       std::string str;
<a name="l02277"></a>02277       str += <span class="stringliteral">&quot;Closing &quot;</span>;
<a name="l02278"></a>02278       str += name;
<a name="l02279"></a>02279       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(str.c_str());
<a name="l02280"></a>02280       d-&gt;Close();
<a name="l02281"></a>02281       <span class="keyword">delete</span> d;
<a name="l02282"></a>02282       <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[name] = NULL;
<a name="l02283"></a>02283     }
<a name="l02284"></a>02284 
<a name="l02285"></a>02285   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;<a class="code" href="classMTGListTree.html#a16442d4287e49070a09f9ba37b43d12c">MDeleteItem</a>(item);
<a name="l02286"></a>02286   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l02287"></a>02287   Layout();
<a name="l02288"></a>02288 }
<a name="l02289"></a>02289 
<a name="l02290"></a><a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">02290</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">Roody::GetFolderItems</a>(ItemVec* items, TGListTreeItem *folder)
<a name="l02291"></a>02291 {
<a name="l02292"></a>02292   <span class="comment">// fill &quot;items&quot; with all items in folder &quot;folder&quot;, including subfolders</span>
<a name="l02293"></a>02293 
<a name="l02294"></a>02294   <span class="keywordflow">for</span> (TGListTreeItem *item = folder-&gt;GetFirstChild(); item != NULL; item = item-&gt;GetNextSibling())
<a name="l02295"></a>02295     {
<a name="l02296"></a>02296       <span class="keywordflow">if</span> (<a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[item] == <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>) <span class="comment">// is it a sub-folder?</span>
<a name="l02297"></a>02297         items-&gt;push_back(item);
<a name="l02298"></a>02298       <span class="keywordflow">else</span>
<a name="l02299"></a>02299         <a class="code" href="classRoody.html#a00d2db71af5293a022103604a721e72e">GetFolderItems</a>(items, item);
<a name="l02300"></a>02300     }
<a name="l02301"></a>02301 }
<a name="l02302"></a>02302 
<a name="l02303"></a><a class="code" href="classRoody.html#a91cd43c209dbe69016e8e2a5f261cf44">02303</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a91cd43c209dbe69016e8e2a5f261cf44">Roody::ResetAll</a>()
<a name="l02304"></a>02304 {
<a name="l02305"></a>02305   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>.size(); i++)
<a name="l02306"></a>02306     {
<a name="l02307"></a>02307       DataSourceBase* d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[<a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>[i]];
<a name="l02308"></a>02308       <span class="keywordflow">if</span> (d)
<a name="l02309"></a>02309         d-&gt;ResetAll();
<a name="l02310"></a>02310     }
<a name="l02311"></a>02311 
<a name="l02312"></a>02312   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classRoody.html#a9550c2c6ac4c5099ac70b98d670e6031">fRootFiles</a>.size(); i++)
<a name="l02313"></a>02313     {
<a name="l02314"></a>02314       DataSourceBase* d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[<a class="code" href="classRoody.html#a9550c2c6ac4c5099ac70b98d670e6031">fRootFiles</a>[i]];
<a name="l02315"></a>02315       <span class="keywordflow">if</span> (d)
<a name="l02316"></a>02316         d-&gt;ResetAll();
<a name="l02317"></a>02317     }
<a name="l02318"></a>02318 
<a name="l02319"></a>02319   <a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">RefreshAll</a>();
<a name="l02320"></a>02320 }
<a name="l02321"></a>02321 
<a name="l02322"></a><a class="code" href="classRoody.html#a7d179c67bbdfd0d6766765e2a246fa19">02322</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a7d179c67bbdfd0d6766765e2a246fa19">Roody::ResetMultiple</a>(<span class="keyword">const</span> ItemVec* items)
<a name="l02323"></a>02323 {
<a name="l02324"></a>02324   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;items-&gt;size(); i++)
<a name="l02325"></a>02325     <a class="code" href="classRoody.html#a21097a17d3513dd05bb4813643d4eb3f">ResetItem</a>((*items)[i]);
<a name="l02326"></a>02326 }
<a name="l02327"></a>02327 
<a name="l02328"></a><a class="code" href="classRoody.html#a21097a17d3513dd05bb4813643d4eb3f">02328</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a21097a17d3513dd05bb4813643d4eb3f">Roody::ResetItem</a>(TGListTreeItem* item)
<a name="l02329"></a>02329 {
<a name="l02330"></a>02330   ObjectPath src = <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[item];
<a name="l02331"></a>02331   <span class="keywordflow">if</span> (src.size() &lt; 1)
<a name="l02332"></a>02332     <span class="keywordflow">return</span>;
<a name="l02333"></a>02333 
<a name="l02334"></a>02334   DataSourceBase* d = <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[src.front()];
<a name="l02335"></a>02335   <span class="keywordflow">if</span> (d)
<a name="l02336"></a>02336     d-&gt;ResetObject(src);
<a name="l02337"></a>02337 }
<a name="l02338"></a>02338 
<a name="l02339"></a><a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">02339</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aa64de3d1055473189bb2c783c1d5875f">Roody::PlotItems</a>(<span class="keyword">const</span> ItemVec* items, <a class="code" href="classRoody.html#adc82e0265971335ba2a7e88a1f36ef21">EDrawDestination</a> dest)
<a name="l02340"></a>02340 {
<a name="l02341"></a>02341   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;items-&gt;size(); i++)
<a name="l02342"></a>02342     <a class="code" href="classRoody.html#ae5e9d0de70d56bc4fc2c3ee56ee4a2b7">DrawItem</a>((*items)[i], dest);
<a name="l02343"></a>02343   Layout();
<a name="l02344"></a>02344 }
<a name="l02345"></a>02345 
<a name="l02346"></a><a class="code" href="classRoody.html#ab51ab27b19c5e26e06197f55f8315459">02346</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ab51ab27b19c5e26e06197f55f8315459">Roody::CloseWindow</a>()
<a name="l02347"></a>02347 {
<a name="l02348"></a>02348   <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;Stop();
<a name="l02349"></a>02349   TQObject::Disconnect(<a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>);
<a name="l02350"></a>02350   TQObject::Disconnect(<span class="keyword">this</span>);
<a name="l02351"></a>02351   gApplication-&gt;Terminate(0);
<a name="l02352"></a>02352 }
<a name="l02353"></a>02353 
<a name="l02354"></a><a class="code" href="classRoody.html#a779ae49b4fdeeb1a0ce60720fc641032">02354</a> <span class="keywordtype">bool</span> <a class="code" href="classRoody.html#a779ae49b4fdeeb1a0ce60720fc641032">Roody::OpenFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename)
<a name="l02355"></a>02355 {
<a name="l02356"></a>02356   <span class="keywordflow">if</span> (strstr(filename,<span class="stringliteral">&quot;.root&quot;</span>))
<a name="l02357"></a>02357     <span class="keywordflow">return</span> <a class="code" href="classRoody.html#a1e24dd6677e49764770a4a72a33aaa89">OpenRootFile</a>(filename);
<a name="l02358"></a>02358 <span class="preprocessor">#ifdef HAVE_HBOOK</span>
<a name="l02359"></a>02359 <span class="preprocessor"></span>  <span class="keywordflow">else</span>
<a name="l02360"></a>02360     <span class="keywordflow">return</span> <a class="code" href="classRoody.html#a5f03fdc9c7abe3a565da4be5d5e7251c">OpenHbookFile</a>(filename);
<a name="l02361"></a>02361 <span class="preprocessor">#endif</span>
<a name="l02362"></a>02362 <span class="preprocessor"></span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02363"></a>02363 }
<a name="l02364"></a>02364 
<a name="l02365"></a>02365 
<a name="l02366"></a><a class="code" href="classRoody.html#a87ebeb82cb802a897c66df3a8df49738">02366</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a87ebeb82cb802a897c66df3a8df49738">Roody::OpenFileDialog</a>()
<a name="l02367"></a>02367 {
<a name="l02368"></a>02368   TGFileInfo fileinfo;
<a name="l02369"></a>02369   fileinfo.fFilename = 0;
<a name="l02370"></a>02370 <span class="preprocessor">#ifdef HAVE_HBOOK</span>
<a name="l02371"></a>02371 <span class="preprocessor"></span>  <span class="keywordtype">char</span> <span class="keyword">const</span> *fileTypes[] = {<span class="stringliteral">&quot;Root files&quot;</span>,<span class="stringliteral">&quot;*.root&quot;</span>,<span class="stringliteral">&quot;Hbook files&quot;</span>,<span class="stringliteral">&quot;*.hbook&quot;</span>,<span class="stringliteral">&quot;Any&quot;</span>,<span class="stringliteral">&quot;*&quot;</span>,0,0};
<a name="l02372"></a>02372 <span class="preprocessor">#else</span>
<a name="l02373"></a>02373 <span class="preprocessor"></span>  <span class="keywordtype">char</span> <span class="keyword">const</span> *fileTypes[] = {<span class="stringliteral">&quot;Root files&quot;</span>,<span class="stringliteral">&quot;*.root&quot;</span>,<span class="stringliteral">&quot;Any&quot;</span>,<span class="stringliteral">&quot;*&quot;</span>,0,0};
<a name="l02374"></a>02374 <span class="preprocessor">#endif</span>
<a name="l02375"></a>02375 <span class="preprocessor"></span>  fileinfo.fFileTypes = fileTypes;
<a name="l02376"></a>02376 
<a name="l02377"></a>02377   <span class="keyword">new</span> TGFileDialog( fClient-&gt;GetRoot(), <span class="keyword">this</span>, kFDOpen, &amp;fileinfo );
<a name="l02378"></a>02378 
<a name="l02379"></a>02379   <span class="keywordflow">if</span> (fileinfo.fFilename)
<a name="l02380"></a>02380     <a class="code" href="classRoody.html#a779ae49b4fdeeb1a0ce60720fc641032">OpenFile</a>(fileinfo.fFilename);
<a name="l02381"></a>02381   <span class="keywordflow">else</span>
<a name="l02382"></a>02382     <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot;NO FILE SELECTED&quot;</span>);
<a name="l02383"></a>02383 }
<a name="l02384"></a>02384 
<a name="l02385"></a><a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">02385</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">Roody::AddDataSource</a>(DataSourceBase* d, <a class="code" href="classMTGListTree.html">MTGListTree</a>* tree, TGListTreeItem* branch, <span class="keywordtype">bool</span> reopen)
<a name="l02386"></a>02386 {
<a name="l02387"></a>02387   <a class="code" href="Roody_8cxx.html#a9af39400d262b56f7e186b62b786c424">gDataSources</a>[d-&gt;GetName()] = d;
<a name="l02388"></a>02388   std::string s = d-&gt;toString();
<a name="l02389"></a>02389   <span class="comment">//printf(&quot;Data source: [%s]\n&quot;, s.c_str());</span>
<a name="l02390"></a>02390 
<a name="l02391"></a>02391   ObjectList list = d-&gt;GetList();
<a name="l02392"></a>02392 
<a name="l02393"></a>02393   <span class="keywordtype">bool</span> first = <span class="keyword">true</span>;
<a name="l02394"></a>02394   <span class="keywordtype">int</span> n = list.size();
<a name="l02395"></a>02395   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;n; i++)
<a name="l02396"></a>02396     {
<a name="l02397"></a>02397       ObjectPath p = list[i];
<a name="l02398"></a>02398       <span class="keywordtype">int</span> np = p.size();
<a name="l02399"></a>02399       TGListTreeItem *xitem = branch;
<a name="l02400"></a>02400       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;np-1; j++)
<a name="l02401"></a>02401         {
<a name="l02402"></a>02402           TGListTreeItem *item = tree-&gt;FindChildByName(xitem, p[j].c_str());
<a name="l02403"></a>02403 
<a name="l02404"></a>02404           <span class="keywordflow">if</span> (!item)
<a name="l02405"></a>02405             {
<a name="l02406"></a>02406               item = tree-&gt;AddItem(xitem,p[j].c_str());
<a name="l02407"></a>02407               <span class="keywordflow">if</span> (j==0)
<a name="l02408"></a>02408                 <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[item] = <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a2c9efb4d17b30eba2326dab6d8763d1a">A_SOURCE</a>;
<a name="l02409"></a>02409               <span class="keywordflow">else</span>
<a name="l02410"></a>02410                 <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[item] = <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498a506cbac1e552dac39438f1257f0a48db">A_FOLDER</a>;
<a name="l02411"></a>02411             }
<a name="l02412"></a>02412 
<a name="l02413"></a>02413           <span class="keywordflow">if</span> (first &amp;&amp; !reopen)
<a name="l02414"></a>02414             tree-&gt;OpenItem(xitem);
<a name="l02415"></a>02415 
<a name="l02416"></a>02416           xitem = item;
<a name="l02417"></a>02417         }
<a name="l02418"></a>02418 
<a name="l02419"></a>02419       <span class="keywordflow">if</span> (first &amp;&amp; !reopen)
<a name="l02420"></a>02420         tree-&gt;OpenItem(xitem);
<a name="l02421"></a>02421 
<a name="l02422"></a>02422       first = <span class="keyword">false</span>;
<a name="l02423"></a>02423 
<a name="l02424"></a>02424       std::string name = p.back();
<a name="l02425"></a>02425       TGListTreeItem* iii = tree-&gt;FindChildByName(xitem, name.c_str());
<a name="l02426"></a>02426       <span class="comment">//printf(&quot;Looking for %s, %p\n&quot;, name.c_str(), iii);</span>
<a name="l02427"></a>02427       <span class="keywordflow">if</span> (!iii)
<a name="l02428"></a>02428         iii = tree-&gt;AddItem(xitem, name.c_str(), gClient-&gt;GetPicture(<span class="stringliteral">&quot;diamond.xpm&quot;</span>), gClient-&gt;GetPicture(<span class="stringliteral">&quot;diamond.xpm&quot;</span>));
<a name="l02429"></a>02429 
<a name="l02430"></a>02430       <a class="code" href="Roody_8cxx.html#a48bffd501d6381c5876ae14bfaee41cf">gItemActions</a>[iii]   = <a class="code" href="Roody_8cxx.html#a8bb1ef53467e4f61410d12822d922498ad4f8562da213e20133393364451c5b44">A_ITEM</a>;
<a name="l02431"></a>02431       <a class="code" href="Roody_8cxx.html#af77fd30c760f8c2c99d2f9b8e1f99c00">gItemSources</a>[iii]   = p;
<a name="l02432"></a>02432     }
<a name="l02433"></a>02433 
<a name="l02434"></a>02434   tree-&gt;Resize();
<a name="l02435"></a>02435   Layout();
<a name="l02436"></a>02436 }
<a name="l02437"></a>02437 
<a name="l02438"></a><a class="code" href="classRoody.html#a1e24dd6677e49764770a4a72a33aaa89">02438</a> <span class="keywordtype">bool</span> <a class="code" href="classRoody.html#a1e24dd6677e49764770a4a72a33aaa89">Roody::OpenRootFile</a>( <span class="keywordtype">char</span> <span class="keyword">const</span> *filename )
<a name="l02439"></a>02439 {
<a name="l02440"></a>02440   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>,filename) )
<a name="l02441"></a>02441   {
<a name="l02442"></a>02442 <span class="preprocessor">#if 0</span>
<a name="l02443"></a>02443 <span class="preprocessor"></span>    std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02444"></a>02444     s += std::string(filename) + <span class="stringliteral">&quot;\&quot; is already loaded&quot;</span>;
<a name="l02445"></a>02445     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02446"></a>02446 <span class="preprocessor">#endif</span>
<a name="l02447"></a>02447 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02448"></a>02448   }
<a name="l02449"></a>02449 
<a name="l02450"></a>02450 <span class="preprocessor">#if 0</span>
<a name="l02451"></a>02451 <span class="preprocessor"></span>  TFile *f = <span class="keyword">new</span> TFile( filename, <span class="stringliteral">&quot;READ&quot;</span> );
<a name="l02452"></a>02452   <span class="keywordflow">if</span>( !f )
<a name="l02453"></a>02453   {
<a name="l02454"></a>02454     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;Error in loading file: could not allocate TFile object&quot;</span>,
<a name="l02455"></a>02455                   kMBIconExclamation, 0, NULL );
<a name="l02456"></a>02456     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02457"></a>02457   }
<a name="l02458"></a>02458   <span class="keywordflow">if</span>( f-&gt;IsZombie() )
<a name="l02459"></a>02459   {
<a name="l02460"></a>02460     std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02461"></a>02461     s += std::string(filename) + <span class="stringliteral">&quot;\&quot; is not a root file or the file doesn&apos;t exist&quot;</span>;
<a name="l02462"></a>02462     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02463"></a>02463     f-&gt;Close();
<a name="l02464"></a>02464     <span class="keyword">delete</span> f;
<a name="l02465"></a>02465     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02466"></a>02466   }
<a name="l02467"></a>02467 
<a name="l02468"></a>02468   DataSourceTDirectory* d = <span class="keyword">new</span> DataSourceTDirectory(f);
<a name="l02469"></a>02469 <span class="preprocessor">#endif</span>
<a name="l02470"></a>02470 <span class="preprocessor"></span>  DataSourceTFile* d = <span class="keyword">new</span> DataSourceTFile(filename);
<a name="l02471"></a>02471 
<a name="l02472"></a>02472   <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>);
<a name="l02473"></a>02473 
<a name="l02474"></a>02474   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02475"></a>02475 }
<a name="l02476"></a>02476 
<a name="l02477"></a><a class="code" href="classRoody.html#a8f835f115ffb995150946452b53fd793">02477</a> <span class="keywordtype">bool</span> <a class="code" href="classRoody.html#a8f835f115ffb995150946452b53fd793">Roody::OpenXmlServer</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> *dest)
<a name="l02478"></a>02478 {
<a name="l02479"></a>02479   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>, dest))
<a name="l02480"></a>02480     {
<a name="l02481"></a>02481 <span class="preprocessor">#if 0</span>
<a name="l02482"></a>02482 <span class="preprocessor"></span>      std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02483"></a>02483       s += std::string(dest) + <span class="stringliteral">&quot;\&quot; is already loaded&quot;</span>;
<a name="l02484"></a>02484       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02485"></a>02485 <span class="preprocessor">#endif</span>
<a name="l02486"></a>02486 <span class="preprocessor"></span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02487"></a>02487     }
<a name="l02488"></a>02488 
<a name="l02489"></a>02489   <a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>.push_back(dest);
<a name="l02490"></a>02490 
<a name="l02491"></a>02491   DataSourceXmlServer* d = <span class="keyword">new</span> DataSourceXmlServer(dest);
<a name="l02492"></a>02492 
<a name="l02493"></a>02493   <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, <a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>);
<a name="l02494"></a>02494 
<a name="l02495"></a>02495   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02496"></a>02496 }
<a name="l02497"></a>02497 
<a name="l02498"></a><a class="code" href="classRoody.html#a97bae4a2a71b69ec650b62925b028825">02498</a> <span class="keywordtype">bool</span> <a class="code" href="classRoody.html#a97bae4a2a71b69ec650b62925b028825">Roody::OpenNetDirectory</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> *dest)
<a name="l02499"></a>02499 {
<a name="l02500"></a>02500 <span class="preprocessor">#ifdef HAVE_NETDIRECTORY</span>
<a name="l02501"></a>02501 <span class="preprocessor"></span>  <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>, dest))
<a name="l02502"></a>02502     {
<a name="l02503"></a>02503 <span class="preprocessor">#if 0</span>
<a name="l02504"></a>02504 <span class="preprocessor"></span>      std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02505"></a>02505       s += std::string(dest) + <span class="stringliteral">&quot;\&quot; is already loaded&quot;</span>;
<a name="l02506"></a>02506       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02507"></a>02507 <span class="preprocessor">#endif</span>
<a name="l02508"></a>02508 <span class="preprocessor"></span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02509"></a>02509     }
<a name="l02510"></a>02510 
<a name="l02511"></a>02511   TNetDirectory *f = <span class="keyword">new</span> TNetDirectory(dest);
<a name="l02512"></a>02512 
<a name="l02513"></a>02513   <span class="keywordflow">if</span>( f-&gt;IsZombie() )
<a name="l02514"></a>02514     {
<a name="l02515"></a>02515       std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02516"></a>02516       s += std::string(dest) + <span class="stringliteral">&quot;\&quot; is not a root file or the file doesn&apos;t exist&quot;</span>;
<a name="l02517"></a>02517       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02518"></a>02518       f-&gt;Close();
<a name="l02519"></a>02519       <span class="keyword">delete</span> f;
<a name="l02520"></a>02520       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02521"></a>02521     }
<a name="l02522"></a>02522 
<a name="l02523"></a>02523   <a class="code" href="classRoody.html#a9550c2c6ac4c5099ac70b98d670e6031">fRootFiles</a>.push_back(dest);
<a name="l02524"></a>02524 
<a name="l02525"></a>02525   DataSourceTDirectory* d = <span class="keyword">new</span> DataSourceNetDirectory(f);
<a name="l02526"></a>02526 
<a name="l02527"></a>02527   <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, <a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>);
<a name="l02528"></a>02528 
<a name="l02529"></a>02529   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02530"></a>02530 <span class="preprocessor">#else</span>
<a name="l02531"></a>02531 <span class="preprocessor"></span>  std::string s(<span class="stringliteral">&quot;No support for TNetDirectory!&quot;</span>);
<a name="l02532"></a>02532   <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02533"></a>02533   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02534"></a>02534 <span class="preprocessor">#endif</span>
<a name="l02535"></a>02535 <span class="preprocessor"></span>}
<a name="l02536"></a>02536 
<a name="l02537"></a>02537 <span class="preprocessor">#ifdef HAVE_HBOOK</span>
<a name="l02538"></a>02538 <span class="preprocessor"></span><span class="keywordtype">bool</span> <a class="code" href="classRoody.html#a5f03fdc9c7abe3a565da4be5d5e7251c">Roody::OpenHbookFile</a>( <span class="keywordtype">char</span> <span class="keyword">const</span> *filename )
<a name="l02539"></a>02539 {
<a name="l02540"></a>02540   THbookFile *f = <span class="keyword">new</span> THbookFile( filename );
<a name="l02541"></a>02541   <span class="keywordflow">if</span>( !f )
<a name="l02542"></a>02542   {
<a name="l02543"></a>02543     std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02544"></a>02544     s += std::string(filename) + <span class="stringliteral">&quot;\&quot; could not create THbookFile object&quot;</span>;
<a name="l02545"></a>02545     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02546"></a>02546     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02547"></a>02547   }
<a name="l02548"></a>02548   <span class="keywordflow">if</span>( !f-&gt;IsOpen() )
<a name="l02549"></a>02549   {
<a name="l02550"></a>02550     std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02551"></a>02551     s += std::string(filename) + <span class="stringliteral">&quot;\&quot; is not an hbook file or the file doesn&apos;t exist&quot;</span>;
<a name="l02552"></a>02552     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02553"></a>02553     <span class="keyword">delete</span> f;
<a name="l02554"></a>02554     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02555"></a>02555   }
<a name="l02556"></a>02556   <span class="keywordflow">if</span>( <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>,filename) )
<a name="l02557"></a>02557   {
<a name="l02558"></a>02558     std::string s(<span class="stringliteral">&quot;Error in loading file: \&quot;&quot;</span>);
<a name="l02559"></a>02559     s += std::string(filename) + <span class="stringliteral">&quot;\&quot; is already loaded&quot;</span>;
<a name="l02560"></a>02560     <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, s.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02561"></a>02561     <span class="keyword">delete</span> f;
<a name="l02562"></a>02562     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02563"></a>02563   }
<a name="l02564"></a>02564 
<a name="l02565"></a>02565 <span class="preprocessor">#if 0</span>
<a name="l02566"></a>02566 <span class="preprocessor"></span>  <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>,
<a name="l02567"></a>02567                                 filename,(<span class="keywordtype">void</span>*)f,
<a name="l02568"></a>02568                                 gClient-&gt;GetPicture(<span class="stringliteral">&quot;rootdb_t.xpm&quot;</span>),
<a name="l02569"></a>02569                                 gClient-&gt;GetPicture(<span class="stringliteral">&quot;rootdb_t.xpm&quot;</span>) );
<a name="l02570"></a>02570   fTreeItemCurrent = <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName( <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>, filename );
<a name="l02571"></a>02571   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem( <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a> );
<a name="l02572"></a>02572   DisplayHBook(f, fTreeItemCurrent );
<a name="l02573"></a>02573   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;OpenItem( fTreeItemCurrent );
<a name="l02574"></a>02574   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l02575"></a>02575   Layout();
<a name="l02576"></a>02576 <span class="preprocessor">#endif</span>
<a name="l02577"></a>02577 <span class="preprocessor"></span>
<a name="l02578"></a>02578 <span class="preprocessor">#if 0</span>
<a name="l02579"></a>02579 <span class="preprocessor"></span>  DataSourceTDirectory* d = <span class="keyword">new</span> DataSourceTHbookFile(f);
<a name="l02580"></a>02580 
<a name="l02581"></a>02581   <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, <a class="code" href="classRoody.html#a205b6f9dccb6bd42fb62bd00e5cc304d">fTreeItemFiles</a>);
<a name="l02582"></a>02582 <span class="preprocessor">#endif</span>
<a name="l02583"></a>02583 <span class="preprocessor"></span>
<a name="l02584"></a>02584   <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02585"></a>02585 }
<a name="l02586"></a>02586 
<a name="l02587"></a>02587 <span class="preprocessor">#if 0</span>
<a name="l02588"></a>02588 <span class="preprocessor"></span><span class="keyword">class </span>MyTHbookKey: <span class="keyword">public</span> THbookKey
<a name="l02589"></a>02589 {
<a name="l02590"></a>02590 <span class="keyword">public</span>:
<a name="l02591"></a>02591   <span class="keywordtype">int</span> GetID()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fID; };
<a name="l02592"></a>02592 };
<a name="l02593"></a>02593 
<a name="l02594"></a>02594 <span class="keywordtype">void</span> Roody::DisplayHBook( THbookFile *file, TGListTreeItem *item )
<a name="l02595"></a>02595 {
<a name="l02596"></a>02596   TIter next( file-&gt;GetListOfKeys() );
<a name="l02597"></a>02597   MyTHbookKey *key;
<a name="l02598"></a>02598   <span class="keywordflow">while</span>( (key=static_cast&lt;MyTHbookKey*&gt;(next())) )
<a name="l02599"></a>02599   {
<a name="l02600"></a>02600     TObject *obj = file-&gt;Get(key-&gt;GetID());
<a name="l02601"></a>02601     <span class="comment">//if (obj)</span>
<a name="l02602"></a>02602     <span class="comment">//  DisplayObject( obj, item, &quot;&quot; );</span>
<a name="l02603"></a>02603     Layout();
<a name="l02604"></a>02604   }
<a name="l02605"></a>02605   fFileOnlineCanvas-&gt;Layout();
<a name="l02606"></a>02606 }
<a name="l02607"></a>02607 <span class="preprocessor">#endif</span>
<a name="l02608"></a>02608 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02609"></a>02609 <span class="preprocessor"></span>
<a name="l02610"></a><a class="code" href="classRoody.html#a881ecc84f680a6b25e9e81cf9b3c75bc">02610</a> std::string <a class="code" href="classRoody.html#a881ecc84f680a6b25e9e81cf9b3c75bc">Roody::GetRunNumber</a>( <span class="keywordtype">char</span> <span class="keyword">const</span> *filename )
<a name="l02611"></a>02611 {
<a name="l02612"></a>02612   <span class="keywordtype">int</span> end = strlen( filename );
<a name="l02613"></a>02613   <span class="keywordflow">while</span>( --end &gt;= 0 )
<a name="l02614"></a>02614   {
<a name="l02615"></a>02615     <span class="keywordflow">if</span>( filename[end] &lt;= <span class="charliteral">&apos;9&apos;</span> &amp;&amp; filename[end] &gt;= <span class="charliteral">&apos;0&apos;</span> )<span class="keywordflow">break</span>;
<a name="l02616"></a>02616   }
<a name="l02617"></a>02617   <span class="keywordtype">int</span> begin = end;
<a name="l02618"></a>02618   <span class="keywordflow">while</span>( --begin &gt;= 0 )
<a name="l02619"></a>02619   {
<a name="l02620"></a>02620     <span class="keywordflow">if</span>( filename[begin] &lt; <span class="charliteral">&apos;0&apos;</span> || filename[begin] &gt; <span class="charliteral">&apos;9&apos;</span> )<span class="keywordflow">break</span>;
<a name="l02621"></a>02621   }
<a name="l02622"></a>02622   ++begin;
<a name="l02623"></a>02623   <span class="keywordtype">int</span> len = end-begin+1;
<a name="l02624"></a>02624   <span class="keywordflow">return</span> std::string(TString( filename+begin,len).Data());
<a name="l02625"></a>02625 }
<a name="l02626"></a>02626 
<a name="l02627"></a><a class="code" href="classRoody.html#ab9d83ccd3387124292a7b16004738721">02627</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ab9d83ccd3387124292a7b16004738721">Roody::UpdateObjectClass</a>(TGListTreeItem *item, TObject* obj)
<a name="l02628"></a>02628 {
<a name="l02629"></a>02629   <span class="keywordflow">if</span> (!item)
<a name="l02630"></a>02630     <span class="keywordflow">return</span>;
<a name="l02631"></a>02631 
<a name="l02632"></a>02632   <span class="keywordflow">if</span> (!obj)
<a name="l02633"></a>02633     <span class="keywordflow">return</span>;
<a name="l02634"></a>02634 
<a name="l02635"></a>02635   std::string className = obj-&gt;ClassName();
<a name="l02636"></a>02636   std::string name      = obj-&gt;GetName();
<a name="l02637"></a>02637   std::string title     = obj-&gt;GetTitle();
<a name="l02638"></a>02638   std::string itemDescription = name;
<a name="l02639"></a>02639   <span class="comment">//std::string runNumber = rn;</span>
<a name="l02640"></a>02640   <span class="comment">//std::string file = fCurrentFile-&gt;GetName();</span>
<a name="l02641"></a>02641 
<a name="l02642"></a>02642   <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;TH1&quot;</span>) != className.npos )
<a name="l02643"></a>02643   {
<a name="l02644"></a>02644 <span class="preprocessor">#if 0</span>
<a name="l02645"></a>02645 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( title.find(<span class="stringliteral">&quot;Run#&quot;</span>) == title.npos &amp;&amp;                   <span class="comment">// Run# not in title and</span>
<a name="l02646"></a>02646         runNumber.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>) != runNumber.npos )  <span class="comment">// runNumber not blank</span>
<a name="l02647"></a>02647     {
<a name="l02648"></a>02648       std::string s( title );
<a name="l02649"></a>02649       s += <span class="stringliteral">&quot;    Run# &quot;</span>;
<a name="l02650"></a>02650       s += runNumber;
<a name="l02651"></a>02651       <span class="keyword">static_cast&lt;</span>TH1*<span class="keyword">&gt;</span>(obj)-&gt;SetTitle( s.c_str() );
<a name="l02652"></a>02652     }
<a name="l02653"></a>02653 <span class="preprocessor">#endif</span>
<a name="l02654"></a>02654 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( name != title )
<a name="l02655"></a>02655     {
<a name="l02656"></a>02656       itemDescription += <span class="stringliteral">&quot; &quot;</span>;
<a name="l02657"></a>02657       itemDescription += title;
<a name="l02658"></a>02658     }
<a name="l02659"></a>02659     <span class="comment">//item-&gt;Rename(itemDescription.c_str());</span>
<a name="l02660"></a>02660     item-&gt;SetPictures(gClient-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>), gClient-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>));
<a name="l02661"></a>02661   }
<a name="l02662"></a>02662 <span class="preprocessor">#if 0</span>
<a name="l02663"></a>02663 <span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;TH2&quot;</span>) != className.npos )
<a name="l02664"></a>02664   {
<a name="l02665"></a>02665     <span class="keywordflow">if</span>( title.find(<span class="stringliteral">&quot;Run#&quot;</span>) == title.npos &amp;&amp;                   <span class="comment">// Run# not in title and</span>
<a name="l02666"></a>02666         runNumber.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>) != runNumber.npos )  <span class="comment">// runNumber not blank</span>
<a name="l02667"></a>02667     {
<a name="l02668"></a>02668       std::string s( title );
<a name="l02669"></a>02669       s += <span class="stringliteral">&quot;    Run# &quot;</span>;
<a name="l02670"></a>02670       s += runNumber;
<a name="l02671"></a>02671       <span class="keyword">static_cast&lt;</span>TH2*<span class="keyword">&gt;</span>(obj)-&gt;SetTitle( s.c_str() );
<a name="l02672"></a>02672     }
<a name="l02673"></a>02673     <span class="keywordflow">if</span>( name != title )
<a name="l02674"></a>02674     {
<a name="l02675"></a>02675       itemDescription += <span class="stringliteral">&quot; &quot;</span>;
<a name="l02676"></a>02676       itemDescription += title;
<a name="l02677"></a>02677     }
<a name="l02678"></a>02678     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, itemDescription.c_str(),
<a name="l02679"></a>02679                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02680"></a>02680                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>),
<a name="l02681"></a>02681                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>) );
<a name="l02682"></a>02682   }
<a name="l02683"></a>02683   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;TH3&quot;</span>) != className.npos )
<a name="l02684"></a>02684   {
<a name="l02685"></a>02685     <span class="keywordflow">if</span>( title.find(<span class="stringliteral">&quot;Run#&quot;</span>) == title.npos &amp;&amp;                   <span class="comment">// Run# not in title and</span>
<a name="l02686"></a>02686         runNumber.find_first_not_of(<span class="stringliteral">&quot; &quot;</span>) != runNumber.npos )  <span class="comment">// runNumber not blank</span>
<a name="l02687"></a>02687     {
<a name="l02688"></a>02688       std::string s( title );
<a name="l02689"></a>02689       s += <span class="stringliteral">&quot;    Run# &quot;</span>;
<a name="l02690"></a>02690       s += runNumber;
<a name="l02691"></a>02691       <span class="keyword">static_cast&lt;</span>TH3*<span class="keyword">&gt;</span>(obj)-&gt;SetTitle( s.c_str() );
<a name="l02692"></a>02692     }
<a name="l02693"></a>02693     <span class="keywordflow">if</span>( name != title )
<a name="l02694"></a>02694     {
<a name="l02695"></a>02695       itemDescription += <span class="stringliteral">&quot; &quot;</span>;
<a name="l02696"></a>02696       itemDescription += title;
<a name="l02697"></a>02697     }
<a name="l02698"></a>02698     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, itemDescription.c_str(),
<a name="l02699"></a>02699                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02700"></a>02700                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h3_t.xpm&quot;</span>),
<a name="l02701"></a>02701                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h3_t.xpm&quot;</span>) );
<a name="l02702"></a>02702   }
<a name="l02703"></a>02703   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;Tree&quot;</span>) != className.npos )
<a name="l02704"></a>02704     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02705"></a>02705                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02706"></a>02706                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;tree_t.xpm&quot;</span>),
<a name="l02707"></a>02707                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;tree_t.xpm&quot;</span>) );
<a name="l02708"></a>02708   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;Ntuple&quot;</span>) != className.npos )
<a name="l02709"></a>02709     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02710"></a>02710                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02711"></a>02711                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;ntuple_t.xpm&quot;</span>),
<a name="l02712"></a>02712                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;ntuple_t.xpm&quot;</span>) );
<a name="l02713"></a>02713   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;Profile&quot;</span>) != className.npos )
<a name="l02714"></a>02714   {
<a name="l02715"></a>02715      <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;2D&quot;</span>) != className.npos )
<a name="l02716"></a>02716        <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02717"></a>02717                                      (<span class="keywordtype">void</span>*)obj,
<a name="l02718"></a>02718                                      gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>),
<a name="l02719"></a>02719                                      gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>) );
<a name="l02720"></a>02720      <span class="keywordflow">else</span>
<a name="l02721"></a>02721        <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02722"></a>02722                                      (<span class="keywordtype">void</span>*)obj,
<a name="l02723"></a>02723                                      gClient-&gt;GetPicture(<span class="stringliteral">&quot;profile_t.xpm&quot;</span>),
<a name="l02724"></a>02724                                      gClient-&gt;GetPicture(<span class="stringliteral">&quot;profile_t.xpm&quot;</span>) );
<a name="l02725"></a>02725   }
<a name="l02726"></a>02726   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;TCanvas&quot;</span>) != className.npos )
<a name="l02727"></a>02727   {
<a name="l02728"></a>02728     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02729"></a>02729                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02730"></a>02730                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>),
<a name="l02731"></a>02731                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;h1_t.xpm&quot;</span>) );
<a name="l02732"></a>02732   }
<a name="l02733"></a>02733   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( className.find(<span class="stringliteral">&quot;TCutG&quot;</span>) != className.npos )
<a name="l02734"></a>02734   {
<a name="l02735"></a>02735     <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;AddItem( item, name.c_str(),
<a name="l02736"></a>02736                                   (<span class="keywordtype">void</span>*)obj,
<a name="l02737"></a>02737                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;cut_t.xpm&quot;</span>),
<a name="l02738"></a>02738                                   gClient-&gt;GetPicture(<span class="stringliteral">&quot;cut_t.xpm&quot;</span>) );
<a name="l02739"></a>02739   }
<a name="l02740"></a>02740 <span class="preprocessor">#endif</span>
<a name="l02741"></a>02741 <span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj-&gt;InheritsFrom(TGraph::Class()))
<a name="l02742"></a>02742   {
<a name="l02743"></a>02743     item-&gt;SetPictures(gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>), gClient-&gt;GetPicture(<span class="stringliteral">&quot;h2_t.xpm&quot;</span>));
<a name="l02744"></a>02744   }
<a name="l02745"></a>02745   <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;Resize();
<a name="l02746"></a>02746 }
<a name="l02747"></a>02747 
<a name="l02748"></a><a class="code" href="classRoody.html#ae82d729c15fbfb89641e812fcc27d35f">02748</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#ae82d729c15fbfb89641e812fcc27d35f">Roody::ConnectNetDirectory</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*ss, <span class="keywordtype">bool</span> displayMsgBox)
<a name="l02749"></a>02749 {
<a name="l02750"></a>02750   <span class="keywordflow">if</span> (ss == NULL)
<a name="l02751"></a>02751     {
<a name="l02752"></a>02752       <span class="keyword">static</span> TObjString ostr;
<a name="l02753"></a>02753       <span class="keyword">static</span> std::string istr = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02754"></a>02754       <span class="keyword">new</span> <a class="code" href="classTGTextDialog.html">TGTextDialog</a>( gClient-&gt;GetRoot(), <span class="keyword">this</span>, 100, 100, <span class="stringliteral">&quot;&amp;Host name:&quot;</span>, istr.c_str(), &amp;ostr);
<a name="l02755"></a>02755       ss = ostr.GetString();
<a name="l02756"></a>02756       <span class="keywordflow">if</span> (strcmp(ss,<span class="stringliteral">&quot;-1&quot;</span>) == 0)
<a name="l02757"></a>02757         <span class="keywordflow">return</span>;
<a name="l02758"></a>02758       istr = ss;
<a name="l02759"></a>02759     }
<a name="l02760"></a>02760 
<a name="l02761"></a>02761   std::string server = ss;
<a name="l02762"></a>02762   <span class="keywordflow">if</span> (strstr(ss, <span class="stringliteral">&quot;:&quot;</span>) == NULL)
<a name="l02763"></a>02763     server += <span class="stringliteral">&quot;:9091&quot;</span>;
<a name="l02764"></a>02764 
<a name="l02765"></a>02765   <a class="code" href="classRoody.html#a97bae4a2a71b69ec650b62925b028825">OpenNetDirectory</a>(server.c_str());
<a name="l02766"></a>02766 }
<a name="l02767"></a>02767 
<a name="l02768"></a><a class="code" href="classRoody.html#a535ef1e18afb6684d16ff1e216b2e981">02768</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a535ef1e18afb6684d16ff1e216b2e981">Roody::ConnectServer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>*ss, <span class="keywordtype">bool</span> displayMsgBox)
<a name="l02769"></a>02769 {
<a name="l02770"></a>02770   <span class="keywordflow">if</span> (ss == NULL)
<a name="l02771"></a>02771     {
<a name="l02772"></a>02772       <span class="keyword">static</span> TObjString ostr;
<a name="l02773"></a>02773       <span class="keyword">static</span> std::string istr = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02774"></a>02774       <span class="keyword">new</span> <a class="code" href="classTGTextDialog.html">TGTextDialog</a>( gClient-&gt;GetRoot(), <span class="keyword">this</span>, 100, 100, <span class="stringliteral">&quot;&amp;Host name:&quot;</span>, istr.c_str(), &amp;ostr);
<a name="l02775"></a>02775       ss = ostr.GetString();
<a name="l02776"></a>02776       <span class="keywordflow">if</span> (strcmp(ss,<span class="stringliteral">&quot;-1&quot;</span>) == 0)
<a name="l02777"></a>02777         <span class="keywordflow">return</span>;
<a name="l02778"></a>02778       istr = ss;
<a name="l02779"></a>02779     }
<a name="l02780"></a>02780 
<a name="l02781"></a>02781   <span class="keywordflow">if</span> (strncasecmp(ss, <span class="stringliteral">&quot;http&quot;</span>, 4) == 0) {
<a name="l02782"></a>02782      <a class="code" href="classRoody.html#a8f835f115ffb995150946452b53fd793">OpenXmlServer</a>(ss);
<a name="l02783"></a>02783      <span class="keywordflow">return</span>;
<a name="l02784"></a>02784   }
<a name="l02785"></a>02785 
<a name="l02786"></a>02786   std::string server = ss;
<a name="l02787"></a>02787   <span class="keywordflow">if</span> (strstr(ss, <span class="stringliteral">&quot;:&quot;</span>) == NULL)
<a name="l02788"></a>02788     server += <span class="stringliteral">&quot;:9090&quot;</span>;
<a name="l02789"></a>02789 
<a name="l02790"></a>02790   std::vector&lt;std::string&gt; s = <a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos;:&apos;</span>, server);
<a name="l02791"></a>02791 
<a name="l02792"></a>02792   std::string hostname = s[0];
<a name="l02793"></a>02793   <span class="keywordtype">int</span> port = atoi(s[1].c_str());
<a name="l02794"></a>02794   <span class="keywordflow">if</span> (port == 0)
<a name="l02795"></a>02795     {
<a name="l02796"></a>02796       std::string error;
<a name="l02797"></a>02797       error += <span class="stringliteral">&quot;Invalid port number in \&apos;&quot;</span>;
<a name="l02798"></a>02798       error += server;
<a name="l02799"></a>02799       error += <span class="stringliteral">&quot;\&apos;&quot;</span>;
<a name="l02800"></a>02800       <span class="keyword">new</span> TGMsgBox(gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, error.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02801"></a>02801       <span class="keywordflow">return</span>;
<a name="l02802"></a>02802     }
<a name="l02803"></a>02803 
<a name="l02804"></a>02804   <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>-&gt;FindChildByName(<a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>,server.c_str()))
<a name="l02805"></a>02805     {
<a name="l02806"></a>02806       std::string error;
<a name="l02807"></a>02807       error += <span class="stringliteral">&quot;Already connected to &quot;</span>;
<a name="l02808"></a>02808       error += server;
<a name="l02809"></a>02809       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(error.c_str());
<a name="l02810"></a>02810       <span class="keywordflow">return</span>;
<a name="l02811"></a>02811     }
<a name="l02812"></a>02812 
<a name="l02813"></a>02813   TSocket *sock = <span class="keyword">new</span> TSocket(hostname.c_str(), port);
<a name="l02814"></a>02814   <span class="keywordflow">if</span> (!sock || !sock-&gt;IsValid())
<a name="l02815"></a>02815     {
<a name="l02816"></a>02816       <span class="keywordflow">if</span> (sock)
<a name="l02817"></a>02817         <span class="keyword">delete</span> sock;
<a name="l02818"></a>02818       sock = 0;
<a name="l02819"></a>02819 
<a name="l02820"></a>02820       <span class="keywordflow">if</span>( displayMsgBox )
<a name="l02821"></a>02821         {
<a name="l02822"></a>02822           std::string error;
<a name="l02823"></a>02823           error += <span class="stringliteral">&quot;Cannot connect to Midas server \&apos;&quot;</span>;
<a name="l02824"></a>02824           error += server;
<a name="l02825"></a>02825           error += <span class="stringliteral">&quot;\&apos;&quot;</span>;
<a name="l02826"></a>02826           <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(error.c_str());
<a name="l02827"></a>02827           <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, error.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02828"></a>02828         }
<a name="l02829"></a>02829       
<a name="l02830"></a>02830       <span class="keywordflow">return</span>;
<a name="l02831"></a>02831     }
<a name="l02832"></a>02832 
<a name="l02833"></a>02833   DataSourceBase* d = <span class="keyword">new</span> DataSourceTNetFolder(sock);
<a name="l02834"></a>02834   <a class="code" href="classRoody.html#a5109207cb67ff1657c267cf725fbf02b">fOnlineFiles</a>.push_back(d-&gt;GetName());
<a name="l02835"></a>02835 
<a name="l02836"></a>02836   std::string msg = <span class="stringliteral">&quot;Connected to &quot;</span>;
<a name="l02837"></a>02837   msg += server;
<a name="l02838"></a>02838   <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(msg.c_str());
<a name="l02839"></a>02839   <a class="code" href="classRoody.html#a7bd00f34ffb0b9a91ab553576c801ad8">AddDataSource</a>(d, <a class="code" href="classRoody.html#a58d82692b76daddd62008acd8613a165">fContents</a>, <a class="code" href="classRoody.html#ac608da81c5949e10666e37aea706cc5e">fTreeItemOnline</a>);
<a name="l02840"></a>02840 }
<a name="l02841"></a>02841 
<a name="l02842"></a><a class="code" href="classRoody.html#a07166d648c44522d6f3a393a1247fadb">02842</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a07166d648c44522d6f3a393a1247fadb">Roody::StartUpdateTimer</a>()
<a name="l02843"></a>02843 {
<a name="l02844"></a>02844   <span class="comment">//printf(&quot;StartUpdateTimer %d %d\n&quot;, fUpdateTimerSec, fUpdatePause);</span>
<a name="l02845"></a>02845 
<a name="l02846"></a>02846   <span class="keywordflow">if</span> (<a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a> &gt; 0 &amp;&amp; !<a class="code" href="classRoody.html#a96fbcb2282d22a39069dd14c326185bb">fUpdatePause</a>)
<a name="l02847"></a>02847   {
<a name="l02848"></a>02848     <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;SetTime(<a class="code" href="classRoody.html#acc9f0ce284066a96baff96bf9f0447ae">fUpdateTimerSec</a>*1000); <span class="comment">// changes timer length and restarts it</span>
<a name="l02849"></a>02849     <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;Start();
<a name="l02850"></a>02850   }
<a name="l02851"></a>02851   <span class="keywordflow">else</span>
<a name="l02852"></a>02852   {
<a name="l02853"></a>02853     <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;Stop();
<a name="l02854"></a>02854   }
<a name="l02855"></a>02855 }
<a name="l02856"></a>02856 
<a name="l02857"></a><a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">02857</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a649283dfe1b26d571571198d06e703bc">Roody::RefreshAll</a>()
<a name="l02858"></a>02858 {
<a name="l02859"></a>02859   <span class="comment">//printf(&quot;RefreshAll!\n&quot;);</span>
<a name="l02860"></a>02860 
<a name="l02861"></a>02861   <a class="code" href="classRoody.html#acb20e66b8aab14851d46f34c10ad10bd">fUpdateTimer</a>-&gt;Stop(); <span class="comment">// so multiple updates do not occur at once</span>
<a name="l02862"></a>02862 
<a name="l02863"></a>02863   TIter next = gROOT-&gt;GetListOfCanvases();
<a name="l02864"></a>02864   <span class="keywordflow">while</span>(1)
<a name="l02865"></a>02865     {
<a name="l02866"></a>02866       TCanvas *canvas = (TCanvas*)next();
<a name="l02867"></a>02867       <span class="keywordflow">if</span> (!canvas)
<a name="l02868"></a>02868         <span class="keywordflow">break</span>;
<a name="l02869"></a>02869 
<a name="l02870"></a>02870       <a class="code" href="classRoody.html#a8ad5069ca505521a9e0581e69e0f5b04">RedrawCanvas</a>(canvas, <span class="keyword">true</span>);
<a name="l02871"></a>02871     }
<a name="l02872"></a>02872 
<a name="l02873"></a>02873   <a class="code" href="classRoody.html#a07166d648c44522d6f3a393a1247fadb">StartUpdateTimer</a>();
<a name="l02874"></a>02874 }
<a name="l02875"></a>02875 
<a name="l02876"></a><a class="code" href="classRoody.html#aa3421e10a9f4a8b7ad20bdda66964ae7">02876</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#aa3421e10a9f4a8b7ad20bdda66964ae7">Roody::OpenRefreshDialog</a>()
<a name="l02877"></a>02877 {
<a name="l02878"></a>02878   TObjString ostr;
<a name="l02879"></a>02879   <span class="keyword">new</span> <a class="code" href="classTGTextDialog.html">TGTextDialog</a>( gClient-&gt;GetRoot(), <span class="keyword">this</span>, 100, 100, <span class="stringliteral">&quot;Refresh time in seconds: &quot;</span>, <span class="stringliteral">&quot;&quot;</span>, &amp;ostr);
<a name="l02880"></a>02880   <span class="keyword">const</span> <span class="keywordtype">char</span>* str = ostr.GetString();
<a name="l02881"></a>02881   <span class="keywordflow">if</span> (strcmp(str,<span class="stringliteral">&quot;-1&quot;</span>)==0)
<a name="l02882"></a>02882     <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText(<span class="stringliteral">&quot;Refresh not changed&quot;</span>);
<a name="l02883"></a>02883   <span class="keywordflow">else</span>
<a name="l02884"></a>02884     <a class="code" href="classRoody.html#a2ee32c43e68c09115a14175364c1317c">SetRefreshRate</a>(atoi(str));
<a name="l02885"></a>02885 }
<a name="l02886"></a>02886 
<a name="l02887"></a><a class="code" href="classRoody.html#af44aa6b92487b4440d55ece092706fb5">02887</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#af44aa6b92487b4440d55ece092706fb5">Roody::OpenZoneDialog</a>()
<a name="l02888"></a>02888 {
<a name="l02889"></a>02889   TObjString ostr;
<a name="l02890"></a>02890   <span class="keyword">new</span> <a class="code" href="classTGTextDialog.html">TGTextDialog</a>( gClient-&gt;GetRoot(), <span class="keyword">this</span>, 100, 100,
<a name="l02891"></a>02891                     <span class="stringliteral">&quot;Zone Setting: (columns x rows, e.g. 2x2): &quot;</span>, <span class="stringliteral">&quot;&quot;</span>, &amp;ostr);
<a name="l02892"></a>02892   <span class="keyword">const</span> <span class="keywordtype">char</span>* str = ostr.GetString();
<a name="l02893"></a>02893   <span class="keywordflow">if</span> (strcmp(str,<span class="stringliteral">&quot;-1&quot;</span>)==0)
<a name="l02894"></a>02894     {
<a name="l02895"></a>02895       <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText( <span class="stringliteral">&quot;Zone settings not changed&quot;</span>);
<a name="l02896"></a>02896       <span class="keywordflow">return</span>;
<a name="l02897"></a>02897     }
<a name="l02898"></a>02898   std::vector&lt;std::string&gt; sss = <a class="code" href="Roody_8cxx.html#a627fff1fe2fcbaca685dcd2e79087bef">split</a>(<span class="charliteral">&apos;x&apos;</span>, str);
<a name="l02899"></a>02899   std::vector&lt;int&gt; iii = <a class="code" href="Roody_8cxx.html#a788304d1e01753ea552251ad32485baf">toInt</a>(sss);
<a name="l02900"></a>02900 
<a name="l02901"></a>02901   <span class="keywordtype">int</span> columns = iii[0];
<a name="l02902"></a>02902   <span class="keywordtype">int</span> rows    = iii[1];
<a name="l02903"></a>02903 
<a name="l02904"></a>02904   <span class="keywordflow">if</span> (columns == 0)
<a name="l02905"></a>02905     {
<a name="l02906"></a>02906       columns = 1;
<a name="l02907"></a>02907       std::string err;
<a name="l02908"></a>02908       err += <span class="stringliteral">&quot;Invalid number of columns in &quot;</span>;
<a name="l02909"></a>02909       err += str;
<a name="l02910"></a>02910       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, err.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02911"></a>02911     }
<a name="l02912"></a>02912 
<a name="l02913"></a>02913   <span class="keywordflow">if</span> (rows == 0)
<a name="l02914"></a>02914     {
<a name="l02915"></a>02915       rows = 1;
<a name="l02916"></a>02916       std::string err;
<a name="l02917"></a>02917       err += <span class="stringliteral">&quot;Invalid number of rows in &quot;</span>;
<a name="l02918"></a>02918       err += str;
<a name="l02919"></a>02919       <span class="keyword">new</span> TGMsgBox( gClient-&gt;GetRoot(), <span class="keyword">this</span>, <span class="stringliteral">&quot;Error&quot;</span>, err.c_str(), kMBIconExclamation, 0, NULL );
<a name="l02920"></a>02920     }
<a name="l02921"></a>02921 
<a name="l02922"></a>02922   <a class="code" href="classRoody.html#a60af242cf4f26d4c7107f5c0dabcb7f8">SetupZones</a>( columns, rows );
<a name="l02923"></a>02923   <a class="code" href="classRoody.html#aeab0c9ef7324094b3fe7c64dbd4cbea6">SetupZonesMenu</a>();
<a name="l02924"></a>02924 }
<a name="l02925"></a>02925 
<a name="l02926"></a><a class="code" href="classRoody.html#a3bdfaf4086fcb5b9f39dab207b63a6b7">02926</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#a3bdfaf4086fcb5b9f39dab207b63a6b7">Roody::OpenSaveDialog</a>()
<a name="l02927"></a>02927 {
<a name="l02928"></a>02928   TGFileInfo fileinfo;
<a name="l02929"></a>02929   fileinfo.fFilename = 0;
<a name="l02930"></a>02930   <span class="keywordtype">char</span> <span class="keyword">const</span> *fileTypes[] = {<span class="stringliteral">&quot;Save file&quot;</span>,<span class="stringliteral">&quot;*.xml&quot;</span>,<span class="stringliteral">&quot;Any file&quot;</span>,<span class="stringliteral">&quot;*&quot;</span>,0,0};
<a name="l02931"></a>02931   fileinfo.fFileTypes = fileTypes;
<a name="l02932"></a>02932   <span class="keyword">new</span> TGFileDialog( fClient-&gt;GetRoot(), <span class="keyword">this</span>, kFDOpen, &amp;fileinfo);
<a name="l02933"></a>02933   TString savefileName = fileinfo.fFilename;
<a name="l02934"></a>02934   <span class="keywordflow">if</span>( savefileName.Contains(<span class="stringliteral">&quot;-1&quot;</span>) )
<a name="l02935"></a>02935   {
<a name="l02936"></a>02936     <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText( <span class="stringliteral">&quot;NO FILE SELECTED&quot;</span> );
<a name="l02937"></a>02937   }
<a name="l02938"></a>02938   <span class="keywordflow">else</span>
<a name="l02939"></a>02939   {
<a name="l02940"></a>02940     <span class="keywordflow">if</span> (!savefileName.Contains(<span class="stringliteral">&quot;.xml&quot;</span>))
<a name="l02941"></a>02941       savefileName += <span class="stringliteral">&quot;.xml&quot;</span>;
<a name="l02942"></a>02942     <a class="code" href="classRoody.html#aead15bc9d8344b174cfdb718c32b26b9">SaveFile</a>(savefileName.Data());
<a name="l02943"></a>02943   }
<a name="l02944"></a>02944 }
<a name="l02945"></a>02945 
<a name="l02946"></a><a class="code" href="classRoody.html#afe70fea53eba9e5bc30f3b0daa164746">02946</a> <span class="keywordtype">void</span> <a class="code" href="classRoody.html#afe70fea53eba9e5bc30f3b0daa164746">Roody::OpenRestoreDialog</a>()
<a name="l02947"></a>02947 {
<a name="l02948"></a>02948   TGFileInfo fileinfo;
<a name="l02949"></a>02949   fileinfo.fFilename = 0;
<a name="l02950"></a>02950   <span class="keywordtype">char</span> <span class="keyword">const</span> *fileTypes[] = {<span class="stringliteral">&quot;Save file&quot;</span>,<span class="stringliteral">&quot;*.xml&quot;</span>,<span class="stringliteral">&quot;Any file&quot;</span>,<span class="stringliteral">&quot;*&quot;</span>,0,0};
<a name="l02951"></a>02951   fileinfo.fFileTypes = fileTypes;
<a name="l02952"></a>02952   <span class="keyword">new</span> TGFileDialog( fClient-&gt;GetRoot(), <span class="keyword">this</span>, kFDOpen, &amp;fileinfo );
<a name="l02953"></a>02953   <span class="keywordflow">if</span>( fileinfo.fFilename )
<a name="l02954"></a>02954   {
<a name="l02955"></a>02955     <a class="code" href="classRoody.html#a6a1265f21760af02be06eaa222c74d0a">RestoreFile</a>( fileinfo.fFilename );
<a name="l02956"></a>02956   }
<a name="l02957"></a>02957   <span class="keywordflow">else</span>
<a name="l02958"></a>02958   {
<a name="l02959"></a>02959     <a class="code" href="classRoody.html#a92d8f0eb283ec9c065ce5a5cebe26d8e">fStatusBar</a>-&gt;SetText( <span class="stringliteral">&quot;NO FILE SELECTED&quot;</span> );
<a name="l02960"></a>02960   }
<a name="l02961"></a>02961 }
<a name="l02962"></a>02962 
<a name="l02963"></a>02963 <span class="comment">// end of code</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Jul 2012 for Roody by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
